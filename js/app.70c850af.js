(function(){"use strict";var e={387:function(e,t,s){var a=s(5130),i=s(6768);const o={class:"min-h-screen bg-[#121212]"};function r(e,t,s,a,r,l){const n=(0,i.g2)("router-view"),c=(0,i.g2)("MobileNav"),d=(0,i.g2)("ToastNotification");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(n),(0,i.bF)(c),(0,i.bF)(d)])}const l={class:"fixed bottom-0 left-0 right-0 bg-[#121212]/95 backdrop-blur-md border-t border-white/10 md:hidden z-40"},n={class:"flex items-center justify-around p-4"};function c(e,t,s,a,o,r){const c=(0,i.g2)("router-link"),d=(0,i.g2)("ProfileMenu");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",l,[(0,i.Lk)("div",n,[(0,i.bF)(c,{to:"/",class:"flex flex-col items-center gap-1 text-white/60 hover:text-white"},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.Lk)("i",{class:"fas fa-home text-xl"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"Home",-1)]))),_:1,__:[2]}),(0,i.bF)(c,{to:"/player",class:"flex flex-col items-center gap-1 text-white/60 hover:text-white"},{default:(0,i.k6)((()=>t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-play-circle text-xl"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"Player",-1)]))),_:1,__:[3]}),(0,i.bF)(c,{to:"/search",class:"flex flex-col items-center gap-1 text-white/60 hover:text-white"},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-search text-xl"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"Search",-1)]))),_:1,__:[4]}),(0,i.bF)(c,{to:"/downloads",class:"flex flex-col items-center gap-1 text-white/60 hover:text-white"},{default:(0,i.k6)((()=>t[5]||(t[5]=[(0,i.Lk)("i",{class:"fas fa-download text-xl"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"Downloads",-1)]))),_:1,__:[5]}),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.toggleMenu&&r.toggleMenu(...e)),class:"flex flex-col items-center gap-1 text-white/60 hover:text-white"},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-user text-xl"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"Profile",-1)]))])]),(0,i.bF)(d,{"is-open":o.isMenuOpen,onClose:t[1]||(t[1]=e=>o.isMenuOpen=!1)},null,8,["is-open"])],64)}var d=s(4232);const u={key:0,class:"fixed inset-0 bg-black/95 z-50 flex flex-col overflow-y-auto"},h={class:"flex justify-between items-center p-6"},m={key:0,class:"px-6 py-4 border-b border-white/10"},p={class:"flex items-center gap-4"},f={class:"w-16 h-16 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center text-white"},g={class:"text-2xl font-semibold"},v={class:"text-xl font-semibold text-white"},b={class:"text-white/60"},y={class:"flex-1 px-6 py-4"},k={class:"space-y-6"},w={key:1,href:"#",class:"flex items-center gap-4 text-white/80 hover:text-white group"},x={class:"p-6 space-y-4 pb-24 md:pb-6"};function L(e,t,s,a,o,r){const l=(0,i.g2)("router-link");return s.isOpen?((0,i.uX)(),(0,i.CE)("div",u,[(0,i.Lk)("div",h,[t[5]||(t[5]=(0,i.Lk)("h1",{class:"text-4xl font-bold text-white"},[(0,i.eW)("MENU"),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},".")],-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.close&&r.close(...e)),class:"text-white/80 hover:text-white"},t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-times text-2xl"},null,-1)]))]),o.user?((0,i.uX)(),(0,i.CE)("div",m,[(0,i.Lk)("div",p,[(0,i.Lk)("div",f,[(0,i.Lk)("span",g,(0,d.v_)(r.userInitials),1)]),(0,i.Lk)("div",null,[(0,i.Lk)("h2",v,(0,d.v_)(r.userName),1),(0,i.Lk)("p",b,(0,d.v_)(o.user.phone),1)])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",y,[(0,i.Lk)("div",k,[o.user?((0,i.uX)(),(0,i.Wv)(l,{key:0,to:"/profile",class:"flex items-center gap-4 text-white/80 hover:text-white group",onClick:r.close},{default:(0,i.k6)((()=>t[6]||(t[6]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-user text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"My Profile",-1)]))),_:1,__:[6]},8,["onClick"])):(0,i.Q3)("",!0),o.user?((0,i.uX)(),(0,i.CE)("a",w,t[7]||(t[7]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-heart text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"My List",-1)]))):(0,i.Q3)("",!0),o.user?((0,i.uX)(),(0,i.Wv)(l,{key:2,to:"/referral",class:"flex items-center gap-4 text-white/80 hover:text-white group",onClick:r.close},{default:(0,i.k6)((()=>t[8]||(t[8]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-users text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"Referral",-1)]))),_:1,__:[8]},8,["onClick"])):(0,i.Q3)("",!0),(0,i.bF)(l,{to:"/wallet",class:"flex items-center gap-4 text-white/80 hover:text-white group"},{default:(0,i.k6)((()=>t[9]||(t[9]=[(0,i.Lk)("div",{class:"w-8 h-8 flex items-center justify-center text-[#ff4d4d]"},[(0,i.Lk)("i",{class:"fas fa-wallet text-xl"})],-1),(0,i.Lk)("span",{class:"text-lg"},"Wallet",-1)]))),_:1,__:[9]}),t[10]||(t[10]=(0,i.Fv)('<a href="#" class="flex items-center gap-4 text-white/80 hover:text-white group"><div class="w-8 h-8 flex items-center justify-center text-[#ff4d4d]"><i class="fas fa-headphones text-xl"></i></div><span class="text-lg">Help</span></a><a href="#" class="flex items-center gap-4 text-white/80 hover:text-white group"><div class="w-8 h-8 flex items-center justify-center text-[#ff4d4d]"><i class="fas fa-gift text-xl"></i></div><span class="text-lg">Offers</span></a><a href="#" class="flex items-center gap-4 text-white/80 hover:text-white group"><div class="w-8 h-8 flex items-center justify-center text-[#ff4d4d]"><i class="fas fa-file-alt text-xl"></i></div><span class="text-lg">Terms and Conditions</span></a>',3))])]),(0,i.Lk)("div",x,[o.user?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>r.handleLogout&&r.handleLogout(...e)),class:"w-full py-4 px-6 bg-[#1d1d1d] text-white font-semibold rounded-lg hover:bg-[#2d2d2d] transition-colors"}," Logout ")):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.handleSignIn&&r.handleSignIn(...e)),class:"w-full py-4 px-6 bg-[#1d1d1d] text-white font-semibold rounded-lg hover:bg-[#2d2d2d] transition-colors"}," Sign In "),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>r.handleSubscribe&&r.handleSubscribe(...e)),class:"w-full py-4 px-6 bg-[#ff4d4d] text-white font-semibold rounded-lg hover:opacity-90 transition-opacity"}," Subscribe Now ")],64)),t[11]||(t[11]=(0,i.Lk)("p",{class:"text-center text-white/40 text-sm"},"Version 0.1.38",-1))])])):(0,i.Q3)("",!0)}s(4114),s(8111),s(7588);var C=s(4373),S=s(782);const E=()=>({user:JSON.parse(localStorage.getItem("user"))||null,isAuthenticated:"true"===localStorage.getItem("isAuthenticated"),token:localStorage.getItem("token")||null,subscription:null,isLoading:!1,toast:{show:!1,message:"",type:"info",duration:3e3}});var P=(0,S.y$)({state:E(),mutations:{setUser(e,t){e.user=t,e.isAuthenticated=!!t,localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("isAuthenticated","true")},setAuthenticated(e,t){e.isAuthenticated=t,localStorage.setItem("isAuthenticated",t.toString())},setToken(e,t){e.token=t,t?localStorage.setItem("token",t):localStorage.removeItem("token")},setLoading(e,t){e.isLoading=t},setSubscription(e,t){e.subscription=t},logout(e){Object.assign(e,E()),localStorage.removeItem("user"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("token"),localStorage.removeItem("subscription")},RESET_STATE(e){Object.assign(e,E())},showToast(e,{message:t,type:s="info",duration:a=3e3}){e.toast={show:!0,message:t,type:s,duration:a}},hideToast(e){e.toast.show=!1}},actions:{initializeStore({commit:e}){const t=JSON.parse(localStorage.getItem("user")),s=localStorage.getItem("token");t&&s&&(e("setUser",t),e("setToken",s))},logout({commit:e}){e("logout")},resetState({commit:e}){return new Promise((t=>{e("RESET_STATE"),t()}))},setLoading({commit:e},t){e("setLoading",t)},showToast({commit:e},{message:t,type:s,duration:a}){e("showToast",{message:t,type:s,duration:a}),setTimeout((()=>{e("hideToast")}),a||3e3)}},getters:{isLoading:e=>e.isLoading,isAuthenticated:e=>e.isAuthenticated,currentUser:e=>e.user,hasActiveSubscription:e=>!!e.subscription,subscriptionDetails:e=>e.subscription,token:e=>e.token,toast:e=>e.toast}});const _=()=>{const e=["theme"];Object.keys(localStorage).forEach((t=>{e.includes(t)||localStorage.removeItem(t)})),sessionStorage.clear(),document.cookie.split(";").forEach((e=>{const t=e.split("=")[0].trim();document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`}))},M=async()=>{await P.dispatch("resetState")},A=async()=>{try{await C.A.post("/users/logout/")}catch(e){console.error("Logout API error:",e)}},T=async()=>{try{await A(),_(),await M(),window.location.href="/"}catch(e){console.error("Logout error:",e),window.location.href="/"}};var V={name:"ProfileMenu",props:{isOpen:{type:Boolean,default:!1}},data(){return{user:null}},computed:{userInitials(){if(!this.user)return"";const e=this.user.first_name||"",t=this.user.last_name||"";return(e.charAt(0)+t.charAt(0)).toUpperCase()||this.user.phone.slice(0,2)},userName(){return this.user?this.user.first_name||this.user.last_name?`${this.user.first_name||""} ${this.user.last_name||""}`.trim():this.user.phone:""}},methods:{close(){this.$emit("close")},handleSignIn(){this.$router.push("/login"),this.close()},handleSubscribe(){this.$router.push("/plans"),this.close()},async handleLogout(){try{this.$emit("loading",!0),await T(),this.close()}catch(e){console.error("Logout failed:",e),alert("Logout failed. Please try again.")}finally{this.$emit("loading",!1)}}},mounted(){const e=localStorage.getItem("user");if(e)try{this.user=JSON.parse(e)}catch(t){console.error("Error parsing user data:",t)}window.addEventListener("storage",(e=>{if("user"===e.key)if(e.newValue)try{this.user=JSON.parse(e.newValue)}catch(e){console.error("Error parsing user data:",e)}else this.user=null}))}},I=s(1241);const D=(0,I.A)(V,[["render",L]]);var R=D,$={name:"MobileNav",components:{ProfileMenu:R},data(){return{isMenuOpen:!1}},methods:{toggleMenu(){this.isMenuOpen=!this.isMenuOpen}}};const F=(0,I.A)($,[["render",c]]);var X=F;const j={class:"toast-content"};function N(e,t,s,o,r,l){return(0,i.uX)(),(0,i.Wv)(a.eB,{name:"toast"},{default:(0,i.k6)((()=>[e.toast.show?((0,i.uX)(),(0,i.CE)("div",{key:0,class:(0,d.C4)(["toast",`toast-${e.toast.type}`])},[(0,i.Lk)("div",j,[(0,i.Lk)("i",{class:(0,d.C4)(l.iconClass)},null,2),(0,i.Lk)("span",null,(0,d.v_)(e.toast.message),1)])],2)):(0,i.Q3)("",!0)])),_:1})}var U={name:"ToastNotification",computed:{...(0,S.aH)(["toast"]),iconClass(){switch(this.toast.type){case"success":return"fas fa-check-circle";case"error":return"fas fa-exclamation-circle";case"warning":return"fas fa-exclamation-triangle";default:return"fas fa-info-circle"}}}};const B=(0,I.A)(U,[["render",N],["__scopeId","data-v-459a8c06"]]);var O=B,Q={name:"App",components:{MobileNav:X,ToastNotification:O},mounted(){this.checkAndShowToast("registrationSuccess","registrationMessage"),this.checkAndShowToast("loginSuccess","loginMessage")},methods:{checkAndShowToast(e,t){const s=localStorage.getItem(e);if("true"===s){try{this.$toast&&this.$toast.success(localStorage.getItem(t)||"Operation completed successfully!",{position:"top-right",duration:3e3})}catch(a){console.warn("Toast notification failed:",a)}localStorage.removeItem(e),localStorage.removeItem(t)}}}};const W=(0,I.A)(Q,[["render",r]]);var K=W,q=(s(3579),s(1387));const z={class:"bg-[#121212] text-white min-h-screen overflow-x-hidden"},H={class:"pt-[60px] md:pt-0"},J={class:"pl-4 sm:pl-6 md:pl-10 py-6 space-y-12 relative overflow-hidden"},G={class:"mobile-nav"},Y={class:"mobile-nav-container"};function Z(e,t,s,a,o,r){const l=(0,i.g2)("AppHeader"),n=(0,i.g2)("HeroSection"),c=(0,i.g2)("AllCategoriesSection"),u=(0,i.g2)("MovieSection"),h=(0,i.g2)("CategorySection"),m=(0,i.g2)("StatesSection"),p=(0,i.g2)("router-link"),f=(0,i.g2)("ProfileMenu"),g=(0,i.g2)("AppFooter"),v=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",z,[(0,i.bF)(l,{onToggleSearch:r.toggleSearch},null,8,["onToggleSearch"]),(0,i.Lk)("div",H,[(0,i.bF)(n),(0,i.Lk)("main",J,[(0,i.bF)(c,{title:"Browse Categories"}),(0,i.bF)(u,{title:"Recently Added","section-id":"recentlyAdded",movies:o.recentlyAdded},null,8,["movies"]),(0,i.bF)(u,{title:"Trending Web Series","section-id":"trendingWebSeries",movies:o.webSeries},null,8,["movies"]),(0,i.bF)(h,{title:"Live Channels"}),(0,i.bF)(m)])]),(0,i.Lk)("nav",G,[(0,i.Lk)("div",Y,[(0,i.bF)(p,{to:"/",class:"mobile-nav-item","active-class":"active"},{default:(0,i.k6)((()=>t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-home"},null,-1),(0,i.Lk)("span",null,"Home",-1)]))),_:1,__:[3]}),t[5]||(t[5]=(0,i.Fv)('<a href="#" class="mobile-nav-item" data-v-519a5650><i class="fas fa-film" data-v-519a5650></i><span data-v-519a5650>Movies</span></a><a href="#" class="mobile-nav-item" data-v-519a5650><i class="fas fa-tv" data-v-519a5650></i><span data-v-519a5650>Shows</span></a><a href="#" class="mobile-nav-item" data-v-519a5650><i class="fas fa-heart" data-v-519a5650></i><span data-v-519a5650>My List</span></a>',3)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>r.toggleMenu&&r.toggleMenu(...e)),class:(0,d.C4)(["mobile-nav-item",{active:o.isMenuOpen}])},t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-bars"},null,-1),(0,i.Lk)("span",null,"Menu",-1)]),2)])]),(0,i.Lk)("div",{class:(0,d.C4)(["mobile-search-bar",{active:o.isSearchActive}])},[t[7]||(t[7]=(0,i.Lk)("input",{type:"text",placeholder:"Search movies, shows and more..."},null,-1)),(0,i.Lk)("button",{class:"text-white",onClick:t[1]||(t[1]=(...e)=>r.toggleSearch&&r.toggleSearch(...e))},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))],2),(0,i.bF)(f,{"is-open":o.isMenuOpen,onClose:t[2]||(t[2]=e=>o.isMenuOpen=!1)},null,8,["is-open"]),(0,i.bF)(g),(0,i.bF)(v)])}s(1701);var ee=s.p+"img/ott.1aa84a8f.jpg";const te={class:"header-container"},se={class:"main-nav"},ae={class:"nav-list"},ie={class:"auth-container"},oe={class:"w-8 h-8 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center text-white"},re={class:"text-sm font-semibold"};function le(e,t,s,a,o,r){const l=(0,i.g2)("router-link"),n=(0,i.g2)("ProfileMenu"),c=(0,i.g2)("LiveTVPlayer");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("header",{class:(0,d.C4)(["header",{scrolled:o.isScrolled}])},[(0,i.Lk)("div",te,[r.shouldShowBackButton?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"back-btn","aria-label":"Go back",onClick:t[0]||(t[0]=(...e)=>r.goBack&&r.goBack(...e))},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-arrow-left"},null,-1)]))):(0,i.Q3)("",!0),t[12]||(t[12]=(0,i.Lk)("div",{class:"logo-container"},[(0,i.Lk)("img",{src:ee,alt:"Logo",class:"h-8"})],-1)),(0,i.Lk)("nav",se,[(0,i.Lk)("ul",ae,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.navItems,(t=>((0,i.uX)(),(0,i.CE)("li",{class:"nav-item",key:t.name},[(0,i.bF)(l,{to:t.path,class:(0,d.C4)(["nav-link",{active:e.$route.path===t.path||"/regional"===t.path&&e.$route.path.startsWith("/regional")}])},{default:(0,i.k6)((()=>[(0,i.eW)((0,d.v_)(t.name),1)])),_:2},1032,["to","class"])])))),128))])]),(0,i.Lk)("div",ie,[r.isUserSubscribed?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(l,{key:0,to:"/plans",class:"mobile-subscribe-btn"},{default:(0,i.k6)((()=>t[7]||(t[7]=[(0,i.Lk)("span",{class:"crown-icon"},[(0,i.Lk)("i",{class:"fas fa-crown"})],-1),(0,i.Lk)("span",{class:"subscribe-text"},"Subscribe",-1)]))),_:1,__:[7]})),(0,i.Lk)("button",{class:"search-btn",onClick:t[1]||(t[1]=(...e)=>r.toggleSearch&&r.toggleSearch(...e))},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-search"},null,-1)])),o.user?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[2]||(t[2]=(...e)=>r.toggleMenu&&r.toggleMenu(...e)),class:"profile-btn"},[(0,i.Lk)("div",oe,[(0,i.Lk)("span",re,(0,d.v_)(r.userInitials),1)])])):((0,i.uX)(),(0,i.Wv)(l,{key:2,to:"/login",class:"profile-btn"},{default:(0,i.k6)((()=>t[9]||(t[9]=[(0,i.Lk)("div",{class:"w-8 h-8 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center text-white"},[(0,i.Lk)("i",{class:"fas fa-user text-sm"})],-1)]))),_:1,__:[9]})),r.isUserSubscribed?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.Wv)(l,{key:3,to:"/plans",class:"subscribe-btn"},{default:(0,i.k6)((()=>t[10]||(t[10]=[(0,i.eW)("Subscribe Now")]))),_:1,__:[10]})),o.hasLiveStream?((0,i.uX)(),(0,i.CE)("button",{key:4,onClick:t[3]||(t[3]=(...e)=>r.toggleLiveTV&&r.toggleLiveTV(...e)),class:"live-tv"},t[11]||(t[11]=[(0,i.Lk)("i",{class:"fas fa-tv"},null,-1),(0,i.Lk)("span",{class:"live-dot"},null,-1),(0,i.Lk)("span",{class:"live-text"},"LIVE",-1)]))):(0,i.Q3)("",!0)])])],2),(0,i.bF)(n,{"is-open":o.isMenuOpen,onClose:t[4]||(t[4]=e=>o.isMenuOpen=!1)},null,8,["is-open"]),(0,i.bF)(c,{"is-open":o.isLiveTVOpen,"video-url":o.videoUrl,"video-title":o.videoTitle,"is-direct-video":!1,onClose:t[5]||(t[5]=e=>o.isLiveTVOpen=!1)},null,8,["is-open","video-url","video-title"])],64)}s(116);const ne={key:0,class:"fixed inset-0 z-[2000] bg-black flex items-center justify-center player-root"},ce=["src"],de=["src"],ue={key:2,class:"absolute inset-0 z-10"},he={key:3,class:"absolute inset-0 z-20 bg-black/80 flex items-center justify-center"},me={key:4,class:"absolute inset-0 bg-black/50 flex items-center justify-center z-50"},pe={key:5,class:"absolute inset-0 flex items-center justify-center z-40 bg-black/10"},fe={class:"w-20 h-20 flex items-center justify-center bg-black/40 backdrop-blur-md rounded-full"},ge={class:"px-2 flex items-center justify-between"},ve={class:"flex-1 flex flex-col items-center md:items-start mx-4"},be={class:"text-white font-bold text-xl md:text-2xl tracking-wide"},ye={class:"flex items-center gap-2"},ke={class:"relative px-8 pb-4"},we={class:"px-2 py-1 text-center text-xs text-white"},xe={class:"px-8 flex items-center justify-between"},Le={class:"flex items-center gap-6"},Ce={class:"w-12 h-12 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors"},Se={class:"hidden md:flex items-center group/volume"},Ee={class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors"},Pe={class:"w-0 overflow-hidden group-hover/volume:w-24 transition-all duration-200 h-10 flex items-center"},_e={class:"flex items-center gap-3"},Me={class:"relative group/settings"},Ae={key:0,class:"absolute bottom-full right-0 mb-2 bg-black/90 backdrop-blur-md rounded-lg overflow-hidden border border-white/10 w-48"},Te={class:"py-2"},Ve={class:"mt-1"},Ie=["onClick"],De={key:0,class:"fas fa-check text-[#c30059]"},Re={class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors"},$e={class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors"};function Fe(e,t,s,o,r,l){return s.isOpen?((0,i.uX)(),(0,i.CE)("div",ne,[(0,i.Lk)("div",{ref:"playerContainer",class:"relative w-full h-full max-h-screen overflow-hidden player-container",onMousemove:t[19]||(t[19]=(...e)=>l.handleMouseMove&&l.handleMouseMove(...e)),onMouseleave:t[20]||(t[20]=(...e)=>l.handleMouseLeave&&l.handleMouseLeave(...e))},[s.isDirectVideo?((0,i.uX)(),(0,i.CE)("video",{key:0,ref:"videoRef",class:"w-full h-full object-contain",src:s.videoUrl,preload:"auto",autoplay:"",muted:"",onTimeupdate:t[0]||(t[0]=(...e)=>l.updateProgress&&l.updateProgress(...e)),onLoadedmetadata:t[1]||(t[1]=(...e)=>l.onVideoLoaded&&l.onVideoLoaded(...e)),onEnded:t[2]||(t[2]=(...e)=>l.onVideoEnded&&l.onVideoEnded(...e)),onPlay:t[3]||(t[3]=e=>r.isPlaying=!0),onPause:t[4]||(t[4]=e=>r.isPlaying=!1),onVolumechange:t[5]||(t[5]=(...e)=>l.onVolumeChange&&l.onVolumeChange(...e))},null,40,ce)):((0,i.uX)(),(0,i.CE)("iframe",{key:1,ref:"youtubePlayer",src:l.youtubeEmbedUrl,class:"w-full h-full",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,de)),s.isDirectVideo?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",ue)),s.isDirectVideo||r.isPlaying?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",he,[(0,i.Lk)("div",{class:"w-20 h-20 flex items-center justify-center bg-black/60 backdrop-blur-sm rounded-full cursor-pointer",onClick:t[6]||(t[6]=(...e)=>l.togglePlayPause&&l.togglePlayPause(...e))},t[21]||(t[21]=[(0,i.Lk)("i",{class:"fas fa-play text-white text-3xl pl-1"},null,-1)]))])),r.isLoading?((0,i.uX)(),(0,i.CE)("div",me,t[22]||(t[22]=[(0,i.Fv)('<div class="w-20 h-20 relative" data-v-44d3645d><div class="absolute inset-0 rounded-full border-4 border-white/20" data-v-44d3645d></div><div class="absolute inset-0 rounded-full border-4 border-t-[#c30059] border-r-transparent border-b-transparent border-l-transparent animate-spin" data-v-44d3645d></div><div class="absolute inset-0 flex items-center justify-center" data-v-44d3645d><img src="'+ee+'" alt="Logo" class="h-10 w-10 rounded-full object-cover" data-v-44d3645d></div></div>',1)]))):(0,i.Q3)("",!0),r.showBigPlayButton?((0,i.uX)(),(0,i.CE)("div",pe,[(0,i.Lk)("div",fe,[(0,i.Lk)("i",{class:(0,d.C4)([r.isPlaying?"fas fa-pause":"fas fa-play","text-white text-3xl pl-1"])},null,2)])])):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:(0,d.C4)(["absolute top-0 left-0 right-0 pt-4 pb-16 z-30 bg-gradient-to-b from-black/90 via-black/50 to-transparent transition-opacity duration-300",{"opacity-0":!r.showControls&&!r.isControlsLocked,"opacity-100":r.showControls||r.isControlsLocked}])},[(0,i.Lk)("div",ge,[(0,i.Lk)("button",{onClick:t[7]||(t[7]=(0,a.D$)(((...e)=>l.close&&l.close(...e)),["stop"])),class:"flex items-center group"},t[23]||(t[23]=[(0,i.Lk)("div",{class:"w-10 h-10 flex items-center justify-center bg-black/40 backdrop-blur-md rounded-full mr-3 group-hover:bg-[#c30059]/80 transition-all"},[(0,i.Lk)("i",{class:"fas fa-arrow-left text-white/90 text-3xl"})],-1)])),(0,i.Lk)("div",ve,[(0,i.Lk)("h1",be,(0,d.v_)(s.videoTitle),1),t[24]||(t[24]=(0,i.Lk)("div",{class:"flex items-center mt-1"},null,-1))]),(0,i.Lk)("div",ye,[(0,i.Lk)("button",{onClick:t[8]||(t[8]=(0,a.D$)(((...e)=>l.toggleCaptions&&l.toggleCaptions(...e)),["stop"])),class:(0,d.C4)(["w-10 h-10 flex items-center justify-center bg-black/40 backdrop-blur-md rounded-full hover:bg-white/20 transition-all",{"bg-[#c30059]/80":r.hasCaptions}])},t[25]||(t[25]=[(0,i.Lk)("i",{class:"fas fa-closed-captioning text-white/90 text-lg"},null,-1)]),2),r.supportsPiP?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[9]||(t[9]=(0,a.D$)(((...e)=>l.togglePictureInPicture&&l.togglePictureInPicture(...e)),["stop"])),class:"w-10 h-10 flex items-center justify-center bg-black/40 backdrop-blur-md rounded-full hover:bg-white/20 transition-all"},t[26]||(t[26]=[(0,i.Lk)("i",{class:"fas fa-external-link-alt text-white/90 text-lg"},null,-1)]))):(0,i.Q3)("",!0)])])],2),(0,i.Lk)("div",{class:(0,d.C4)(["absolute left-0 right-0 bottom-0 z-30 transition-opacity duration-300 pb-6 pt-20 bg-gradient-to-t from-black/90 via-black/60 to-transparent",{"opacity-0":!r.showControls&&!r.isControlsLocked,"opacity-100":r.showControls||r.isControlsLocked}])},[(0,i.Lk)("div",ke,[(0,i.Lk)("div",{ref:"progressContainer",class:"h-1.5 bg-white/30 rounded-full cursor-pointer group/progress overflow-hidden hover:h-2.5 transition-all duration-150",onClick:t[10]||(t[10]=(...e)=>l.seekToPosition&&l.seekToPosition(...e)),onMousemove:t[11]||(t[11]=(...e)=>l.showProgressPreview&&l.showProgressPreview(...e))},[(0,i.Lk)("div",{class:"h-full bg-[#c30059] rounded-full relative",style:(0,d.Tr)({width:`${r.progressPercentage}%`})},t[27]||(t[27]=[(0,i.Lk)("div",{class:"absolute right-0 top-1/2 -translate-y-1/2 w-4 h-4 bg-[#c30059] border-2 border-white rounded-full transform scale-0 opacity-0 group-hover/progress:scale-100 group-hover/progress:opacity-100 transition-all duration-150"},null,-1)]),4)],544),r.previewPosition>0?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"absolute bottom-8 transform -translate-x-1/2 bg-black/90 rounded overflow-hidden shadow-lg",style:(0,d.Tr)({left:`${r.previewPosition}%`})},[t[28]||(t[28]=(0,i.Lk)("div",{class:"w-32 h-20 bg-[#1a1a1a] flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-tv text-[#c30059] text-2xl"})],-1)),(0,i.Lk)("div",we,(0,d.v_)(l.formatTime(r.previewTime)),1)],4)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",xe,[(0,i.Lk)("div",Le,[(0,i.Lk)("button",{onClick:t[12]||(t[12]=(0,a.D$)(((...e)=>l.togglePlayPause&&l.togglePlayPause(...e)),["stop"])),class:"group cursor-pointer"},[(0,i.Lk)("div",Ce,[(0,i.Lk)("i",{class:(0,d.C4)([r.isPlaying?"fas fa-pause":"fas fa-play","text-white text-2xl group-hover:text-[#c30059] transition-colors"])},null,2)])]),(0,i.Lk)("div",Se,[(0,i.Lk)("button",{onClick:t[13]||(t[13]=(0,a.D$)(((...e)=>l.toggleMute&&l.toggleMute(...e)),["stop"])),class:"group"},[(0,i.Lk)("div",Ee,[(0,i.Lk)("i",{class:(0,d.C4)([l.volumeIcon,"text-white text-xl group-hover:text-[#c30059] transition-colors"])},null,2)])]),(0,i.Lk)("div",Pe,[(0,i.bo)((0,i.Lk)("input",{type:"range",min:"0",max:"100","onUpdate:modelValue":t[14]||(t[14]=e=>r.volumeLevel=e),onInput:t[15]||(t[15]=(...e)=>l.updateVolume&&l.updateVolume(...e)),class:"ml-2 w-full h-1 bg-white/30 rounded-full appearance-none focus:outline-none volume-slider"},null,544),[[a.Jo,r.volumeLevel]])])]),t[29]||(t[29]=(0,i.Lk)("div",{class:"md:hidden flex items-center"},[(0,i.Lk)("span",{class:"h-2 w-2 bg-red-600 rounded-full animate-pulse mr-1.5"}),(0,i.Lk)("span",{class:"text-white/90 text-sm"},"LIVE")],-1))]),t[32]||(t[32]=(0,i.Lk)("div",{class:"hidden md:block absolute left-1/2 -translate-x-1/2 text-white flex items-center"},[(0,i.Lk)("div",{class:"flex items-center"},[(0,i.Lk)("span",{class:"h-2 w-2 bg-red-600 rounded-full animate-pulse mr-1.5"}),(0,i.Lk)("span",{class:"text-white/90 font-medium"},"LIVE")])],-1)),(0,i.Lk)("div",_e,[(0,i.Lk)("div",Me,[(0,i.Lk)("button",{onClick:t[16]||(t[16]=(0,a.D$)((e=>r.isQualityMenuOpen=!r.isQualityMenuOpen),["stop"])),class:"group"},t[30]||(t[30]=[(0,i.Lk)("div",{class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 transition-colors"},[(0,i.Lk)("i",{class:"fas fa-cog text-white text-lg group-hover:text-[#c30059] transition-colors"})],-1)])),r.isQualityMenuOpen?((0,i.uX)(),(0,i.CE)("div",Ae,[(0,i.Lk)("div",Te,[t[31]||(t[31]=(0,i.Lk)("div",{class:"px-4 py-1 text-white/70 text-xs font-medium uppercase tracking-wider"},"Quality",-1)),(0,i.Lk)("div",Ve,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(["Auto","1080p","720p","480p","360p"],(e=>(0,i.Lk)("button",{key:e,onClick:(0,a.D$)((t=>l.setQuality(e)),["stop"]),class:(0,d.C4)(["w-full px-4 py-2 text-left text-sm text-white flex items-center justify-between hover:bg-white/10",{"text-[#c30059]":r.currentQuality===e}])},[(0,i.Lk)("span",null,(0,d.v_)(e),1),r.currentQuality===e?((0,i.uX)(),(0,i.CE)("i",De)):(0,i.Q3)("",!0)],10,Ie))),64))])])])):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{onClick:t[17]||(t[17]=(0,a.D$)(((...e)=>l.toggleControlsLock&&l.toggleControlsLock(...e)),["stop"])),class:"group"},[(0,i.Lk)("div",Re,[(0,i.Lk)("i",{class:(0,d.C4)([r.isControlsLocked?"fas fa-lock":"fas fa-lock-open","text-white text-lg group-hover:text-[#c30059] transition-colors",{"text-[#c30059]":r.isControlsLocked}])},null,2)])]),(0,i.Lk)("button",{onClick:t[18]||(t[18]=(0,a.D$)(((...e)=>l.enterFullscreen&&l.enterFullscreen(...e)),["stop"])),class:"group"},[(0,i.Lk)("div",$e,[(0,i.Lk)("i",{class:(0,d.C4)([r.isFullScreen?"fas fa-compress":"fas fa-expand","text-white text-lg group-hover:text-[#c30059] transition-colors"])},null,2)])])])])],2)],544)])):(0,i.Q3)("",!0)}var Xe=s(1510),je={name:"LiveTVPlayer",props:{isOpen:{type:Boolean,required:!0},videoUrl:{type:String,required:!0},videoTitle:{type:String,required:!0},isDirectVideo:{type:Boolean,default:!1}},data(){return{isPlaying:!0,isFullScreen:!1,orientationLock:null,showControls:!0,controlsTimeout:null,progressPercentage:0,duration:0,currentTime:0,volumeLevel:100,isMuted:!1,previousVolume:100,isQualityMenuOpen:!1,currentQuality:"Auto",supportsPiP:!1,isControlsLocked:!1,showBigPlayButton:!1,bigPlayButtonTimeout:null,isLoading:!0,previewPosition:0,previewTime:0,hasCaptions:!1}},computed:{youtubeEmbedUrl(){const e=this.extractVideoId(this.videoUrl);return`https://www.youtube.com/embed/${e}?autoplay=1&mute=0&rel=0&controls=0&disablekb=1&fs=0&modestbranding=1&showinfo=0&iv_load_policy=3&playsinline=1&enablejsapi=1&origin=${window.location.origin}&widget_referrer=${window.location.origin}&color=white&loop=1&wmode=transparent&vq=hd1080&cc_load_policy=3`},volumeIcon(){return this.isMuted||0===this.volumeLevel?"fas fa-volume-mute":this.volumeLevel<50?"fas fa-volume-down":"fas fa-volume-up"},formattedCurrentTime(){return this.formatTime(this.currentTime)},formattedDuration(){return this.formatTime(this.duration)}},watch:{isOpen(e){e?(document.addEventListener("keydown",this.handleKeyboardShortcuts),this.checkPiPSupport(),this.isLoading=!0,setTimeout((()=>{this.isLoading=!1,this.ensureVideoIsPlaying()}),2e3)):document.removeEventListener("keydown",this.handleKeyboardShortcuts)}},mounted(){const{lockOrientation:e,unlockOrientation:t}=(0,Xe.KpY)();this.orientationLock={lockOrientation:e,unlockOrientation:t};try{const e=localStorage.getItem("player-volume");null!==e&&(this.volumeLevel=parseInt(e,10))}catch(s){}this.isOpen&&(document.addEventListener("keydown",this.handleKeyboardShortcuts),this.checkPiPSupport(),setTimeout((()=>{this.isLoading=!1,this.ensureVideoIsPlaying()}),2e3)),this.resetControlsTimeout()},methods:{extractVideoId(e){const t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,s=e.match(t);return s&&11===s[7].length?s[7]:""},async close(){if(document.fullscreenElement)try{await this.toggleFullscreen(),this.$emit("close")}catch(e){console.error("Error during cleanup:",e),this.$emit("close")}else this.$emit("close")},togglePlayPause(){if(this.isDirectVideo){const e=this.$refs.videoRef;e&&(e.paused?e.play():e.pause(),this.isPlaying=!e.paused)}else{const e=this.$refs.youtubePlayer;if(e){const t=this.isPlaying?"pauseVideo":"playVideo";e.contentWindow.postMessage(JSON.stringify({event:"command",func:t}),"*"),this.isPlaying=!this.isPlaying}}this.showBigPlayButton=!0,clearTimeout(this.bigPlayButtonTimeout),this.bigPlayButtonTimeout=setTimeout((()=>{this.showBigPlayButton=!1}),800)},toggleCaptions(){this.hasCaptions=!this.hasCaptions},handleMouseMove(){this.isControlsLocked||(this.showControls=!0,this.resetControlsTimeout())},handleMouseLeave(){this.isControlsLocked||(clearTimeout(this.controlsTimeout),this.controlsTimeout=setTimeout((()=>{this.showControls=!1,this.previewPosition=0}),1e3))},resetControlsTimeout(){this.isControlsLocked||(clearTimeout(this.controlsTimeout),this.controlsTimeout=setTimeout((()=>{this.showControls=!1,this.previewPosition=0}),3e3))},toggleControlsLock(){this.isControlsLocked=!this.isControlsLocked},updateProgress(){if(!this.isDirectVideo)return;const e=this.$refs.videoRef;e&&(this.currentTime=e.currentTime,this.duration=e.duration,this.progressPercentage=e.currentTime/e.duration*100||0)},showProgressPreview(e){if(!this.isDirectVideo)return;const t=this.$refs.progressContainer;if(!t)return;const s=t.getBoundingClientRect(),a=(e.clientX-s.left)/s.width*100;this.previewPosition=a,this.duration&&(this.previewTime=a/100*this.duration)},seekToPosition(e){if(!this.isDirectVideo)return;const t=this.$refs.progressContainer;if(!t)return;const s=t.getBoundingClientRect(),a=(e.clientX-s.left)/s.width,i=this.$refs.videoRef;i&&!isNaN(i.duration)&&(i.currentTime=a*i.duration),this.previewPosition=0},formatTime(e){if(isNaN(e)||!isFinite(e))return"0:00";const t=Math.floor(e/60),s=Math.floor(t/60),a=t%60,i=Math.floor(e%60);return s>0?`${s}:${a<10?"0":""}${a}:${i<10?"0":""}${i}`:`${t}:${i<10?"0":""}${i}`},toggleMute(){if(this.isDirectVideo){const e=this.$refs.videoRef;e&&(this.isMuted?(e.volume=this.previousVolume/100,this.volumeLevel=this.previousVolume):(this.previousVolume=this.volumeLevel,e.volume=0,this.volumeLevel=0),this.isMuted=!this.isMuted)}else{const e=this.$refs.youtubePlayer;if(e){const t=this.isMuted?"unMute":"mute";e.contentWindow.postMessage(JSON.stringify({event:"command",func:t}),"*"),this.isMuted=!this.isMuted}}},updateVolume(){if(this.isDirectVideo){const e=this.$refs.videoRef;e&&(e.volume=this.volumeLevel/100,e.muted=0===this.volumeLevel,this.isMuted=0===this.volumeLevel)}else{const t=this.$refs.youtubePlayer;if(t){const s=Math.max(0,Math.min(100,this.volumeLevel));try{this.isMuted&&s>0&&(t.contentWindow.postMessage(JSON.stringify({event:"command",func:"unMute"}),"*"),this.isMuted=!1),t.contentWindow.postMessage(JSON.stringify({event:"command",func:"setVolume",args:[s]}),"*"),0!==s||this.isMuted||(t.contentWindow.postMessage(JSON.stringify({event:"command",func:"mute"}),"*"),this.isMuted=!0)}catch(e){console.error("Error updating YouTube volume:",e)}}}try{localStorage.setItem("player-volume",this.volumeLevel.toString())}catch(t){}},onVolumeChange(){if(!this.isDirectVideo)return;const e=this.$refs.videoRef;e&&(this.volumeLevel=100*e.volume,this.isMuted=e.muted)},onVideoLoaded(){if(!this.isDirectVideo)return;const e=this.$refs.videoRef;e&&(this.duration=e.duration,this.isLoading=!1)},onVideoEnded(){this.isPlaying=!1},async enterFullscreen(){const e=this.$refs.playerContainer;if(e)if(document.fullscreenElement){document.exitFullscreen(),this.isFullScreen=!1;try{this.orientationLock.unlockOrientation()}catch(t){console.warn("Failed to unlock orientation:",t)}}else try{await e.requestFullscreen(),this.isFullScreen=!0;try{await this.orientationLock.lockOrientation("landscape")}catch(t){console.warn("Orientation lock failed:",t)}}catch(t){console.error(`Error attempting to enable full-screen mode: ${t.message}`)}},checkPiPSupport(){this.isDirectVideo?this.supportsPiP=document.pictureInPictureEnabled||this.$refs.videoRef&&"requestPictureInPicture"in HTMLVideoElement.prototype:this.supportsPiP=!1},async togglePictureInPicture(){if(this.isDirectVideo&&this.supportsPiP)try{if(document.pictureInPictureElement)await document.exitPictureInPicture();else{const e=this.$refs.videoRef;e&&await e.requestPictureInPicture()}}catch(e){console.error("PiP failed:",e)}},setQuality(e){if(this.currentQuality=e,this.isQualityMenuOpen=!1,this.isDirectVideo)console.log(`Setting quality to ${e}`);else{const t=this.$refs.youtubePlayer;if(t){let s;switch(e){case"1080p":s="hd1080";break;case"720p":s="hd720";break;case"480p":s="large";break;case"360p":s="medium";break;default:s="default"}t.contentWindow.postMessage(JSON.stringify({event:"command",func:"setPlaybackQuality",args:[s]}),"*")}}},handleKeyboardShortcuts(e){if(this.isOpen)switch(e.key.toLowerCase()){case" ":case"k":e.preventDefault(),this.togglePlayPause();break;case"f":e.preventDefault(),this.enterFullscreen();break;case"m":e.preventDefault(),this.toggleMute();break;case"c":e.preventDefault(),this.toggleCaptions();break;case"arrowright":if(this.isDirectVideo){e.preventDefault();const t=this.$refs.videoRef;t&&(t.currentTime+=10)}break;case"arrowleft":if(this.isDirectVideo){e.preventDefault();const t=this.$refs.videoRef;t&&(t.currentTime-=10)}break;case"arrowup":e.preventDefault(),this.volumeLevel=Math.min(100,this.volumeLevel+5),this.updateVolume();break;case"arrowdown":e.preventDefault(),this.volumeLevel=Math.max(0,this.volumeLevel-5),this.updateVolume();break;case"escape":document.fullscreenElement?(e.preventDefault(),document.exitFullscreen()):this.isQualityMenuOpen&&(e.preventDefault(),this.isQualityMenuOpen=!1);break}},ensureVideoIsPlaying(){if(this.isDirectVideo){const e=this.$refs.videoRef;if(e){e.muted=!0;const t=e.play();void 0!==t&&t.then((()=>{this.isPlaying=!0,setTimeout((()=>{this.volumeLevel>0&&!this.isMuted&&(e.muted=!1)}),1e3)})).catch((e=>{console.error("Autoplay failed:",e)}))}}else{const e=this.$refs.youtubePlayer;e&&(e.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"),this.isPlaying=!0)}},async toggleFullscreen(){const e=this.$refs.playerContainer;if(e)try{if(document.fullscreenElement)return await document.exitFullscreen(),new Promise((e=>{const t=()=>{document.removeEventListener("fullscreenchange",t),setTimeout(e,100)};document.addEventListener("fullscreenchange",t)}));await e.requestFullscreen()}catch(t){console.error("Fullscreen error:",t)}}},beforeUnmount(){document.removeEventListener("keydown",this.handleKeyboardShortcuts),clearTimeout(this.controlsTimeout),clearTimeout(this.bigPlayButtonTimeout),document.fullscreenElement&&document.exitFullscreen().catch((e=>{console.warn("Error exiting fullscreen:",e)})),document.pictureInPictureElement&&document.exitPictureInPicture().catch((e=>{console.warn("Error exiting PiP:",e)}));try{this.orientationLock.unlockOrientation()}catch(e){console.warn("Failed to unlock orientation:",e)}}};const Ne=(0,I.A)(je,[["render",Fe],["__scopeId","data-v-44d3645d"]]);var Ue=Ne;const Be="http://192.168.0.104:8000";var Oe={name:"AppHeader",components:{ProfileMenu:R,LiveTVPlayer:Ue},props:{hideBackButton:{type:Boolean,default:!1}},data(){return{isScrolled:!1,isMenuOpen:!1,isLiveTVOpen:!1,hasLiveStream:!1,liveStreamUrl:"",liveStreamTitle:"",navItems:[{name:"Home",path:"/"},{name:"Movies",path:"#"},{name:"TV Shows",path:"#"},{name:"Web Series",path:"#"},{name:"Regional Content",path:"/regional"},{name:"Advanced Player",path:"/player"},{name:"Kids",path:"#"},{name:"Sports",path:"#"},{name:"News",path:"#"}],videoUrl:"",videoTitle:"",showProfileMenu:!1,showLanguageDropdown:!1,currentLanguage:"Telugu",languages:["Telugu","Hindi","Tamil","Kannada","Malayalam","English"],pollingInterval:null,user:null,isLoadingUser:!0}},computed:{showBackButton(){return"MovieDetails"===this.$route.name},shouldShowBackButton(){return this.showBackButton&&!this.hideBackButton},userInitials(){if(!this.user)return"";const e=this.user.first_name||"",t=this.user.last_name||"";return(e.charAt(0)+t.charAt(0)).toUpperCase()||this.user.phone.slice(0,2)},isUserSubscribed(){return!!this.isLoadingUser||!!this.user&&(this.user.is_subscribed&&new Date(this.user.subscription_end_date)>new Date)}},mounted(){this.checkLiveStream(),this.startPolling(),window.addEventListener("scroll",this.handleScroll),document.addEventListener("click",(e=>{const t=document.querySelector(".profile-btn"),s=document.querySelector(".language-selector button");t&&!t.contains(e.target)&&this.showProfileMenu&&(this.showProfileMenu=!1),s&&!s.contains(e.target)&&this.showLanguageDropdown&&(this.showLanguageDropdown=!1)})),this.initializeUser()},beforeUnmount(){this.stopPolling(),window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){this.isScrolled=window.scrollY>0},toggleSearch(){this.$router.push("/search")},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},toggleLiveTV(){this.hasLiveStream&&this.liveStreamUrl&&(this.videoUrl=this.liveStreamUrl,this.videoTitle=this.liveStreamTitle,this.isLiveTVOpen=!this.isLiveTVOpen)},toggleProfileMenu(){this.showProfileMenu=!this.showProfileMenu,this.showProfileMenu&&(this.showLanguageDropdown=!1)},toggleLanguageDropdown(){this.showLanguageDropdown=!this.showLanguageDropdown,this.showLanguageDropdown&&(this.showProfileMenu=!1)},selectLanguage(e){this.currentLanguage=e,this.showLanguageDropdown=!1},goBack(){this.$router.go(-1)},startPolling(){this.pollingInterval=setInterval((()=>{this.checkLiveStream()}),1e4)},stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)},async checkLiveStream(){try{console.log("Checking for live streams...");const t=await C.A.get(`${Be}/api/frontend/categories/`);console.log("Categories Response:",t.data);let s=!1;if("success"===t.data.status&&t.data.data){for(const a of t.data.data){console.log("Checking category:",a.name,"ID:",a.id);try{const e=await C.A.get(`${Be}/api/live-streams/by_category/?category_id=${a.id}`);if(console.log("Live streams for category",a.id,":",e.data),e.data&&Array.isArray(e.data)){const t=e.data.find((e=>(console.log("Checking stream:",e),console.log("is_important:",e.is_important),console.log("is_active:",e.is_active),!0===e.is_important&&!0===e.is_active)));if(t){console.log("Found important live stream:",t),this.liveStreamUrl===t.live_url&&this.liveStreamTitle===t.title||(console.log("Live stream details changed, updating..."),this.hasLiveStream=!0,this.liveStreamUrl=t.live_url,this.liveStreamTitle=t.title,this.videoUrl=t.live_url,this.videoTitle=t.title),s=!0;break}}}catch(e){console.error("Error fetching streams for category",a.id,":",e);continue}}!s&&this.hasLiveStream&&(console.log("Important live stream no longer available"),this.clearLiveStreamData())}}catch(t){console.error("Error checking live stream:",t),t.response&&console.error("Error response:",t.response.data)}},clearLiveStreamData(){this.hasLiveStream=!1,this.liveStreamUrl="",this.liveStreamTitle="",this.videoUrl="",this.videoTitle=""},async initializeUser(){this.isLoadingUser=!0;const e=localStorage.getItem("phone");if(!e)return this.user=null,void(this.isLoadingUser=!1);try{const t=await C.A.get(`${Be}/users/profile/?phone=${e}`);if(!t.data||"success"!==t.data.status)throw new Error("Failed to load user data");this.user=t.data.user,localStorage.setItem("user",JSON.stringify(t.data.user))}catch(t){console.error("Error loading user data:",t);const e=localStorage.getItem("user");if(e)try{this.user=JSON.parse(e)}catch(s){console.error("Error parsing user data:",s),this.user=null}}finally{this.isLoadingUser=!1}}}};const Qe=(0,I.A)(Oe,[["render",le],["__scopeId","data-v-6ac51dc2"]]);var We=Qe;const Ke={id:"heroContainer"},qe={class:"hero-content"},ze={class:"hero-content-wrapper"},He={class:"hero-badges"},Je={key:0,class:"hero-badge premium"},Ge={class:"hero-title"},Ye={class:"hero-meta"},Ze={class:"hero-description"},et={class:"hero-actions"},tt={class:"hero-thumbnails"},st=["onClick"],at=["src","alt"],it={class:"hero-media-container"},ot=["onClick"],rt=["src","alt"],lt=["onClick"],nt=["src","muted"],ct={class:"carousel-dots"},dt=["data-index","onClick"],ut=["aria-label"];function ht(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("section",Ke,[(0,i.Lk)("div",qe,[(0,i.Lk)("div",ze,[(0,i.Lk)("div",He,["paid"===l.currentVideo?.video_type?((0,i.uX)(),(0,i.CE)("span",Je,"Premium")):(0,i.Q3)("",!0)]),(0,i.Lk)("h1",Ge,(0,d.v_)(l.formatTitle(l.currentVideo?.title)),1),(0,i.Lk)("div",Ye,[(0,i.Lk)("span",null,(0,d.v_)(l.getYear(l.currentVideo?.release_date)),1),t[7]||(t[7]=(0,i.Lk)("span",{class:"meta-dot"},null,-1)),(0,i.Lk)("span",null,(0,d.v_)(l.formatDuration(l.currentVideo?.duration)),1),t[8]||(t[8]=(0,i.Lk)("span",{class:"meta-dot"},null,-1)),(0,i.Lk)("span",null,(0,d.v_)(l.currentVideo?.category_name),1)]),(0,i.Lk)("p",Ze,(0,d.v_)(l.formatDescription(l.currentVideo?.description)),1),(0,i.Lk)("div",et,[(0,i.Lk)("button",{class:"hero-button primary",onClick:t[0]||(t[0]=e=>l.navigateToMovie(l.currentVideo?.id))},t[9]||(t[9]=[(0,i.Lk)("i",{class:"fas fa-play"},null,-1),(0,i.eW)(" Watch Now ")])),t[10]||(t[10]=(0,i.Lk)("button",{class:"hero-button secondary"},[(0,i.Lk)("i",{class:"fas fa-plus"}),(0,i.eW)(" Add to Watchlist ")],-1))]),(0,i.Lk)("div",tt,[(0,i.Lk)("button",{class:"thumbnail-nav","aria-label":"Previous",onClick:t[1]||(t[1]=(...e)=>l.prevSlide&&l.prevSlide(...e))},t[11]||(t[11]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)])),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.slides,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:(0,d.C4)(["hero-thumbnail",{active:r.currentSlide===t}]),onClick:e=>l.showSlide(t)},[(0,i.Lk)("img",{src:e.thumbnail_url,alt:e.title},null,8,at)],10,st)))),128)),(0,i.Lk)("button",{class:"thumbnail-nav","aria-label":"Next",onClick:t[2]||(t[2]=(...e)=>l.nextSlide&&l.nextSlide(...e))},t[12]||(t[12]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]))])])]),(0,i.Lk)("div",it,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.slides,((e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:(0,d.C4)(["carousel-slide",{active:r.currentSlide===s}])},[(0,i.Lk)("div",{class:"mobile-video-click-area",onClick:t=>l.handleMobileVideoClick(e)},[(0,i.bo)((0,i.Lk)("img",{src:e.thumbnail_url,alt:e.title,class:(0,d.C4)(["hero-media",{active:r.currentSlide===s}])},null,10,rt),[[a.aG,!r.isVideoPlaying||r.currentSlide!==s]]),(0,i.Lk)("div",{class:"video-wrapper",onClick:t=>l.handleMobileVideoClick(e)},[(0,i.bo)((0,i.Lk)("video",{class:"hero-media",src:e.promo_hls_url||e.video_url,muted:r.isMuted,playsinline:"",onEnded:t[3]||(t[3]=(...e)=>l.handleVideoEnd&&l.handleVideoEnd(...e)),onError:t[4]||(t[4]=(...e)=>l.handleVideoError&&l.handleVideoError(...e)),onPlaying:t[5]||(t[5]=(...e)=>l.handleVideoPlaying&&l.handleVideoPlaying(...e)),ref_for:!0,ref:"videos"},null,40,nt),[[a.aG,r.isVideoPlaying&&r.currentSlide===s]])],8,lt)],8,ot)],2)))),128)),(0,i.Lk)("div",ct,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.slides,((e,t)=>((0,i.uX)(),(0,i.CE)("span",{key:t,class:(0,d.C4)(["carousel-dot",{active:r.currentSlide===t}]),"data-index":t,onClick:e=>l.showSlide(t)},null,10,dt)))),128))]),t[13]||(t[13]=(0,i.Lk)("div",{id:"heroGradient"},null,-1))]),(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.toggleMute&&l.toggleMute(...e)),class:"mute-button","aria-label":r.isMuted?"Unmute":"Mute"},[(0,i.Lk)("i",{class:(0,d.C4)(["fas",r.isMuted?"fa-volume-mute":"fa-volume-up"])},null,2)],8,ut)])}var mt=s(4004),pt={name:"HeroSection",setup(){const e=(0,q.rd)();return{router:e}},data(){return{currentSlide:0,isMuted:!0,isVideoPlaying:!1,videoTimeout:null,touchStartX:null,touchEndX:null,touchStartY:0,touchEndY:0,touchStartTime:0,isDragging:!1,dragOffset:0,minDragDistance:20,activeVideo:null,isManualNavigation:!1,slides:[],loading:!1,error:null,hls:null}},computed:{currentVideo(){return this.slides[this.currentSlide]||null}},async created(){await this.fetchHeroVideos()},mounted(){this.fetchHeroVideos();const e=document.getElementById("heroContainer");e&&(e.addEventListener("touchstart",this.handleTouchStart),e.addEventListener("touchmove",this.handleTouchMove),e.addEventListener("touchend",this.handleTouchEnd))},beforeUnmount(){this.cleanup()},methods:{async fetchHeroVideos(){try{this.loading=!0;const e=await C.A.get("http://192.168.0.104:8000/api/videos/hero/");e.data&&"success"===e.data.status&&(this.slides=e.data.data,this.$nextTick((()=>{setTimeout((()=>{if(this.slides.length>0){const e=this.$refs.videos[0];e&&(console.log("Auto-playing first video"),this.isMuted=!0,this.startVideoPlayback(e))}}),1e3)})))}catch(e){console.error("Error fetching hero videos:",e),this.error="Failed to load hero videos"}finally{this.loading=!1}},getYear(e){return e?new Date(e).getFullYear():""},formatDuration(e){if(!e)return"";const t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?`${t}h ${s}m`:`${s}m`},formatTitle(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""},formatDescription(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""},setupEventListeners(){const e=document.getElementById("heroContainer");e&&(e.addEventListener("mouseenter",this.pauseAutoplay),e.addEventListener("mouseleave",this.resumeAutoplay))},setupTouchEvents(){const e=document.getElementById("heroContainer");e&&(e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),e.addEventListener("touchmove",this.handleTouchMove,{passive:!0}),e.addEventListener("touchend",this.handleTouchEnd,{passive:!0}))},handleTouchStart(e){this.touchStartX=e.touches[0].clientX,this.touchStartY=e.touches[0].clientY,this.touchStartTime=Date.now(),this.isDragging=!1,this.dragOffset=0,this.videoTimeout&&clearTimeout(this.videoTimeout)},handleTouchMove(e){this.touchEndX=e.touches[0].clientX,this.touchEndY=e.touches[0].clientY;const t=this.touchEndX-this.touchStartX,s=this.touchEndY-this.touchStartY;if(!this.isDragging&&Math.abs(t)>this.minDragDistance&&(this.isDragging=!0),this.isDragging&&Math.abs(t)>Math.abs(s)){e.preventDefault();const s=document.querySelector(".carousel-slide.active"),a=document.querySelectorAll(".carousel-slide")[(this.currentSlide+1)%this.slides.length],i=document.querySelectorAll(".carousel-slide")[(this.currentSlide-1+this.slides.length)%this.slides.length],o=t/window.innerWidth,r=.1*Math.sin(o*Math.PI);s.style.transform=`translateX(${t+100*r}px) scale(${1.05-.1*Math.abs(o)})`,s.style.transition="none",t>0?(i.style.transform=`translateX(${100*o-100}%) scale(${.95+.1*o})`,i.style.opacity=Math.abs(o),i.style.transition="none",i.style.zIndex="1"):(a.style.transform=`translateX(${100+100*o}%) scale(${.95+.1*Math.abs(o)})`,a.style.opacity=Math.abs(o),a.style.transition="none",a.style.zIndex="1"),this.dragOffset=t}},handleTouchEnd(){if(!this.isDragging)return;this.isDragging=!1;const e=.3*window.innerWidth,t=this.touchEndX-this.touchStartX,s=Date.now()-this.touchStartTime,a=document.querySelector(".carousel-slide.active"),i=document.querySelectorAll(".carousel-slide")[(this.currentSlide+1)%this.slides.length],o=document.querySelectorAll(".carousel-slide")[(this.currentSlide-1+this.slides.length)%this.slides.length];a.style.transition="all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",i.style.transition="all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",o.style.transition="all 0.8s cubic-bezier(0.4, 0, 0.2, 1)",Math.abs(t)>e||Math.abs(t)>50&&s<300?(this.isManualNavigation=!0,t>0?this.prevSlide():this.nextSlide()):(a.style.transform="translateX(0) scale(1.05)",i.style.transform="translateX(100%) scale(0.95)",o.style.transform="translateX(-100%) scale(0.95)",i.style.opacity="0",o.style.opacity="0")},cleanup(){this.stopAllVideos(),this.videoTimeout&&clearTimeout(this.videoTimeout),this.hls&&(this.hls.destroy(),this.hls=null);const e=document.getElementById("heroContainer");e&&(e.removeEventListener("touchstart",this.handleTouchStart),e.removeEventListener("touchmove",this.handleTouchMove),e.removeEventListener("touchend",this.handleTouchEnd))},showSlide(e){if(e===this.currentSlide)return;const t=document.querySelector(".carousel-slide.active"),s=document.querySelectorAll(".carousel-slide")[e];if(t&&s){this.isDragging=!1,this.dragOffset=0;const a=e>this.currentSlide?"next":"prev";"next"===a?(t.classList.add("prev"),s.style.transform="translateX(100%) scale(0.95)"):(t.classList.add("prev"),s.style.transform="translateX(-100%) scale(0.95)"),requestAnimationFrame((()=>{t.style.opacity="0",t.style.transform="next"===a?"translateX(-100%) scale(0.95)":"translateX(100%) scale(0.95)",s.style.opacity="1",s.style.transform="translateX(0) scale(1.05)"})),setTimeout((()=>{this.stopAllVideos(),this.currentSlide=e,t.classList.remove("active","prev"),s.classList.add("active");const a=this.$refs.videos[e];a&&a.load(),setTimeout((()=>{this.playVideo()}),500)}),800)}},handleAudioToggle(e){if(e.preventDefault(),e.stopPropagation(),this.isVideoPlaying&&this.activeVideo)try{this.isMuted=!this.isMuted,this.activeVideo.muted=this.isMuted,this.activeVideo.paused&&this.playVideo(),console.log("Audio state changed:",this.isMuted?"muted":"unmuted")}catch(t){console.error("Audio toggle error:",t),this.isMuted=!0,this.activeVideo&&(this.activeVideo.muted=!0)}else console.log("No active video to toggle audio")},toggleMute(){this.isMuted=!this.isMuted;const e=this.$refs.videos;e&&(Array.isArray(e)?e.forEach((e=>{e&&(e.muted=this.isMuted)})):e&&(e.muted=this.isMuted)),this.activeVideo&&(this.activeVideo.muted=this.isMuted),localStorage.setItem("videoMuted",this.isMuted.toString())},startVideoPlayback(e){if(e)try{"undefined"!==typeof e.currentTime&&(e.currentTime=0);const t=localStorage.getItem("videoMuted");null!==t&&(this.isMuted="true"===t),e.muted=this.isMuted,this.activeVideo=e;const s=this.slides[this.currentSlide],a=s.promo_hls_url||s.video_url;if(console.log("Playing video source:",a),a&&a.includes(".m3u8"))console.log("Playing HLS stream"),mt.Ay.isSupported()?(this.hls&&this.hls.destroy(),this.hls=new mt.Ay({debug:!0,enableWorker:!0,lowLatencyMode:!0,backBufferLength:90}),this.hls.on(mt.Ay.Events.MEDIA_ATTACHED,(()=>{console.log("HLS Media attached")})),this.hls.on(mt.Ay.Events.MANIFEST_PARSED,(()=>{console.log("HLS Manifest parsed"),e.play().catch((t=>{console.error("Auto-play prevented:",t),this.isMuted||(this.isMuted=!0,e.muted=!0,e.play().catch((e=>{console.error("Fallback play failed:",e),this.handleVideoError(e)})))}))})),this.hls.on(mt.Ay.Events.ERROR,((e,t)=>{if(console.error("HLS error:",t),t.fatal)switch(t.type){case mt.Ay.ErrorTypes.NETWORK_ERROR:console.log("Network error, trying to recover..."),this.hls.startLoad();break;case mt.Ay.ErrorTypes.MEDIA_ERROR:console.log("Media error, trying to recover..."),this.hls.recoverMediaError();break;default:console.log("Fatal error, cannot recover"),this.hls.destroy(),this.handleVideoError(new Error("Fatal HLS error"));break}})),this.hls.loadSource(a),this.hls.attachMedia(e)):e.canPlayType("application/vnd.apple.mpegurl")?(console.log("Using native HLS support"),e.src=a,e.load(),e.play().catch((t=>{console.error("Auto-play prevented:",t),this.isMuted||(this.isMuted=!0,e.muted=!0,e.play().catch((e=>{console.error("Fallback play failed:",e),this.handleVideoError(e)})))}))):(console.error("HLS not supported"),this.handleVideoError(new Error("HLS not supported")));else{e.src=a;const t=e.play();void 0!==t&&t.then((()=>{this.isVideoPlaying=!0,console.log("Video started playing successfully")})).catch((t=>{console.error("Video play failed:",t),this.isMuted?this.handleVideoError(t):(console.log("Retrying with muted audio..."),this.isMuted=!0,e.muted=!0,e.play().catch((e=>{console.error("Fallback play failed:",e),this.handleVideoError(e)})))}))}}catch(t){console.error("Video playback error:",t),this.handleVideoError(t)}else console.log("No video element provided")},playVideo(){if(!this.$refs.videos)return console.log("Video refs not found, retrying..."),void setTimeout((()=>this.playVideo()),500);const e=this.$refs.videos[this.currentSlide];if(!e)return console.log("Current video not found, retrying..."),void setTimeout((()=>this.playVideo()),500);this.stopAllVideos();try{const t=e.src;e.src=t,e.readyState>=2?this.startVideoPlayback(e):(console.log("Video not ready, waiting for loadeddata event..."),e.addEventListener("loadeddata",(()=>{this.startVideoPlayback(e)}),{once:!0}),e.addEventListener("canplay",(()=>{this.isVideoPlaying||this.startVideoPlayback(e)}),{once:!0}),e.load(),setTimeout((()=>{this.isVideoPlaying||(console.log("Video load timeout, forcing playback..."),this.startVideoPlayback(e))}),2e3))}catch(t){console.error("Video setup error:",t),this.handleVideoError(t)}},handleVideoPlaying(){this.isVideoPlaying=!0},handleVideoError(e){console.error("Video error occurred:",e),this.isVideoPlaying=!1,this.activeVideo=null,this.isMuted=!0},handleVideoEnd(){console.log("Video ended naturally"),this.isManualNavigation||(this.stopVideo(),this.nextSlide(),setTimeout((()=>{this.playVideo()}),1e3))},stopVideo(){this.activeVideo&&(this.activeVideo.pause(),this.activeVideo.currentTime=0,this.isVideoPlaying=!1,this.activeVideo=null)},stopAllVideos(){this.$refs.videos&&this.$refs.videos.forEach((e=>{e.pause(),e.currentTime=0})),this.isVideoPlaying=!1,this.activeVideo=null},nextSlide(){this.isManualNavigation=!1;const e=(this.currentSlide+1)%this.slides.length;this.showSlide(e)},prevSlide(){this.isManualNavigation=!0;const e=(this.currentSlide-1+this.slides.length)%this.slides.length;this.showSlide(e)},pauseAutoplay(){this.videoTimeout&&clearTimeout(this.videoTimeout)},resumeAutoplay(){this.videoTimeout||this.isVideoPlaying||this.startVideoPlayback()},navigateToMovie(e){e?(console.log("Navigating to movie:",e),this.$router.push({name:"MovieDetails",params:{id:e}})):console.log("No movie ID available")},handleMobileVideoClick(e){window.innerWidth<=768&&(this.stopVideo(),this.navigateToMovie(e.id))}}};const ft=(0,I.A)(pt,[["render",ht],["__scopeId","data-v-473c3c37"]]);var gt=ft;const vt={class:"flex justify-between items-center mb-3 pr-4"},bt={class:"gradient-text font-semibold text-base md:text-lg"},yt={class:"relative"},kt=["aria-label","id"],wt=["id"],xt={class:"flex gap-4 pr-4"},Lt=["aria-label","id"];function Ct(e,t,s,a,o,r){const l=(0,i.g2)("MovieCard");return(0,i.uX)(),(0,i.CE)("section",null,[(0,i.Lk)("div",vt,[(0,i.Lk)("h2",bt,(0,d.v_)(s.title),1),t[2]||(t[2]=(0,i.Lk)("a",{class:"text-white font-semibold text-sm hover:underline whitespace-nowrap",href:"#"}," View All ",-1))]),(0,i.Lk)("div",yt,[o.canScrollLeft?((0,i.uX)(),(0,i.CE)("button",{key:0,"aria-label":"Previous "+s.title,id:"prev"+s.sectionId,class:"absolute -left-4 top-1/2 -translate-y-1/2 z-10 rounded-full hidden md:flex items-center justify-center p-2 text-white shadow-lg",style:{"background-color":"#c30059"},onClick:t[0]||(t[0]=(...e)=>r.scrollLeft&&r.scrollLeft(...e))},t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]),8,kt)):(0,i.Q3)("",!0),(0,i.Lk)("div",{id:s.sectionId,class:"flex gap-4 overflow-x-auto scrollbar-hide scroll-container snap-x snap-mandatory",ref:"scrollContainer"},[(0,i.Lk)("div",xt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.movies,(e=>((0,i.uX)(),(0,i.Wv)(l,(0,i.v6)({key:e.id,ref_for:!0},e,{isWebSeries:"trendingWebSeries"===s.sectionId,class:"snap-start"}),null,16,["isWebSeries"])))),128))])],8,wt),o.canScrollRight?((0,i.uX)(),(0,i.CE)("button",{key:1,"aria-label":"Next "+s.title,id:"next"+s.sectionId,class:"absolute right-0 top-1/2 -translate-y-1/2 z-10 rounded-full hidden md:flex items-center justify-center p-2 text-white shadow-lg",style:{"background-color":"#c30059"},onClick:t[1]||(t[1]=(...e)=>r.scrollRight&&r.scrollRight(...e))},t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]),8,Lt)):(0,i.Q3)("",!0)])])}const St={key:0,class:"absolute inset-0 bg-[#1d1d1d] flex items-center justify-center"},Et=["alt","src"],Pt={key:1,class:"absolute inset-0 bg-[#1d1d1d] flex items-center justify-center flex-col p-2"},_t={class:"text-xs text-center text-white/70"},Mt={key:2,class:"absolute top-1 left-1 badge-new-episode text-[10px] font-semibold uppercase px-1 rounded-sm"},At={key:3,class:"absolute top-1 right-1 badge-4k text-[10px] font-semibold uppercase px-1 rounded-sm flex items-center space-x-1"},Tt={key:4,class:"absolute bottom-1 right-1 badge-premium text-[10px] font-semibold uppercase px-1 rounded-sm"},Vt={class:"mt-1 text-xs font-semibold truncate card-text"},It={key:0,class:"fas fa-closed-captioning text-[9px]"};function Dt(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",{class:"min-w-[160px] flex-shrink-0",onClick:t[2]||(t[2]=(...e)=>r.navigateToDetails&&r.navigateToDetails(...e))},[(0,i.Lk)("div",{class:(0,d.C4)(["relative rounded-md overflow-hidden card-container",{"w-[160px] h-[240px]":!s.isWebSeries,"w-[280px] h-[157.5px]":s.isWebSeries}])},[o.loading?((0,i.uX)(),(0,i.CE)("div",St,t[3]||(t[3]=[(0,i.Lk)("div",{class:"w-8 h-8 border-2 border-[#c30059] border-t-transparent rounded-full animate-spin"},null,-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("img",{alt:s.title,class:"w-full h-full object-cover",src:s.image,onLoad:t[0]||(t[0]=e=>o.loading=!1),onError:t[1]||(t[1]=(...e)=>r.handleImageError&&r.handleImageError(...e))},null,40,Et),o.imageError?((0,i.uX)(),(0,i.CE)("div",Pt,[t[4]||(t[4]=(0,i.Lk)("i",{class:"fas fa-image text-2xl text-[#c30059] mb-2"},null,-1)),(0,i.Lk)("p",_t,(0,d.v_)(s.title),1)])):(0,i.Q3)("",!0),s.isNewEpisode?((0,i.uX)(),(0,i.CE)("div",Mt," New Episode ")):(0,i.Q3)("",!0),s.is4K?((0,i.uX)(),(0,i.CE)("div",At,t[5]||(t[5]=[(0,i.Lk)("span",null,"4K",-1),(0,i.Lk)("i",{class:"fas fa-check-circle text-xs"},null,-1)]))):(0,i.Q3)("",!0),s.isPremium?((0,i.uX)(),(0,i.CE)("div",Tt,(0,d.v_)(s.premiumText),1)):(0,i.Q3)("",!0)],2),(0,i.Lk)("p",Vt,[(0,i.eW)((0,d.v_)(s.title)+" ",1),s.hasClosedCaptioning?((0,i.uX)(),(0,i.CE)("i",It)):(0,i.Q3)("",!0)])])}var Rt={name:"MovieCard",props:{title:{type:String,required:!0},image:{type:String,required:!0},isNewEpisode:{type:Boolean,default:!1},is4K:{type:Boolean,default:!1},isPremium:{type:Boolean,default:!1},premiumText:{type:String,default:"Premium"},hasClosedCaptioning:{type:Boolean,default:!1},isWebSeries:{type:Boolean,default:!1},id:{type:[Number,String],required:!0}},data(){return{loading:!0,imageError:!1}},methods:{handleImageError(){this.loading=!1,this.imageError=!0},navigateToDetails(){this.$router.push({name:"MovieDetails",params:{id:this.id}})}}};const $t=(0,I.A)(Rt,[["render",Dt],["__scopeId","data-v-608bef32"]]);var Ft=$t,Xt={name:"MovieSection",components:{MovieCard:Ft},props:{title:{type:String,required:!0},sectionId:{type:String,required:!0},movies:{type:Array,required:!0}},data(){return{canScrollLeft:!1,canScrollRight:!0}},mounted(){this.checkScrollButtons(),this.$refs.scrollContainer?.addEventListener("scroll",this.checkScrollButtons)},beforeUnmount(){this.$refs.scrollContainer?.removeEventListener("scroll",this.checkScrollButtons)},methods:{checkScrollButtons(){const e=this.$refs.scrollContainer;if(!e)return;this.canScrollLeft=e.scrollLeft>0;const t=e.scrollWidth-e.clientWidth;this.canScrollRight=e.scrollLeft<t-1},scrollLeft(){const e=this.$refs.scrollContainer;if(!e)return;const t=180,s=e.clientWidth,a=Math.floor(s/t),i=t*a,o=Math.max(0,e.scrollLeft-i);e.scrollTo({left:o,behavior:"smooth"})},scrollRight(){const e=this.$refs.scrollContainer;if(!e)return;const t=180,s=e.clientWidth,a=Math.floor(s/t),i=t*a,o=e.scrollWidth-e.clientWidth,r=Math.min(o,e.scrollLeft+i);e.scrollTo({left:r,behavior:"smooth"})}}};const jt=(0,I.A)(Xt,[["render",Ct],["__scopeId","data-v-1f097fee"]]);var Nt=jt;const Ut={class:"bg-[#181c23] text-white w-full min-w-full"};function Bt(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("footer",Ut,t[0]||(t[0]=[(0,i.Fv)('<div class="w-full px-4 sm:px-6 md:px-8 lg:px-10 pb-20 md:pb-0" data-v-167eac08><div class="w-full flex flex-col md:flex-row items-center justify-between p-3 md:p-4 gap-4" data-v-167eac08><div class="w-full md:w-1/2 flex items-center justify-center md:justify-start mb-4 md:mb-0" data-v-167eac08><div class="flex items-center gap-4" data-v-167eac08><svg class="h-12 w-12 text-pink-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-v-167eac08><path stroke-linecap="round" stroke-linejoin="round" d="M15 10l4.553-2.276A2 2 0 0122 9.618v4.764a2 2 0 01-2.447 1.894L15 14M4 6v12a2 2 0 002 2h8a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2z" data-v-167eac08></path></svg><div data-v-167eac08><div class="text-lg md:text-2xl font-bold" data-v-167eac08>Stream the Latest Movies &amp; Shows</div><div class="text-sm md:text-base text-gray-300" data-v-167eac08>Watch anywhere, anytime, on any device. Experience entertainment like never before!</div></div></div></div><div class="w-full md:w-1/2 flex justify-center md:justify-end" data-v-167eac08><div class="flex flex-row gap-2 w-full md:w-auto justify-center" data-v-167eac08><a href="https://play.google.com/store" target="_blank" class="flex-1 flex justify-center md:justify-end" data-v-167eac08><img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Get it on Google Play" class="h-14 w-full max-w-xs object-contain" data-v-167eac08></a><a href="https://www.apple.com/app-store/" target="_blank" class="flex-1 flex justify-center md:justify-end" data-v-167eac08><img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Download on the App Store" class="h-14 w-full max-w-xs object-contain" data-v-167eac08></a></div></div></div><div class="grid grid-cols-1 xs:grid-cols-2 md:grid-cols-6 gap-4 md:gap-8 py-10 border-b border-gray-700 mt-6" data-v-167eac08><div class="col-span-1 flex flex-col gap-4 xs:col-span-2 md:col-span-1" data-v-167eac08><img src="'+ee+'" alt="OTT Logo" class="w-[160px] h-auto mb-2 mx-auto md:mx-0" width="1280" height="750" data-v-167eac08><div class="text-sm font-semibold text-center md:text-left" data-v-167eac08>Unlimited Entertainment, Anytime, Anywhere</div><div class="mt-0" data-v-167eac08><div class="text-base text-center font-bold mb-1" data-v-167eac08>Need Help?</div><div class="text-sm text-center" data-v-167eac08>Contact our support team</div><a href="mailto:support@yourott.com" class="block mt-4 text-white hover:text-blue-400 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 transition-all duration-300 text-center font-semibold rounded-lg py-2.5 px-6 w-auto mx-auto md:mx-0 text-sm md:text-base shadow-lg hover:shadow-xl transform hover:-translate-y-0.5" data-v-167eac08><div class="flex items-center justify-center gap-2" data-v-167eac08><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-167eac08><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-167eac08></path></svg> support@yourott.com </div></a></div></div><div class="rounded-xl bg-[#23272f] p-4 shadow-sm xs:col-span-1 md:col-span-1" data-v-167eac08><div class="font-bold mb-3 text-lg" data-v-167eac08>FEATURES</div><ul class="space-y-2 text-sm text-gray-300" data-v-167eac08><li data-v-167eac08>Latest Movies</li><li data-v-167eac08>Exclusive Web Series</li><li data-v-167eac08>Live TV Channels</li><li data-v-167eac08>Kids &amp; Family</li><li data-v-167eac08>Multi-language Content</li><li data-v-167eac08>Offline Downloads</li><li data-v-167eac08>Ad-Free Experience</li></ul></div><div class="rounded-xl bg-[#23272f] p-4 shadow-sm xs:col-span-1 md:col-span-1" data-v-167eac08><div class="font-bold mb-3 text-lg" data-v-167eac08>HELP CENTER</div><ul class="space-y-2 text-sm text-gray-300" data-v-167eac08><li data-v-167eac08>Account &amp; Billing</li><li data-v-167eac08>Subscription Plans</li><li data-v-167eac08>Supported Devices</li><li data-v-167eac08>FAQs</li><li data-v-167eac08>Report a Problem</li><li data-v-167eac08>Accessibility</li></ul></div><div class="rounded-xl bg-[#23272f] p-4 shadow-sm xs:col-span-1 md:col-span-1" data-v-167eac08><div class="font-bold mb-3 text-lg" data-v-167eac08>COMPANY</div><ul class="space-y-2 text-sm text-gray-300" data-v-167eac08><li data-v-167eac08>About Us</li><li data-v-167eac08>Careers</li><li data-v-167eac08>Press &amp; Media</li><li data-v-167eac08>Contact</li><li data-v-167eac08>Investor Relations</li></ul></div><div class="rounded-xl bg-[#23272f] p-4 shadow-sm xs:col-span-1 md:col-span-1" data-v-167eac08><div class="font-bold mb-3 text-lg" data-v-167eac08>LEGAL</div><ul class="space-y-2 text-sm text-gray-300" data-v-167eac08><li data-v-167eac08>Terms of Service</li><li data-v-167eac08>Privacy Policy</li><li data-v-167eac08>Cookie Policy</li><li data-v-167eac08>Content Guidelines</li><li data-v-167eac08>DMCA</li></ul></div><div class="rounded-xl bg-[#23272f] p-4 shadow-sm xs:col-span-1 md:col-span-1" data-v-167eac08><div class="font-bold mb-3 text-lg" data-v-167eac08>EXPLORE</div><ul class="space-y-2 text-sm text-gray-300" data-v-167eac08><li data-v-167eac08>Trending Now</li><li data-v-167eac08>Top Rated</li><li data-v-167eac08>New Releases</li><li data-v-167eac08>Genres</li><li data-v-167eac08>Watchlist</li><li data-v-167eac08>Gift Cards</li></ul></div></div><div class="flex flex-col md:flex-row justify-between items-center py-6 text-xs text-gray-400 gap-4" data-v-167eac08><div class="flex items-center gap-2" data-v-167eac08><span data-v-167eac08>© 2024 YourOTT. All rights reserved.</span></div><div class="flex flex-wrap items-center justify-center gap-4" data-v-167eac08><a href="#" class="hover:underline" data-v-167eac08>Sitemap</a><a href="#" class="hover:underline" data-v-167eac08>Privacy Policy</a><a href="#" class="hover:underline" data-v-167eac08>Terms of Service</a></div><div class="flex items-center gap-3 text-xl" data-v-167eac08><a href="#" aria-label="Facebook" data-v-167eac08><i class="fab fa-facebook-f" data-v-167eac08></i></a><a href="#" aria-label="X" data-v-167eac08><i class="fab fa-x-twitter" data-v-167eac08></i></a><a href="#" aria-label="LinkedIn" data-v-167eac08><i class="fab fa-linkedin-in" data-v-167eac08></i></a><a href="#" aria-label="Instagram" data-v-167eac08><i class="fab fa-instagram" data-v-167eac08></i></a><a href="#" aria-label="YouTube" data-v-167eac08><i class="fab fa-youtube" data-v-167eac08></i></a></div></div></div>',1)]))}var Ot={name:"AppFooter"};const Qt=(0,I.A)(Ot,[["render",Bt],["__scopeId","data-v-167eac08"]]);var Wt=Qt;const Kt={class:"mb-8"},qt={key:0,class:"fixed inset-0 z-50 overflow-y-auto bg-black/90"},zt={class:"min-h-screen px-4 py-6"},Ht={class:"relative max-w-7xl mx-auto"},Jt={class:"flex items-center justify-between mb-6"},Gt={class:"text-2xl font-bold text-white"},Yt={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4"},Zt=["onClick"],es={class:"aspect-[2/3] bg-gray-800 rounded-lg overflow-hidden relative"},ts=["src","alt"],ss={class:"absolute top-2 left-2 flex gap-2"},as={key:0,class:"bg-red-600 text-white text-xs px-2 py-0.5 rounded"},is={key:1,class:"bg-purple-600 text-white text-xs px-2 py-0.5 rounded"},os={key:2,class:"bg-yellow-600 text-white text-xs px-2 py-0.5 rounded"},rs={class:"absolute bottom-2 right-2 bg-black/70 px-2 py-0.5 rounded text-xs text-white"},ls={class:"mt-2"},ns={class:"text-white text-sm font-medium"},cs={class:"text-gray-400 text-xs"},ds={class:"flex items-center justify-between mb-4 pr-4"},us={class:"text-lg font-medium gradient-text"},hs={class:"flex items-center gap-2"},ms=["onClick"],ps={class:"relative"},fs=["onClick"],gs=["onScroll"],vs=["onClick"],bs={class:"w-[200px] h-[120px] bg-gray-800 rounded-lg overflow-hidden relative"},ys=["src","alt"],ks={class:"absolute top-2 left-2 flex gap-2"},ws={key:0,class:"bg-purple-600 text-white text-xs px-2 py-0.5 rounded"},xs={class:"mt-2"},Ls={class:"text-white text-sm font-medium"},Cs=["onClick"],Ss={class:"w-[200px] h-[120px] bg-gray-800 rounded-lg overflow-hidden relative"},Es=["src","alt"],Ps={class:"absolute top-2 left-2 flex gap-2"},_s={key:0,class:"bg-red-600 text-white text-xs px-2 py-0.5 rounded"},Ms={key:1,class:"bg-purple-600 text-white text-xs px-2 py-0.5 rounded"},As={key:2,class:"bg-yellow-600 text-white text-xs px-2 py-0.5 rounded"},Ts={class:"absolute bottom-2 right-2 bg-black/70 px-2 py-0.5 rounded text-xs text-white"},Vs={class:"mt-2"},Is={class:"text-white text-sm font-medium capitalize"},Ds=["onClick"];function Rs(e,t,s,o,r,l){const n=(0,i.g2)("LiveTVPlayer"),c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("section",Kt,[o.showViewAllModal?((0,i.uX)(),(0,i.CE)("div",qt,[(0,i.Lk)("div",zt,[(0,i.Lk)("div",Ht,[(0,i.Lk)("div",Jt,[(0,i.Lk)("h2",Gt,(0,d.v_)(o.selectedCategory?.name),1),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.closeViewAllModal&&l.closeViewAllModal(...e)),class:"text-white hover:text-gray-300"},t[1]||(t[1]=[(0,i.Lk)("i",{class:"fas fa-times text-xl"},null,-1)]))]),(0,i.Lk)("div",Yt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.categoryVideos[o.selectedCategory?.id]?.data,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"cursor-pointer group",onClick:t=>l.playVideo(e)},[(0,i.Lk)("div",es,[(0,i.Lk)("img",{src:e.portrait_thumbnail_url||e.thumbnail_url,alt:e.title,class:"w-full h-full object-cover"},null,8,ts),(0,i.Lk)("div",ss,[l.isNewVideo(e.created_at)?((0,i.uX)(),(0,i.CE)("span",as," NEW ")):(0,i.Q3)("",!0),e.is_premium?((0,i.uX)(),(0,i.CE)("span",is," PREMIUM ")):(0,i.Q3)("",!0),"rental"===e.video_type?((0,i.uX)(),(0,i.CE)("span",os," RENTAL ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",rs,(0,d.v_)(l.formatDuration(e.duration)),1),t[2]||(t[2]=(0,i.Lk)("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50"},[(0,i.Lk)("div",{class:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm"},[(0,i.Lk)("i",{class:"fas fa-play text-white"})])],-1))]),(0,i.Lk)("div",ls,[(0,i.Lk)("h4",ns,(0,d.v_)(e.title),1),(0,i.Lk)("p",cs,(0,d.v_)(l.formatViews(e.views_count))+" Views",1)])],8,Zt)))),128))])])])])):(0,i.Q3)("",!0),(0,i.bF)(n,{"is-open":o.isPlayerOpen,"video-url":o.selectedVideoUrl,"video-title":o.selectedVideoTitle,"is-direct-video":!1,onClose:l.closePlayer},null,8,["is-open","video-url","video-title","onClose"]),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.categories,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"mb-8"},[(0,i.Lk)("div",ds,[(0,i.Lk)("h2",us,(0,d.v_)(e.name),1),(0,i.Lk)("div",hs,[(0,i.bF)(c,{to:{name:"CategoryVideos",params:{id:e.id}},class:"text-white font-semibold text-sm hover:underline whitespace-nowrap"},{default:(0,i.k6)((()=>t[3]||(t[3]=[(0,i.eW)(" View All ")]))),_:2,__:[3]},1032,["to"]),o.categoryVideos[e.id]?.pagination?.has_next?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t=>l.loadMoreVideos(e.id),class:"text-sm text-blue-500 hover:text-blue-400"}," View More ",8,ms)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",ps,[(0,i.bo)((0,i.Lk)("button",{onClick:t=>l.scroll("left",e.id),class:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full hover:bg-black/70"},t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]),8,fs),[[a.aG,o.scrollStates[e.id]?.canScrollLeft]]),(0,i.Lk)("div",{ref_for:!0,ref:t=>o.setContainerRef(t,e.id),class:"flex gap-4 overflow-x-auto scrollbar-hide scroll-smooth",onScroll:t=>l.checkScroll(e.id)},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.categoryLiveStreams[e.id]||[],(e=>((0,i.uX)(),(0,i.CE)("div",{key:"live-"+e.id,class:"flex-shrink-0 relative group cursor-pointer",onClick:t=>l.playLiveStream(e)},[(0,i.Lk)("div",bs,[(0,i.Lk)("img",{src:e.thumbnail||"https://via.placeholder.com/200x120",alt:e.title,class:"w-full h-full object-cover"},null,8,ys),(0,i.Lk)("div",ks,[t[5]||(t[5]=(0,i.Lk)("span",{class:"bg-red-600 text-white text-xs px-2 py-0.5 rounded animate-pulse"}," LIVE ",-1)),e.is_premium?((0,i.uX)(),(0,i.CE)("span",ws," PREMIUM ")):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",xs,[(0,i.Lk)("h4",Ls,(0,d.v_)(e.title),1)])],8,vs)))),128)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.categoryVideos[e.id]?.data||[],(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"flex-shrink-0 relative group cursor-pointer",onClick:t=>l.playVideo(e)},[(0,i.Lk)("div",Ss,[(0,i.Lk)("img",{src:e.thumbnail_url||"https://via.placeholder.com/200x120",alt:e.title,class:"w-full h-full object-cover"},null,8,Es),(0,i.Lk)("div",Ps,[l.isNewVideo(e.created_at)?((0,i.uX)(),(0,i.CE)("span",_s," NEW ")):(0,i.Q3)("",!0),e.is_premium?((0,i.uX)(),(0,i.CE)("span",Ms," PREMIUM ")):(0,i.Q3)("",!0),"rental"===e.video_type?((0,i.uX)(),(0,i.CE)("span",As," RENTAL ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Ts,(0,d.v_)(l.formatDuration(e.duration)),1),t[6]||(t[6]=(0,i.Lk)("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"},[(0,i.Lk)("div",{class:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm"},[(0,i.Lk)("i",{class:"fas fa-play text-white"})])],-1))]),(0,i.Lk)("div",Vs,[(0,i.Lk)("h4",Is,(0,d.v_)(e.title),1)])],8,Cs)))),128))],40,gs),(0,i.bo)((0,i.Lk)("button",{onClick:t=>l.scroll("right",e.id),class:"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full hover:bg-black/70"},t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]),8,Ds),[[a.aG,o.scrollStates[e.id]?.canScrollRight]])])])))),128))])}var $s=s(144);const Fs="http://192.168.0.104:8000";var Xs={name:"CategorySection",components:{LiveTVPlayer:Ue},props:{title:{type:String,default:"Categories"}},setup(){const e=(0,$s.KR)([]),t=(0,$s.Kh)({}),s=(0,$s.Kh)({}),a=(0,$s.Kh)({}),i=(0,$s.Kh)({}),o=(0,$s.KR)(!1),r=(0,$s.KR)(""),l=(0,$s.KR)(""),n=(0,$s.KR)(null),c=(0,$s.KR)(!1),d=(0,$s.KR)(null),u=(e,t)=>{e&&(i[t]=e)};return{categories:e,categoryVideos:t,categoryLiveStreams:s,scrollStates:a,containerRefs:i,setContainerRef:u,isPlayerOpen:o,selectedVideoUrl:r,selectedVideoTitle:l,pollingInterval:n,showViewAllModal:c,selectedCategory:d}},mounted(){this.fetchCategories(),this.startPolling()},beforeUnmount(){this.stopPolling()},methods:{startPolling(){this.pollingInterval=setInterval((()=>{this.categories.length>0&&this.categories.forEach((e=>{this.fetchLiveStreams(e.id)}))}),5e3)},stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)},async fetchCategories(){try{const e=await C.A.get(`${Fs}/api/frontend/categories/`);"success"===e.data.status&&(this.categories=e.data.data,this.categories.forEach((e=>{this.scrollStates[e.id]={canScrollLeft:!1,canScrollRight:!0},this.fetchCategoryVideos(e.id),this.fetchLiveStreams(e.id)})))}catch(e){console.error("Error fetching categories:",e)}},capitalizeText(e){return e?e.split(/[\s-]+/).map((e=>{const t=["HD","UHD","4K","TV","II","III","IV","SPY"];if(t.includes(e.toUpperCase()))return e.toUpperCase();const s=["a","an","the","and","but","or","for","nor","in","to","on","at","by","of"];return s.includes(e.toLowerCase())?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" "):""},async fetchCategoryVideos(e,t=1){try{const s=await C.A.get(`${Fs}/api/videos/category/${e}/?page=${t}&page_size=10`);if("success"===s.data.status){console.log("API Response Videos:",s.data.data.map((e=>({id:e.id,video_url:e.video_url,promo_url:e.promo_video_url,hls_url:e.promo_hls_url}))));const a=s.data.data.map((e=>({...e,title:this.capitalizeText(e.title),description:this.capitalizeText(e.description),is_live:!1})));this.categoryVideos[e]=1===t?{...s.data,data:a}:{...s.data,data:[...this.categoryVideos[e]?.data||[],...a]}}}catch(s){console.error(`Error fetching videos for category ${e}:`,s)}},async fetchLiveStreams(e){try{const t=await C.A.get(`${Fs}/api/live-streams/by_category/?category_id=${e}`),s=t.data.map((e=>({...e,title:this.capitalizeText(e.title),description:this.capitalizeText(e.description),is_live:!0})));this.categoryLiveStreams[e]=s.sort(((e,t)=>e.order-t.order))}catch(t){console.error(`Error fetching live streams for category ${e}:`,t)}},async loadMoreVideos(e){const t=this.categoryVideos[e]?.pagination?.current_page||1;this.categoryVideos[e]?.pagination?.has_next&&await this.fetchCategoryVideos(e,t+1)},scroll(e,t){const s=this.containerRefs[t];if(!s)return;const a=300;"left"===e?s.scrollLeft-=a:s.scrollLeft+=a},checkScroll(e){const t=this.containerRefs[e];t&&(this.scrollStates[e]={canScrollLeft:t.scrollLeft>0,canScrollRight:t.scrollLeft<t.scrollWidth-t.clientWidth})},playVideo(e){if(!e.live_url){console.log("Playing video with URL:",{id:e.id,video_url:e.video_url,is_hls:e.video_url?.includes(".m3u8")});const t=e.video_url;if(!t||!t.includes(".m3u8"))return void console.error("Invalid or missing HLS URL:",e);this.$router.push({name:"MovieDetails",params:{id:e.id,videoUrl:t,videoType:"hls"}})}},playLiveStream(e){e.live_url&&(this.selectedVideoUrl=e.live_url,this.selectedVideoTitle=e.title,this.isPlayerOpen=!0)},closePlayer(){this.isPlayerOpen=!1,this.selectedVideoUrl="",this.selectedVideoTitle=""},isNewVideo(e){const t=new Date(e),s=new Date,a=Math.ceil((s-t)/864e5);return a<=7},formatDuration(e){const t=Math.floor(e/60),s=e%60;return`${t}:${s.toString().padStart(2,"0")}`},formatViews(e){return e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString()},showAllVideos(e){this.selectedCategory=e,this.showViewAllModal=!0,this.fetchCategoryVideos(e.id,1,100)},closeViewAllModal(){this.showViewAllModal=!1,this.selectedCategory=null}}};const js=(0,I.A)(Xs,[["render",Rs],["__scopeId","data-v-323871ce"]]);var Ns=js;const Us={key:0,class:"flex justify-center items-center h-[184px]"},Bs={key:1,class:"flex justify-center items-center h-[184px]"},Os={class:"text-center"},Qs={class:"text-red-500"},Ws={key:2,class:"relative group"},Ks={class:"overflow-x-auto hide-scrollbar"},qs={class:"flex gap-3 px-2"},zs=["onClick"],Hs={class:"aspect-[184/201] relative"},Js=["src","alt"],Gs={class:"absolute bottom-0 left-0 right-0 p-3 transform translate-y-2 group-hover/card:translate-y-0 transition-transform"},Ys={class:"text-white font-semibold text-base mb-1 drop-shadow-lg line-clamp-1"},Zs={class:"flex items-center text-gray-300 text-xs space-x-2 opacity-0 group-hover/card:opacity-100 transition-opacity"};function ea(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("section",null,[t[5]||(t[5]=(0,i.Fv)('<div class="flex items-center justify-between mb-4 px-2" data-v-3ae0ea88><div class="flex items-center gap-3" data-v-3ae0ea88><h2 class="text-lg font-medium" data-v-3ae0ea88>States</h2></div><button class="text-white hover:text-purple-400 flex items-center space-x-2 text-sm" data-v-3ae0ea88><span data-v-3ae0ea88>View All</span><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-3ae0ea88><path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" data-v-3ae0ea88></path></svg></button></div>',1)),o.loading?((0,i.uX)(),(0,i.CE)("div",Us,t[0]||(t[0]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"},null,-1)]))):(0,i.Q3)("",!0),o.error?((0,i.uX)(),(0,i.CE)("div",Bs,[(0,i.Lk)("div",Os,[t[1]||(t[1]=(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-red-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),(0,i.Lk)("p",Qs,(0,d.v_)(o.error),1)])])):(0,i.Q3)("",!0),o.loading||o.error?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ws,[(0,i.Lk)("div",Ks,[(0,i.Lk)("div",qs,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.states,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"group/card flex-shrink-0 w-[184px] relative rounded-lg overflow-hidden cursor-pointer",onClick:t=>r.goToRegionalPage(e)},[(0,i.Lk)("div",Hs,[(0,i.Lk)("img",{src:e.image||"https://via.placeholder.com/184x201?text=State",alt:e.name,class:"w-full h-full object-cover transition-transform duration-300 group-hover/card:scale-110"},null,8,Js),t[3]||(t[3]=(0,i.Lk)("div",{class:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent opacity-80 group-hover/card:opacity-70 transition-opacity"},null,-1)),(0,i.Lk)("div",Gs,[(0,i.Lk)("h3",Ys,(0,d.v_)(e.name),1),(0,i.Lk)("div",Zs,[t[2]||(t[2]=(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),(0,i.Lk)("span",null,(0,d.v_)(e.districts_count)+" Districts",1)])])])],8,zs)))),128))])]),t[4]||(t[4]=(0,i.Lk)("div",{class:"absolute top-0 right-0 bottom-0 w-24 bg-gradient-to-l from-black to-transparent pointer-events-none"},null,-1))]))])}var ta={name:"StatesSection",data(){return{states:[],loading:!0,error:null}},methods:{goToRegionalPage(e){this.$router.push({path:"/regional",query:{state_id:e.id}})}},async created(){try{const e=await C.A.get("http://192.168.0.104:8000/api/frontend/states/");"success"===e.data.status?this.states=e.data.data:this.error=e.data.message||"Failed to load states"}catch(e){console.error("Error fetching states:",e),this.error="Error loading states. Please try again later."}finally{this.loading=!1}}};const sa=(0,I.A)(ta,[["render",ea],["__scopeId","data-v-3ae0ea88"]]);var aa=sa;const ia={class:"mb-8"},oa={class:"flex items-center justify-between mb-4"},ra={class:"text-lg font-medium gradient-text"},la={class:"relative"},na=["onClick"],ca={class:"w-[160px] h-[240px] bg-gray-800 rounded-lg overflow-hidden relative"},da=["src","alt"],ua={class:"absolute top-2 left-2 flex gap-2"},ha={key:0,class:"bg-red-600 text-white text-xs px-2 py-0.5 rounded"},ma={key:1,class:"bg-purple-600 text-white text-xs px-2 py-0.5 rounded"},pa={class:"absolute inset-0 bg-gradient-to-t from-black via-black/75 to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end justify-center pb-4"},fa={class:"text-center w-full px-4 py-2"},ga={class:"text-white text-lg font-bold mb-1 drop-shadow-lg capitalize"},va={class:"text-white/80 text-xs font-medium drop-shadow-lg line-clamp-2"},ba={class:"mt-2 text-center"},ya={class:"text-white text-sm font-medium truncate px-2"};function ka(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("section",ia,[(0,i.Lk)("div",oa,[(0,i.Lk)("h2",ra,(0,d.v_)(s.title),1)]),(0,i.Lk)("div",la,[(0,i.bo)((0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>o.scroll("left")),class:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full hover:bg-black/70"},t[4]||(t[4]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]),512),[[a.aG,o.canScrollLeft]]),(0,i.Lk)("div",{ref:"containerRef",class:"flex gap-4 overflow-x-auto scrollbar-hide scroll-smooth",onScroll:t[2]||(t[2]=(...e)=>o.checkScroll&&o.checkScroll(...e))},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.categories,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"flex-shrink-0 relative group cursor-pointer",onClick:t=>o.selectCategory(e)},[(0,i.Lk)("div",ca,[(0,i.Lk)("img",{src:e.image||"/images/placeholder.png",alt:e.name,class:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",onError:t[1]||(t[1]=(...e)=>o.handleImageError&&o.handleImageError(...e))},null,40,da),(0,i.Lk)("div",ua,[e.is_new?((0,i.uX)(),(0,i.CE)("span",ha," NEW ")):(0,i.Q3)("",!0),e.is_premium?((0,i.uX)(),(0,i.CE)("span",ma," PREMIUM ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",pa,[(0,i.Lk)("div",fa,[(0,i.Lk)("h3",ga,(0,d.v_)(e.name),1),(0,i.Lk)("p",va,(0,d.v_)(e.description),1)])])]),(0,i.Lk)("div",ba,[(0,i.Lk)("h3",ya,(0,d.v_)(e.name),1)])],8,na)))),128))],544),(0,i.bo)((0,i.Lk)("button",{onClick:t[3]||(t[3]=e=>o.scroll("right")),class:"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-black/50 p-2 rounded-full hover:bg-black/70"},t[5]||(t[5]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]),512),[[a.aG,o.canScrollRight]])])])}const wa="http://192.168.0.104:8000",xa="/images/placeholder.png";var La={name:"AllCategoriesSection",props:{title:{type:String,default:"Browse By Categories"}},setup(){const e=(0,q.rd)(),t=(0,$s.KR)([]),s=(0,$s.KR)(null),a=(0,$s.KR)(!1),o=(0,$s.KR)(!0),r=e=>{e.target.src=xa,e.target.removeEventListener("error",r)},l=e=>e?e.split(/[\s-]+/).map((e=>{const t=["HD","UHD","4K","TV","II","III","IV","SPY"];if(t.includes(e.toUpperCase()))return e.toUpperCase();const s=["a","an","the","and","but","or","for","nor","in","to","on","at","by","of"];return s.includes(e.toLowerCase())?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" "):"",n=async()=>{try{const e=await C.A.get("/api/categories/active/");t.value=e.data.map((e=>({...e,name:l(e.name),description:l(e.description),image:e.image?e.image.startsWith("http")?e.image:`${wa}${e.image}`:xa})))}catch(e){console.error("Error fetching categories:",e),t.value=[]}},c=e=>{if(!s.value)return;const t=300;s.value.scrollLeft+="left"===e?-t:t},d=()=>{s.value&&(a.value=s.value.scrollLeft>0,o.value=s.value.scrollLeft<s.value.scrollWidth-s.value.clientWidth)},u=t=>{e.push({name:"CategoryVideos",params:{id:t.id}})};return(0,i.sV)((()=>{n()})),{categories:t,containerRef:s,canScrollLeft:a,canScrollRight:o,scroll:c,checkScroll:d,selectCategory:u,handleImageError:r}}};const Ca=(0,I.A)(La,[["render",ka],["__scopeId","data-v-3a47571c"]]);var Sa=Ca,Ea={name:"HomePage",components:{AppHeader:We,HeroSection:gt,MovieSection:Nt,AppFooter:Wt,ProfileMenu:R,CategorySection:Ns,StatesSection:aa,AllCategoriesSection:Sa},data(){return{isSearchActive:!1,isMenuOpen:!1,recentlyAdded:[],newReleases:[{id:1,title:"Mega Grand Finale",image:"https://i.ibb.co/Jk3kB0r/mega-finale.jpg",isNewEpisode:!0,is4K:!0,isPremium:!0},{id:2,title:"Unstoppable With NBK",image:"https://i.ibb.co/VwB9K0Q/unstoppable.jpg",isNewEpisode:!0,is4K:!0,isPremium:!1},{id:3,title:"Aparadhi",image:"https://i.ibb.co/Qj6Kx6P/jailer.jpg",isNewEpisode:!1,is4K:!0,isPremium:!0},{id:4,title:"RRR",image:"https://i.ibb.co/VCQRyM1/rrr.jpg",isNewEpisode:!1,is4K:!0,isPremium:!0},{id:5,title:"Pushpa: The Rise",image:"https://i.ibb.co/0MKzGTw/pushpa.jpg",isNewEpisode:!1,is4K:!0,isPremium:!0},{id:6,title:"Guntur Kaaram",image:"https://i.ibb.co/tCW0q0Y/guntur-kaaram.jpg",isNewEpisode:!0,is4K:!0,isPremium:!0},{id:7,title:"Waltair Veerayya",image:"https://i.ibb.co/Kj8vXNm/waltair-veerayya.jpg",isNewEpisode:!1,is4K:!0,isPremium:!0},{id:8,title:"Custody",image:"https://i.ibb.co/9vPNYtL/custody.jpg",isNewEpisode:!0,is4K:!0,isPremium:!1},{id:9,title:"Dasara",image:"https://i.ibb.co/0yNL8Vt/dasara.jpg",isNewEpisode:!1,is4K:!0,isPremium:!0},{id:10,title:"Adipurush",image:"https://i.ibb.co/xSQJzRk/adipurush.jpg",isNewEpisode:!1,is4K:!0,isPremium:!0},{id:11,title:"Skanda: The Attacker",image:"https://i.ibb.co/0jZ3zKf/skanda.jpg",isNewEpisode:!0,is4K:!0,isPremium:!0},{id:12,title:"Bhagavanth Kesari",image:"https://i.ibb.co/Xy0Lq8Y/bhagavanth-kesari.jpg",isNewEpisode:!1,is4K:!0,isPremium:!0},{id:13,title:"Tiger Nageswara Rao",image:"https://i.ibb.co/VqwL9Yw/tiger-nageswara-rao.jpg",isNewEpisode:!0,is4K:!0,isPremium:!1},{id:14,title:"MAD: Mad About Dance",image:"https://i.ibb.co/k5v7L2B/mad.jpg",isNewEpisode:!1,is4K:!0,isPremium:!0},{id:15,title:"Leo",image:"https://i.ibb.co/Jy8MVSG/leo.jpg",isNewEpisode:!0,is4K:!0,isPremium:!0}],webSeries:[{id:30,title:"Panchayat: Season 2",image:"https://i.ibb.co/YWBhRtZ/panchayat.jpg",isWebSeries:!0,isNewEpisode:!0},{id:31,title:"Criminal Justice: Season 3",image:"https://i.ibb.co/XZDGvnZ/criminal-justice.jpg",isWebSeries:!0,isPremium:!0},{id:32,title:"Mirzapur: Season 2",image:"https://i.ibb.co/ZXQKVy3/mirzapur.jpg",isWebSeries:!0,is4K:!0},{id:1,title:"Kudi Yedamaithe",image:"https://i.ibb.co/mD3jpgP/kudi-yedamaithe.jpg",isNewEpisode:!0,is4K:!0,isPremium:!0,hasClosedCaptioning:!0},{id:2,title:"Suzhal: The Vortex",image:"https://i.ibb.co/VCqfhCk/suzhal.jpg",isNewEpisode:!1,is4K:!0,isPremium:!0,hasClosedCaptioning:!0},{id:3,title:"Modern Love Hyderabad",image:"https://i.ibb.co/JkCJmZY/modern-love.jpg",isNewEpisode:!0,is4K:!0,isPremium:!1,hasClosedCaptioning:!0},{id:4,title:"Rana Naidu: Season 1",image:"https://i.ibb.co/Kj8B0cz/rana-naidu.jpg",isNewEpisode:!1,is4K:!0,isPremium:!0,hasClosedCaptioning:!0},{id:5,title:"Farzi",image:"https://i.ibb.co/ZhKR6T1/farzi.jpg",isNewEpisode:!0,is4K:!0,isPremium:!0,hasClosedCaptioning:!0}],canScrollLeft:!1,canScrollRight:!0}},created(){this.fetchRecentlyAdded()},mounted(){this.checkScrollButtons(),this.$refs.scrollContainer?.addEventListener("scroll",this.checkScrollButtons)},beforeUnmount(){this.$refs.scrollContainer?.removeEventListener("scroll",this.checkScrollButtons)},methods:{capitalizeText(e){return e?e.split(/[\s-]+/).map((e=>{const t=["HD","UHD","4K","TV","II","III","IV","SPY"];if(t.includes(e.toUpperCase()))return e.toUpperCase();const s=["a","an","the","and","but","or","for","nor","in","to","on","at","by","of"];return s.includes(e.toLowerCase())?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" "):""},async fetchRecentlyAdded(){try{const e=await C.A.get("http://192.168.0.104:8000/api/videos/?limit=15&ordering=-created_at");e.data&&(this.recentlyAdded=e.data.map((e=>({id:e.id,title:this.capitalizeText(e.title),image:e.portrait_thumbnail_url||e.thumbnail_url,isNewEpisode:this.isNewVideo(e.created_at),is4K:e.is_4k||!1,isPremium:e.is_premium||!1,description:this.capitalizeText(e.description)}))))}catch(e){console.error("Error fetching recently added videos:",e)}},isNewVideo(e){const t=new Date(e),s=new Date,a=Math.ceil((s-t)/864e5);return a<=7},toggleSearch(){this.isSearchActive=!this.isSearchActive},toggleMenu(){this.isMenuOpen=!this.isMenuOpen},scrollContent(e){const t=this.$refs.scrollContainer;if(!t)return;const s=.8*t.clientWidth;t.scrollBy({left:"left"===e?-s:s,behavior:"smooth"})},checkScrollButtons(){const e=this.$refs.scrollContainer;e&&(this.canScrollLeft=e.scrollLeft>0,this.canScrollRight=e.scrollLeft<e.scrollWidth-e.clientWidth)}}};const Pa=(0,I.A)(Ea,[["render",Z],["__scopeId","data-v-519a5650"]]);var _a=Pa,Ma="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARMAAAC3CAMAAAAGjUrGAAAAllBMVEX/aCAEajj/////YwgAZS0HA40AAIsAAIgAAIMAAIYAAH8AAIEAAHv19foEAI0AAHrY2Or7+/7q6vTT0+dVVKfy8fnh4e5sa7C+vttiYaxmZa6DgrzIyODDw96wr9OlpNB6ebdbWqlPTqQ/Pp1xcLO2ttaRkMNFRJ8hH5SXlsUUEpCgn8s0MpqJib8SDpOpqdAsKphOTKgOf8qvAAAFUklEQVR4nO2ba1fqOBSGnczQpOmFXugFGqAgFQEF/f9/bnYKnuNy64fzJXHG91nLLNLqWuFxd++kae/uAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP6Qv8FH7gT4CJxwvoOTpBweumbRdA9DmfgejPgGTrKHpzCUUgZBQG0YPj1kvofk10m+flQySCe/SQOpHk+511F5dfIgZTpqCCZSKSUnwSgolfLBpxWPTobAGpnI8Ol5r1dVXa30/vkplDZaZDD4G5g3J8lMkRFKIocqEclSiFKIJX2qDpRayIqaeUu3vpxkKcVDoJqNzIUZj6zG1ohcbhpFVmTqK9l6cjLYIJH35dhpx4hY2yZpxyPlvbSh4un68eNkRUrSYCGKyvaKMUT68URh26oQC0q2qVp5GZ0XJzZKgiDqbsEh5rZ5/fXJHu0iyiqeIsWHk9IqeUxsSNRjJGzsxXOmn2Rju6uamiJ5tFJKD+Pz4CQJrJL62mmsjoMNh5B+hoM931xP1VZK4KH6eHCypa+aJrc6U8+oMdTkiqZpM1uCZlddg0hSkrd1P0D3TlYhFeGIkms3djdUaRKdi0pXItcUFe14/dizVUQlOXSfZ507yWnyKhfWR761E/gionYyiEIXYpjQ0aj4da5bSJrSOp/mO3fyTKua/fVjcrZff7GgrDITdVyLWXPtiuJcXX9lTyuhZ9dDdO0kCVMqJsW1U4c0VS2mS7HWeanLXK/FckrnsvCWgQsqUWnoOs26dnKgMNmJYn390mVMC51GilK3RptWl0JSqCzjawUu1oXYUaAcHI/RtZMzlRJbay+7MVba6YUySiPUfBkt50o0lE0u03GCX+wu1DZUpM6Ox+jYSamokqT2U/W6sFZO02cSUd4fKU6O9yXpeZ6e6HjR7MeUklKVcj1xc+ykkxP5dhdtiBqy0ummimaDynQWDbOo2unOxkh0m9XnJ/qLzu0gHTs5pu9qa7KZ0hW00H0bZ8qERmVx22taGe6mm1951Sblo9tBunVSKSrEiVne6o5ow2hX9fHQd505mq7rh5j6Udi+/f7SJFSOVeV0lG6dmHCsIslqvjlcty2aSLVDnL2U/WtfvmTxsFTRwkZSXp7m80s1VqrQOB2lWycXqsTjDJW0bPW5WZei3MZ99nSSMpDy9JT18ZaOXXZHvV+N0hJaHsmL01G6dUIpdqLf/unJMNNa7duseznZ226TVJ1e+qzdK623w1tCMXriOsm6dWJnYO9vE+XD/KhUV8rrFk8qy05F5/nwfokzjLM8l7h1sgl+z9TzqqhLY5aZMb287XjJ3hjqG1MX1ZsXKjzBxuko3TqZkZOiXK2716NUkY61jujyOd4HNyfB62M4HotjrcLJ/e60MjU5mTkdpfc4MSxOlsaUPyhOkE84n9ad+mfXnS/nJ+sv5yf5/31+gnksB+udT6B1cfj1urj+Yl386HaQuH/CwX02zje6H2t+6P1Y3Lf/BOzvfAL2ATnjfvH83X6x+rBfrN7tF89/xn6xWKk/eq7Aw/NbeP6Eg+eUOHiejYPnHjl4PpaD56g5eN6eg/cyOHh/h/Nd3/PyOSy8D8jBe6Mc704E3i/+LwAnnLt/wEfu/gIfgRMOnHDghAMnHDjhwAkHTjhwwoETDpxw4IQDJxw44cAJB044cMKBEw6ccOCEAyccOOHACQdOOHDCgRMOnHDghAMnHDjhwAkHTjhwwoETDpxw4IQDJxw44cAJB044cMKBEw6ccOCEAyccOOHACQdOOHDCgRMOnHDghAMnHDjhwAkHTjhwwoETDpxw4ITzL675QprvfCfbAAAAAElFTkSuQmCC";const Aa={class:"min-h-screen bg-[#121212] flex items-center justify-center px-4"},Ta={class:"w-full max-w-md"},Va={class:"space-y-6"},Ia={key:0},Da={key:0,class:"pr-4 text-[#4CAF50]"},Ra={key:0,class:"mt-2 text-[#ff4d4d] text-sm flex items-center"},$a={key:1,class:"space-y-4"},Fa={class:"text-center"},Xa={class:"text-white/60 text-sm"},ja={class:"flex flex-col items-center"},Na={class:"flex justify-center space-x-4 my-8"},Ua=["onUpdate:modelValue","onInput","onKeydown","id"],Ba={key:0,class:"mt-2 text-[#ff4d4d] text-sm flex items-center"},Oa={class:"text-center"},Qa={class:"text-white/60 text-sm"},Wa=["disabled"],Ka=["disabled"],qa={key:0},za={key:1,class:"flex items-center justify-center"},Ha={key:2,class:"mt-6"},Ja={class:"flex items-start space-x-3 bg-[#1d1d1d] p-4 rounded-lg border border-white/10"},Ga={class:"flex-shrink-0 mt-1"},Ya={class:"flex-grow"},Za={for:"terms-consent",class:"block text-white/80 text-sm leading-relaxed cursor-pointer"},ei={key:0,class:"mt-2 text-[#ff4d4d] text-sm flex items-center"};function ti(e,t,s,o,r,l){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Aa,[r.showOTP?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[0]||(t[0]=(...e)=>l.handleBack&&l.handleBack(...e)),class:"absolute top-6 left-6 text-white/70 hover:text-white"},t[11]||(t[11]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)]))):((0,i.uX)(),(0,i.Wv)(n,{key:0,to:"/",class:"absolute top-6 left-6 text-white/70 hover:text-white"},{default:(0,i.k6)((()=>t[10]||(t[10]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)]))),_:1,__:[10]})),(0,i.Lk)("div",Ta,[t[24]||(t[24]=(0,i.Lk)("div",{class:"text-center mb-12"},[(0,i.Lk)("img",{src:ee,alt:"Logo",class:"h-12 mx-auto mb-8"}),(0,i.Lk)("h1",{class:"text-[2.5rem] font-bold text-white leading-tight"},[(0,i.eW)(" LET'S GET STARTED"),(0,i.Lk)("span",{class:"text-[#c30059]"},".")])],-1)),(0,i.Lk)("div",Va,[r.showOTP?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ia,[t[15]||(t[15]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},"Mobile Number",-1)),(0,i.Lk)("div",{class:(0,d.C4)(["flex items-center bg-[#1d1d1d] rounded-lg overflow-hidden",l.phoneInputStyle])},[t[13]||(t[13]=(0,i.Lk)("div",{class:"flex items-center px-3 border-r border-white/10 h-14"},[(0,i.Lk)("img",{src:Ma,alt:"India",class:"w-6 h-4"}),(0,i.Lk)("span",{class:"text-white ml-2"},"+91")],-1)),(0,i.bo)((0,i.Lk)("input",{type:"tel","onUpdate:modelValue":t[1]||(t[1]=e=>r.phoneNumber=e),class:(0,d.C4)(["flex-1 bg-transparent text-white h-14 px-4 focus:outline-none",{"shake-animation":r.showPhoneError,"text-[#4CAF50]":10===r.phoneNumber.length&&!r.phoneError}]),placeholder:"Enter your mobile number",maxlength:"10",onInput:t[2]||(t[2]=(...e)=>l.handlePhoneInput&&l.handlePhoneInput(...e))},null,34),[[a.Jo,r.phoneNumber]]),10!==r.phoneNumber.length||r.phoneError?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Da,t[12]||(t[12]=[(0,i.Lk)("i",{class:"fas fa-check-circle"},null,-1)])))],2),(0,i.bF)(a.eB,{name:"fade"},{default:(0,i.k6)((()=>[r.phoneError?((0,i.uX)(),(0,i.CE)("p",Ra,[t[14]||(t[14]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),(0,i.eW)(" "+(0,d.v_)(r.phoneError),1)])):(0,i.Q3)("",!0)])),_:1})])),r.showOTP?((0,i.uX)(),(0,i.CE)("div",$a,[(0,i.Lk)("div",Fa,[t[16]||(t[16]=(0,i.Lk)("h2",{class:"text-white text-xl font-medium mb-2"},"Enter Verification Code",-1)),(0,i.Lk)("p",Xa,[(0,i.eW)(" We've sent a 4-digit code to +91 "+(0,d.v_)(r.phoneNumber)+" ",1),(0,i.Lk)("button",{onClick:t[3]||(t[3]=e=>r.showOTP=!1),class:"text-[#c30059] ml-2 hover:text-[#ff4d4d]"}," Change ")])]),(0,i.Lk)("div",ja,[(0,i.Lk)("div",Na,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(4,((e,s)=>(0,i.bo)((0,i.Lk)("input",{key:s,type:"text","onUpdate:modelValue":e=>r.otpDigits[s]=e,onInput:e=>l.handleOtpInput(e,s),onKeydown:e=>l.handleKeydown(e,s),onPaste:t[4]||(t[4]=(...e)=>l.handlePaste&&l.handlePaste(...e)),maxlength:"1",inputmode:"numeric",autocomplete:"one-time-code",id:0===s?"otp-input":"",class:(0,d.C4)(["w-14 h-14 bg-[#1d1d1d] border rounded-lg text-center text-white text-2xl font-medium focus:outline-none transition-all",r.otpError?"border-[#ff4d4d] shake-animation":"border-white/10 focus:border-[#c30059]"]),ref_for:!0,ref:"otpInput"+s},null,42,Ua),[[a.Jo,r.otpDigits[s]]]))),64))]),(0,i.bF)(a.eB,{name:"fade"},{default:(0,i.k6)((()=>[r.otpError?((0,i.uX)(),(0,i.CE)("p",Ba,[t[17]||(t[17]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),(0,i.eW)(" "+(0,d.v_)(r.otpError),1)])):(0,i.Q3)("",!0)])),_:1})]),(0,i.Lk)("div",Oa,[(0,i.Lk)("p",Qa,[t[18]||(t[18]=(0,i.eW)(" Didn't receive the code? ")),(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>l.resendOTP&&l.resendOTP(...e)),disabled:r.resendTimer>0,class:"text-[#c30059] ml-1 hover:text-[#ff4d4d] disabled:opacity-50"},(0,d.v_)(r.resendTimer>0?`Resend in ${r.resendTimer}s`:"Resend"),9,Wa)])])])):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.handleLogin&&l.handleLogin(...e)),disabled:r.isLoading,class:"w-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white py-4 rounded-lg font-medium text-lg hover:opacity-90 transition-opacity disabled:opacity-50 relative"},[r.isLoading?((0,i.uX)(),(0,i.CE)("span",za,t[19]||(t[19]=[(0,i.Lk)("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[(0,i.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,i.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),(0,i.eW)(" Verifying... ")]))):((0,i.uX)(),(0,i.CE)("span",qa,(0,d.v_)(r.showOTP?"Verify":"Proceed"),1))],8,Ka),r.showOTP?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ha,[(0,i.Lk)("div",Ja,[(0,i.Lk)("div",Ga,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"terms-consent","onUpdate:modelValue":t[7]||(t[7]=e=>r.termsAccepted=e),class:"w-4 h-4 rounded border-white/30 bg-transparent checked:bg-[#c30059] checked:border-[#c30059] focus:ring-[#c30059] focus:ring-offset-0 focus:ring-offset-transparent transition-all cursor-pointer"},null,512),[[a.lH,r.termsAccepted]])]),(0,i.Lk)("div",Ya,[(0,i.Lk)("label",Za,[t[20]||(t[20]=(0,i.eW)(" I agree to the ")),(0,i.Lk)("a",{onClick:t[8]||(t[8]=(0,a.D$)((e=>r.showTermsModal=!0),["prevent"])),href:"#",class:"text-[#c30059] hover:text-[#ff4d4d] underline decoration-dotted underline-offset-2 font-medium transition-colors"}," Terms & Conditions "),t[21]||(t[21]=(0,i.eW)(" and ")),(0,i.Lk)("a",{onClick:t[9]||(t[9]=(0,a.D$)((e=>r.showPrivacyModal=!0),["prevent"])),href:"#",class:"text-[#c30059] hover:text-[#ff4d4d] underline decoration-dotted underline-offset-2 font-medium transition-colors"}," Privacy Policy ")]),t[22]||(t[22]=(0,i.Lk)("p",{class:"mt-1 text-white/50 text-xs"}," Your privacy matters to us. Read how we handle your data. ",-1))])]),r.showTermsError?((0,i.uX)(),(0,i.CE)("p",ei,t[23]||(t[23]=[(0,i.Lk)("i",{class:"fas fa-exclamation-circle mr-2"},null,-1),(0,i.eW)(" Please accept the terms to continue ")]))):(0,i.Q3)("",!0)]))])])])}s(1148);var si={name:"LoginPage",data(){return{phoneNumber:"",phoneError:"",showPhoneError:!1,showCookieNotice:!0,showOTP:!1,otpDigits:["","","",""],resendTimer:0,timerInterval:null,termsAccepted:!1,showTermsError:!1,showTermsModal:!1,showPrivacyModal:!1,isLoading:!1,apiBaseUrl:"http://192.168.0.104:8000",referralCode:"",otpError:"",smsReceiver:null}},methods:{getCSRFToken(){const e="csrftoken";let t=null;if(document.cookie&&""!==document.cookie){const s=document.cookie.split(";");for(let a=0;a<s.length;a++){const i=s[a].trim();if(i.substring(0,e.length+1)===e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t},validatePhoneNumber(){let e=this.phoneNumber.replace(/\D/g,"");return e.startsWith("91")&&(e=e.substring(2)),this.phoneNumber=e,0===e.length?(this.phoneError="",!1):10!==e.length?(this.phoneError=e.length>0?"Please enter a valid 10-digit mobile number":"",!1):/^[6-9]\d{9}$/.test(e)?(this.phoneError="",!0):(this.phoneError="Please enter a valid Indian mobile number",!1)},handlePhoneInput(e){let t=e.target.value.replace(/\D/g,"");t.startsWith("91")&&(t=t.substring(2)),t.length>10&&(t=t.substring(0,10)),this.phoneNumber=t,this.validatePhoneNumber()},async handleLogin(){if(this.showOTP){const a=this.otpDigits.join("");if(4===a.length)try{this.isLoading=!0,this.otpError="";const s=await fetch(`${this.apiBaseUrl}/users/users/login/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":this.getCSRFToken()},credentials:"include",mode:"cors",body:JSON.stringify({phone:this.phoneNumber,otp:a,ref:this.referralCode})});if(!s.ok){const t=await s.text();let a;try{const e=JSON.parse(t);a=e.message||"Invalid OTP"}catch(e){a="Invalid OTP. Please try again."}throw new Error(a)}const i=await s.json();localStorage.setItem("user",JSON.stringify(i.user)),localStorage.setItem("csrfToken",i.csrf_token),localStorage.setItem("phone",this.phoneNumber),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("token",i.csrf_token);const o=i.user;if(o.first_name&&o.email&&o.state&&o.district){const e=o.first_name||"User";localStorage.setItem("loginSuccess","true"),localStorage.setItem("loginMessage",`Welcome back, ${e}! 👋`),await this.$router.push("/")}else try{await this.$router.push({path:"/register",query:{phone:this.phoneNumber,token:i.csrf_token,ref:this.referralCode}})}catch(t){console.error("Navigation error:",t),window.location.href=`/register?phone=${this.phoneNumber}&token=${i.csrf_token}&ref=${this.referralCode}`}}catch(s){console.error("Login Error:",s),this.otpError=s.message;const e=Array.from({length:4},((e,t)=>this.$refs["otpInput"+t][0]));e.forEach((e=>{e.classList.add("shake-animation"),setTimeout((()=>e.classList.remove("shake-animation")),650)})),this.otpDigits=["","","",""],this.$refs.otpInput0[0].focus()}finally{this.isLoading=!1}}else{if(this.phoneError="",this.showTermsError=!1,!this.validatePhoneNumber()){this.showPhoneError=!0;const e=document.querySelector('input[type="tel"]');return e.classList.add("shake-animation"),void setTimeout((()=>{this.showPhoneError=!1,e.classList.remove("shake-animation")}),650)}if(!this.termsAccepted){this.showTermsError=!0;const e=document.querySelector("#terms-consent").parentElement.parentElement;return e.classList.add("shake-animation"),void setTimeout((()=>{e.classList.remove("shake-animation")}),650)}try{this.isLoading=!0;const t=await fetch(`${this.apiBaseUrl}/users/request-otp/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":this.getCSRFToken()},credentials:"include",mode:"cors",body:JSON.stringify({phone:this.phoneNumber,otp_type:"login"})});if(!t.ok){const s=await t.text();let a;try{const e=JSON.parse(s);a=e.message||"Failed to send OTP"}catch(e){a="Server error. Please try again."}throw new Error(a)}await t.json(),this.showOTP=!0,this.startOTPDetection(),this.startResendTimer(),this.$nextTick((()=>{const e=this.$refs.otpInput0[0];e.focus(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&e.click()}))}catch(s){console.error("Error requesting OTP:",s),this.phoneError=s.message||"Network error. Please check your connection.",this.showPhoneError=!0}finally{this.isLoading=!1}}},async resendOTP(){if(!(this.resendTimer>0))try{this.isLoading=!0,await fetch(`${this.apiBaseUrl}/users/request-otp/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":this.getCSRFToken()},credentials:"include",mode:"cors",body:JSON.stringify({phone:this.phoneNumber,otp_type:"login"})}),this.startResendTimer(),this.otpDigits=["","","",""],this.otpError="",this.$refs.otpInput0[0].focus()}catch(e){console.error("Error resending OTP:",e),this.otpError="Failed to resend OTP. Please try again."}finally{this.isLoading=!1}},handleOtpInput(e,t){this.clearOtpError();const s=e.target.value;/^\d*$/.test(s)?(this.otpDigits[t]=s,s&&t<3&&this.$refs["otpInput"+(t+1)][0].focus(),this.otpDigits.every((e=>""!==e))&&setTimeout((()=>{this.handleLogin()}),300)):e.target.value=""},handleKeydown(e,t){"Backspace"===e.key&&!this.otpDigits[t]&&t>0&&this.$refs["otpInput"+(t-1)][0].focus()},handlePaste(e){e.preventDefault();const t=e.clipboardData.getData("text"),s=t.match(/\d/g);if(s){this.otpDigits=["","","",""],s.slice(0,4).forEach(((e,t)=>{t<4&&(this.otpDigits[t]=e,this.$refs["otpInput"+t]&&(this.$refs["otpInput"+t][0].value=e))}));const e=this.otpDigits.findIndex((e=>!e)),t=-1===e?3:e;this.$refs["otpInput"+t][0].focus(),this.otpDigits.every((e=>""!==e))&&setTimeout((()=>{this.handleLogin()}),300)}},setupSMSRetrieval(){try{if(!this.smsReceiver&&"OTPCredential"in window){const e=new AbortController;navigator.credentials.get({otp:{transport:["sms"]},signal:e.signal}).then((e=>{if(e&&e.code){const t=e.code;for(let e=0;e<Math.min(t.length,4);e++)this.otpDigits[e]=t[e],this.$refs["otpInput"+e]&&(this.$refs["otpInput"+e][0].value=t[e]);this.otpDigits.every((e=>""!==e))&&setTimeout((()=>this.handleLogin()),300)}})).catch((e=>{console.log("SMS Retrieval Error:",e)})),this.smsReceiver=e}}catch(e){console.log("SMS Setup Error:",e)}},startOTPDetection(){this.smsReceiver&&(this.smsReceiver.abort(),this.smsReceiver=null),this.setupSMSRetrieval();const e=document.getElementById("otp-input");e&&e.addEventListener("focus",(()=>{"OTPCredential"in window&&navigator.credentials.get({otp:{transport:["sms"]},signal:this.smsReceiver?.signal}).catch((()=>{}))}))},startResendTimer(){this.resendTimer=30,this.timerInterval=setInterval((()=>{this.resendTimer>0?this.resendTimer--:clearInterval(this.timerInterval)}),1e3)},closeCookieNotice(){this.showCookieNotice=!1},handleBack(){this.showOTP=!1,this.otpDigits=["","","",""],this.timerInterval&&(clearInterval(this.timerInterval),this.resendTimer=0)},beforeDestroy(){this.smsReceiver&&(this.smsReceiver.abort(),this.smsReceiver=null),this.timerInterval&&clearInterval(this.timerInterval)},clearOtpError(){this.otpError=""}},beforeUnmount(){this.timerInterval&&clearInterval(this.timerInterval)},async created(){console.log("Component created - Starting initialization");try{this.phoneNumber=this.$route.query.phone||localStorage.getItem("phone")||"";const e=this.$route.query.token||localStorage.getItem("token")||localStorage.getItem("csrfToken")||localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")).token;console.log("Initial token:",e),this.$route.query.phone&&!this.phoneNumber&&(console.error("Invalid phone number"),this.phoneError="Invalid phone number. Please try again."),this.$route.query.token&&!e&&(console.error("Invalid token"),this.phoneError="Authentication failed. Please try again."),e&&localStorage.setItem("token",e);const t=new URLSearchParams(window.location.search);this.referralCode=t.get("ref")||"",this.phoneNumber&&this.validatePhoneNumber()}catch(e){console.error("Error in component creation:",e),"Failed to fetch"!==e.message&&console.error("Unexpected error:",e)}},watch:{phoneNumber:{handler(e){e?this.validatePhoneNumber():this.phoneError=""},immediate:!0}},computed:{phoneInputStyle(){return 10!==this.phoneNumber.length||this.phoneError?this.phoneError?"border-[#ff4d4d]":"border-white/10":"border-[#4CAF50] text-[#4CAF50]"}}};const ai=(0,I.A)(si,[["render",ti],["__scopeId","data-v-62823ed0"]]);var ii=ai;const oi={class:"min-h-screen bg-[#121212] text-white"},ri={class:"px-4 py-6 flex justify-between items-center"},li={class:"max-w-7xl mx-auto px-4 py-8 pb-32 sm:pb-8"},ni={class:"max-w-md mx-auto mb-24 sm:mb-0"},ci={class:"bg-[#1d1d1d] rounded-2xl overflow-hidden border border-[#c30059]/20 hover:border-[#c30059]/40 transition-all"},di={class:"p-6"},ui={class:"mt-6 border-t border-white/10 pt-6"},hi={class:"grid grid-cols-1 gap-4"},mi={key:0,class:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50"},pi={class:"bg-[#1d1d1d] rounded-xl w-full max-w-md p-6"},fi={class:"flex justify-between items-center mb-6"},gi={class:"space-y-4"},vi={key:0,class:"mt-2 text-sm text-red-500"},bi=["disabled"],yi={class:"fixed bottom-0 left-0 right-0 p-4 bg-[#121212]/95 backdrop-blur-md border-t border-white/10 md:hidden z-40"},ki={class:"grid grid-cols-2 gap-2"};function wi(e,t,s,o,r,l){const n=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",oi,[(0,i.Lk)("div",ri,[(0,i.bF)(n,{to:"/",class:"flex items-center gap-2 text-white/80 hover:text-white"},{default:(0,i.k6)((()=>t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,i.Lk)("span",null,"Choose a Plan",-1)]))),_:1,__:[8]})]),(0,i.Lk)("div",li,[(0,i.Lk)("div",ni,[(0,i.Lk)("div",ci,[(0,i.Lk)("div",di,[t[15]||(t[15]=(0,i.Fv)('<div class="flex items-center gap-3 mb-4" data-v-9427a564><div class="w-12 h-12 rounded-full bg-gradient-to-r from-[#c30059] to-[#7c1d44] flex items-center justify-center" data-v-9427a564><i class="fas fa-calendar-check text-2xl text-white" data-v-9427a564></i></div><div data-v-9427a564><h3 class="text-2xl font-bold" data-v-9427a564>Premium 365</h3><p class="text-sm text-white/60" data-v-9427a564>1 Year Entertainment</p></div></div><div class="bg-[#c30059]/10 rounded-lg p-4 mb-6" data-v-9427a564><div class="flex items-baseline gap-2" data-v-9427a564><span class="text-3xl font-bold text-[#c30059]" data-v-9427a564>₹365</span><span class="text-sm text-[#c30059]" data-v-9427a564>/365 days</span></div><p class="text-sm text-white/60 mt-1" data-v-9427a564>Just ₹1 per day</p></div><div class="space-y-4 mb-6" data-v-9427a564><div class="flex items-start gap-3" data-v-9427a564><i class="fas fa-tv text-[#c30059] mt-1" data-v-9427a564></i><div data-v-9427a564><p class="font-medium" data-v-9427a564>Watch on 2 Devices</p><p class="text-sm text-white/60" data-v-9427a564>Stream on TV &amp; Mobile</p></div></div><div class="flex items-start gap-3" data-v-9427a564><i class="fas fa-fire text-[#c30059] mt-1" data-v-9427a564></i><div data-v-9427a564><p class="font-medium" data-v-9427a564>Trending Videos</p><p class="text-sm text-white/60" data-v-9427a564>Latest &amp; Popular Content</p></div></div><div class="flex items-start gap-3" data-v-9427a564><i class="fas fa-star text-[#c30059] mt-1" data-v-9427a564></i><div data-v-9427a564><p class="font-medium" data-v-9427a564>Popular Shows</p><p class="text-sm text-white/60" data-v-9427a564>Binge-worthy Series</p></div></div><div class="flex items-start gap-3" data-v-9427a564><i class="fas fa-film text-[#c30059] mt-1" data-v-9427a564></i><div data-v-9427a564><p class="font-medium" data-v-9427a564>No.1 Originals</p><p class="text-sm text-white/60" data-v-9427a564>Exclusive Content</p></div></div></div>',3)),(0,i.Lk)("div",ui,[t[11]||(t[11]=(0,i.Lk)("h4",{class:"text-lg font-semibold mb-4"},"Select Payment Method",-1)),(0,i.Lk)("div",hi,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.handlePaymentGateway&&o.handlePaymentGateway(...e)),class:"bg-[#1a1a1a] p-4 rounded-lg border border-white/10 hover:border-[#c30059] transition-colors flex items-center justify-between group"},t[9]||(t[9]=[(0,i.Fv)('<div class="flex items-center gap-3" data-v-9427a564><div class="w-10 h-10 rounded-full bg-[#c30059]/10 flex items-center justify-center group-hover:bg-[#c30059]/20" data-v-9427a564><i class="fas fa-credit-card text-[#c30059]" data-v-9427a564></i></div><div class="text-left" data-v-9427a564><p class="font-medium" data-v-9427a564>Pay Online</p><p class="text-sm text-white/60" data-v-9427a564>Credit/Debit Card, UPI, Net Banking</p></div></div><i class="fas fa-chevron-right text-white/40 group-hover:text-[#c30059]" data-v-9427a564></i>',2)])),(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>o.showCodeInput=!0),class:"bg-[#1a1a1a] p-4 rounded-lg border border-white/10 hover:border-[#c30059] transition-colors flex items-center justify-between group"},t[10]||(t[10]=[(0,i.Fv)('<div class="flex items-center gap-3" data-v-9427a564><div class="w-10 h-10 rounded-full bg-[#c30059]/10 flex items-center justify-center group-hover:bg-[#c30059]/20" data-v-9427a564><i class="fas fa-ticket-alt text-[#c30059]" data-v-9427a564></i></div><div class="text-left" data-v-9427a564><p class="font-medium" data-v-9427a564>Use Code</p><p class="text-sm text-white/60" data-v-9427a564>Redeem subscription code</p></div></div><i class="fas fa-chevron-right text-white/40 group-hover:text-[#c30059]" data-v-9427a564></i>',2)]))])]),o.showCodeInput?((0,i.uX)(),(0,i.CE)("div",mi,[(0,i.Lk)("div",pi,[(0,i.Lk)("div",fi,[t[13]||(t[13]=(0,i.Lk)("h3",{class:"text-xl font-bold"},"Enter Subscription Code",-1)),(0,i.Lk)("button",{onClick:t[2]||(t[2]=e=>o.showCodeInput=!1),class:"text-white/60 hover:text-white"},t[12]||(t[12]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,i.Lk)("div",gi,[(0,i.Lk)("div",null,[t[14]||(t[14]=(0,i.Lk)("label",{class:"block text-sm text-white/60 mb-2"},"Subscription Code",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.subscriptionCode=e),type:"text",class:"w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors uppercase",placeholder:"Enter your code",onInput:t[4]||(t[4]=(...e)=>o.validateCode&&o.validateCode(...e))},null,544),[[a.Jo,o.subscriptionCode]]),o.codeError?((0,i.uX)(),(0,i.CE)("p",vi,(0,d.v_)(o.codeError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>o.handleCodeSubmit&&o.handleCodeSubmit(...e)),disabled:!o.isValidCode,class:"w-full py-3 px-6 bg-gradient-to-r from-[#c30059] to-[#7c1d44] text-white font-bold rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed"}," Activate Subscription ",8,bi)])])])):(0,i.Q3)("",!0)])])]),t[16]||(t[16]=(0,i.Fv)('<div class="mt-16 mb-24 md:mb-8" data-v-9427a564><h2 class="text-2xl font-bold mb-8 text-center" data-v-9427a564>Frequently Asked Questions</h2><div class="max-w-3xl mx-auto space-y-4 pb-20 md:pb-0" data-v-9427a564><div class="bg-[#1d1d1d] rounded-lg p-4" data-v-9427a564><button class="flex items-center justify-between w-full text-left" data-v-9427a564><span class="font-semibold" data-v-9427a564>What payment methods do you accept?</span><i class="fas fa-chevron-down text-[#c30059]" data-v-9427a564></i></button></div><div class="bg-[#1d1d1d] rounded-lg p-4" data-v-9427a564><button class="flex items-center justify-between w-full text-left" data-v-9427a564><span class="font-semibold" data-v-9427a564>Can I cancel my subscription anytime?</span><i class="fas fa-chevron-down text-[#c30059]" data-v-9427a564></i></button></div><div class="bg-[#1d1d1d] rounded-lg p-4" data-v-9427a564><button class="flex items-center justify-between w-full text-left" data-v-9427a564><span class="font-semibold" data-v-9427a564>How many devices can I watch on simultaneously?</span><i class="fas fa-chevron-down text-[#c30059]" data-v-9427a564></i></button></div></div></div>',1))]),(0,i.Lk)("div",yi,[t[19]||(t[19]=(0,i.Fv)('<div class="flex items-center justify-between mb-2" data-v-9427a564><div data-v-9427a564><p class="text-sm text-white/60" data-v-9427a564>Selected Plan</p><p class="font-bold text-[#c30059]" data-v-9427a564>Premium 365</p></div><div class="text-right" data-v-9427a564><p class="text-sm text-white/60" data-v-9427a564>Total Amount</p><p class="font-bold text-[#c30059]" data-v-9427a564>₹365</p></div></div>',1)),(0,i.Lk)("div",ki,[(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>o.handlePaymentGateway&&o.handlePaymentGateway(...e)),class:"py-3 px-4 bg-gradient-to-r from-[#c30059] to-[#7c1d44] text-white font-bold rounded-lg hover:opacity-90 transition-opacity flex items-center justify-center gap-2"},t[17]||(t[17]=[(0,i.Lk)("i",{class:"fas fa-credit-card"},null,-1),(0,i.Lk)("span",null,"Pay Online",-1)])),(0,i.Lk)("button",{onClick:t[7]||(t[7]=e=>o.showCodeInput=!0),class:"py-3 px-4 bg-[#1a1a1a] text-white font-bold rounded-lg hover:bg-[#252525] transition-colors flex items-center justify-center gap-2 border border-white/10"},t[18]||(t[18]=[(0,i.Lk)("i",{class:"fas fa-ticket-alt"},null,-1),(0,i.Lk)("span",null,"Use Code",-1)]))])])])}var xi={name:"SubscriptionPlans",setup(){const e=(0,S.Pj)(),t=(0,q.rd)(),s=(0,$s.KR)(!1),a=(0,$s.KR)(!1),o=(0,$s.KR)(""),r=(0,$s.KR)(""),l=(0,$s.KR)(!1),n={id:"premium_365",name:"Premium 365",price:365,duration:365},c=(0,$s.KR)(n),d=(0,i.EW)((()=>e.getters.isAuthenticated)),u=(0,i.EW)((()=>e.getters.currentUser)),h=(0,i.EW)((()=>e.getters.token));(0,i.sV)((()=>{e.dispatch("initializeStore");const t=new URLSearchParams(window.location.search),s=t.get("plan");if(s){const e={...n};e.id=s,c.value=e}}));const m=async()=>{try{if(console.log("Payment gateway initiated"),console.log("Auth status:",d.value),console.log("User:",u.value),console.log("Token:",h.value),!d.value||!u.value||!h.value)return console.log("User not authenticated or missing token, redirecting to login"),void t.push({path:"/login",query:{redirect:"/plans",plan:c.value.id}});C.A.defaults.headers.common["Authorization"]=`Bearer ${h.value}`,e.commit("setLoading",!0),console.log("Creating order for plan:",c.value);try{const s=await C.A.post("/api/payment/create-order/",{amount:c.value.price,currency:"INR",plan_id:c.value.id});if(console.log("Order created:",s.data),e.commit("setLoading",!1),!s.data||!s.data.key_id)throw new Error("Invalid order response from server");const a={key:s.data.key_id,amount:s.data.amount,currency:s.data.currency,name:"No1 OTT",description:`${c.value.name} Subscription`,order_id:s.data.order_id,prefill:{name:u.value?.first_name||"",email:u.value?.email||"",contact:u.value?.phone||""},theme:{color:"#c30059"},handler:async s=>{try{e.commit("setLoading",!0),console.log("Payment successful, verifying:",s);const a=await C.A.post("/api/payment/verify-payment/",{razorpay_payment_id:s.razorpay_payment_id,razorpay_order_id:s.razorpay_order_id,razorpay_signature:s.razorpay_signature,plan_id:c.value.id,phone:u.value.phone});if("success"!==a.data.status)throw new Error("Payment verification failed");e.commit("setSubscription",a.data.subscription),alert("Payment successful! Your subscription is now active."),t.push("/profile")}catch(a){console.error("Payment verification failed:",a),alert("Payment verification failed. Please contact support.")}finally{e.commit("setLoading",!1)}}};console.log("Opening Razorpay with options:",a);const i=new window.Razorpay(a);i.on("payment.failed",(function(t){console.error("Payment failed:",t.error),e.commit("setLoading",!1),alert(`Payment failed: ${t.error.description}`)})),i.open()}catch(s){console.error("Order creation failed:",s),e.commit("setLoading",!1),s.response?401===s.response.status?(e.dispatch("logout"),t.push({path:"/login",query:{redirect:"/plans",plan:c.value.id}})):alert(`Server error: ${s.response.data.message||"Please try again later"}`):s.request?alert("Network error. Please check your internet connection."):alert("Unable to create order. Please try again.")}}catch(s){console.error("Payment gateway error:",s),e.commit("setLoading",!1),alert("Something went wrong. Please try again.")}},p=()=>{o.value=o.value.toUpperCase(),o.value.length<8?(r.value="Code must be at least 8 characters",l.value=!1):/^[A-Z0-9-]+$/.test(o.value)?(r.value="",l.value=!0):(r.value="Code can only contain letters, numbers and hyphens",l.value=!1)},f=async()=>{if(l.value)try{a.value=!1,t.push("/dashboard")}catch(e){r.value="Invalid or expired code. Please try again."}};return{selectedPlan:c,showPaymentModal:s,showCodeInput:a,subscriptionCode:o,codeError:r,isValidCode:l,handlePaymentGateway:m,validateCode:p,handleCodeSubmit:f}}};const Li=(0,I.A)(xi,[["render",wi],["__scopeId","data-v-9427a564"]]);var Ci=Li;const Si={class:"min-h-screen bg-[#121212] text-white"},Ei={class:"px-4 py-5 flex items-center justify-between border-b border-white/10"},Pi={class:"flex items-center gap-3"},_i={class:"container mx-auto px-4 py-6"},Mi={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ai={class:"bg-white/5 rounded-lg overflow-hidden hover:bg-white/10 transition-colors"},Ti={class:"relative aspect-video bg-black/40"},Vi={class:"bg-white/5 rounded-lg overflow-hidden hover:bg-white/10 transition-colors"},Ii={class:"relative aspect-video bg-black/40"},Di={class:"bg-white/5 rounded-lg overflow-hidden hover:bg-white/10 transition-colors"},Ri={class:"relative aspect-video bg-black/40"},$i={key:0,class:"fixed inset-0 z-50 bg-black flex items-center justify-center"};function Fi(e,t,s,a,o,r){const l=(0,i.g2)("router-link"),n=(0,i.g2)("AdvancedVideoPlayer");return(0,i.uX)(),(0,i.CE)("div",Si,[(0,i.Lk)("header",Ei,[(0,i.Lk)("div",Pi,[(0,i.bF)(l,{to:"/",class:"text-[#c30059] font-bold text-2xl"},{default:(0,i.k6)((()=>t[4]||(t[4]=[(0,i.eW)("OTTApp")]))),_:1,__:[4]})])]),(0,i.Lk)("main",_i,[t[16]||(t[16]=(0,i.Lk)("div",{class:"mb-6"},[(0,i.Lk)("h1",{class:"text-2xl font-bold mb-2"},"Advanced Video Player"),(0,i.Lk)("p",{class:"text-white/70"},"Featuring HLS, DASH, and DRM support")],-1)),(0,i.Lk)("div",Mi,[(0,i.Lk)("div",Ai,[(0,i.Lk)("div",Ti,[t[6]||(t[6]=(0,i.Lk)("img",{src:"https://via.placeholder.com/640x360?text=HLS+Stream",alt:"HLS Stream",class:"w-full h-full object-cover opacity-70"},null,-1)),(0,i.Lk)("button",{onClick:t[0]||(t[0]=e=>r.openPlayer("hls",o.hlsStreamUrl,"HLS Live Stream",!0)),class:"absolute inset-0 flex items-center justify-center"},t[5]||(t[5]=[(0,i.Lk)("div",{class:"w-16 h-16 bg-[#c30059]/80 rounded-full flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-play text-white text-xl ml-1"})],-1)])),t[7]||(t[7]=(0,i.Lk)("div",{class:"absolute top-2 right-2 bg-red-600 text-white text-xs px-2 py-1 rounded"},"LIVE",-1))]),t[8]||(t[8]=(0,i.Fv)('<div class="p-4"><h3 class="font-bold text-lg mb-1">HLS Live Stream</h3><p class="text-white/60 text-sm mb-2">Adaptive streaming with HLS</p><div class="text-xs text-white/50 flex items-center"><i class="fas fa-signal mr-1"></i> Adaptive Bitrate </div></div>',1))]),(0,i.Lk)("div",Vi,[(0,i.Lk)("div",Ii,[t[10]||(t[10]=(0,i.Lk)("img",{src:"https://via.placeholder.com/640x360?text=DASH+Stream",alt:"DASH Stream",class:"w-full h-full object-cover opacity-70"},null,-1)),(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>r.openPlayer("dash",o.dashStreamUrl,"DASH VOD Stream")),class:"absolute inset-0 flex items-center justify-center"},t[9]||(t[9]=[(0,i.Lk)("div",{class:"w-16 h-16 bg-[#c30059]/80 rounded-full flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-play text-white text-xl ml-1"})],-1)]))]),t[11]||(t[11]=(0,i.Fv)('<div class="p-4"><h3 class="font-bold text-lg mb-1">DASH VOD Stream</h3><p class="text-white/60 text-sm mb-2">Dynamic Adaptive Streaming over HTTP</p><div class="text-xs text-white/50 flex items-center"><i class="fas fa-film mr-1"></i> On-Demand Content </div></div>',1))]),(0,i.Lk)("div",Di,[(0,i.Lk)("div",Ri,[t[13]||(t[13]=(0,i.Lk)("img",{src:"https://via.placeholder.com/640x360?text=DRM+Protected",alt:"DRM Protected",class:"w-full h-full object-cover opacity-70"},null,-1)),(0,i.Lk)("button",{onClick:t[2]||(t[2]=e=>r.openPlayer("dash",o.drmStreamUrl,"DRM Protected Content",!1,o.drmConfig)),class:"absolute inset-0 flex items-center justify-center"},t[12]||(t[12]=[(0,i.Lk)("div",{class:"w-16 h-16 bg-[#c30059]/80 rounded-full flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-play text-white text-xl ml-1"})],-1)])),t[14]||(t[14]=(0,i.Lk)("div",{class:"absolute top-2 right-2 bg-yellow-600 text-white text-xs px-2 py-1 rounded flex items-center"},[(0,i.Lk)("i",{class:"fas fa-lock text-xs mr-1"}),(0,i.eW)(" DRM ")],-1))]),t[15]||(t[15]=(0,i.Fv)('<div class="p-4"><h3 class="font-bold text-lg mb-1">DRM Protected Content</h3><p class="text-white/60 text-sm mb-2">Secure streaming with DRM protection</p><div class="text-xs text-white/50 flex items-center"><i class="fas fa-shield-alt mr-1"></i> Content Protection </div></div>',1))])]),t[17]||(t[17]=(0,i.Fv)('<div class="mt-12 max-w-3xl mx-auto"><h2 class="text-xl font-bold mb-4">Features and Capabilities</h2><div class="space-y-6"><div class="bg-white/5 p-5 rounded-lg"><h3 class="font-bold mb-2 flex items-center"><i class="fas fa-exchange-alt text-[#c30059] mr-2"></i> Adaptive Bitrate Streaming </h3><p class="text-white/70">Automatically adjusts video quality based on available bandwidth and device capabilities. Switch between qualities manually or let the player optimize for your connection.</p></div><div class="bg-white/5 p-5 rounded-lg"><h3 class="font-bold mb-2 flex items-center"><i class="fas fa-signal text-[#c30059] mr-2"></i> DASH Support </h3><p class="text-white/70">Dynamic Adaptive Streaming over HTTP (DASH) provides a standards-based solution for high-quality streaming video delivery, with support for advanced features and content protection.</p></div><div class="bg-white/5 p-5 rounded-lg"><h3 class="font-bold mb-2 flex items-center"><i class="fas fa-shield-alt text-[#c30059] mr-2"></i> Digital Rights Management (DRM) </h3><p class="text-white/70">Supports industry-standard DRM technologies including Widevine, PlayReady, and FairPlay to ensure secure delivery of premium content.</p></div><div class="bg-white/5 p-5 rounded-lg"><h3 class="font-bold mb-2 flex items-center"><i class="fas fa-broadcast-tower text-[#c30059] mr-2"></i> Live Streaming </h3><p class="text-white/70">Low-latency live streaming with dynamic quality adaptation, perfect for live events, sports, and news broadcasts.</p></div></div></div>',1))]),o.playerVisible?((0,i.uX)(),(0,i.CE)("div",$i,[(0,i.bF)(n,{src:o.currentStream.url,title:o.currentStream.title,"stream-type":o.currentStream.type,"is-live":o.currentStream.isLive,"drm-config":o.currentStream.drmConfig,autoplay:!0,onClose:t[3]||(t[3]=e=>o.playerVisible=!1)},null,8,["src","title","stream-type","is-live","drm-config"])])):(0,i.Q3)("",!0)])}const Xi={ref:"playerContainer",class:"relative w-full h-full"},ji={key:0,class:"absolute inset-0 flex items-center justify-center bg-black/50 z-10"},Ni={class:"text-white font-bold text-shadow"},Ui={class:"flex gap-2"},Bi={key:0,class:"flex items-center"},Oi={key:0,class:"controls-center-group"},Qi={class:"relative mb-2"},Wi={class:"w-40 h-24 bg-[#1a1a1a] flex items-center justify-center overflow-hidden"},Ki=["src","currentTime"],qi={key:1,class:"w-full h-full bg-gradient-to-r from-[#1a1a1a] to-[#2a2a2a] flex items-center justify-center"},zi={class:"px-3 py-1.5 text-center text-sm font-medium text-white/90 bg-black/95"},Hi={class:"flex justify-between text-white/90 text-xs mt-2 text-shadow"},Ji={key:0},Gi={key:1},Yi={class:"flex justify-between items-center mt-2"},Zi={class:"flex items-center"},eo={class:"text-xs mr-1 text-shadow"},to={class:"flex items-center gap-3"},so={class:"flex items-center gap-2 volume-controls"},ao=["title"],io={class:"volume-slider-container"},oo={class:"volume-slider-wrapper"},ro={class:"volume-level-indicator"},lo={class:"relative"},no={key:0,class:"absolute bottom-full right-0 mb-2 bg-black/90 w-48 rounded overflow-hidden z-50"},co={class:"py-2"},uo=["onClick"],ho={key:0,class:"fas fa-check text-[#c30059]"},mo={class:"relative"},po={key:0,class:"absolute bottom-full right-0 mb-2 bg-black/90 w-48 rounded overflow-hidden z-50"},fo={class:"py-2"},go=["onClick"],vo={key:0,class:"fas fa-check text-[#c30059]"},bo={key:2,class:"absolute inset-0 flex items-center justify-center bg-black/80 z-20"},yo={class:"bg-black/90 p-6 rounded-lg max-w-md text-center"},ko={class:"text-white/80 mb-4"};function wo(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("div",Xi,[(0,i.Lk)("video",{ref:"videoElement",class:"w-full h-full object-contain",onTimeupdate:t[0]||(t[0]=(...e)=>l.onTimeUpdate&&l.onTimeUpdate(...e)),onLoadedmetadata:t[1]||(t[1]=(...e)=>l.onLoadedMetadata&&l.onLoadedMetadata(...e)),onPlay:t[2]||(t[2]=(...e)=>l.onPlay&&l.onPlay(...e)),onPause:t[3]||(t[3]=(...e)=>l.onPause&&l.onPause(...e)),onEnded:t[4]||(t[4]=(...e)=>l.onEnded&&l.onEnded(...e)),onError:t[5]||(t[5]=(...e)=>l.onError&&l.onError(...e)),onWaiting:t[6]||(t[6]=(...e)=>l.onBuffering&&l.onBuffering(...e)),onPlaying:t[7]||(t[7]=(...e)=>l.onPlaying&&l.onPlaying(...e)),onClick:t[8]||(t[8]=(...e)=>l.toggleControls&&l.toggleControls(...e))},null,544),r.isLoading||r.isBuffering?((0,i.uX)(),(0,i.CE)("div",ji,t[29]||(t[29]=[(0,i.Lk)("div",{class:"w-16 h-16 border-4 border-[#c30059] border-t-transparent rounded-full animate-spin"},null,-1)]))):(0,i.Q3)("",!0),r.showingControls||r.isPaused?((0,i.uX)(),(0,i.CE)("div",{key:1,class:"absolute inset-0 bg-gradient-to-b from-black/50 via-transparent to-black/90 flex flex-col justify-between z-20 video-controls-container",onClick:t[27]||(t[27]=(0,a.D$)((()=>{}),["stop"]))},[(0,i.Lk)("div",{class:"p-4 flex justify-between items-center",onClick:t[11]||(t[11]=(0,a.D$)((()=>{}),["stop"]))},[(0,i.Lk)("button",{onClick:t[9]||(t[9]=t=>e.$emit("close")),class:"text-white hover:text-[#c30059] video-control-button"},t[30]||(t[30]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-2xl"},null,-1)])),(0,i.Lk)("div",Ni,(0,d.v_)(s.title),1),(0,i.Lk)("div",Ui,[s.isLive?((0,i.uX)(),(0,i.CE)("div",Bi,t[31]||(t[31]=[(0,i.Lk)("span",{class:"h-2 w-2 bg-red-600 rounded-full animate-pulse mr-1.5"},null,-1),(0,i.Lk)("span",{class:"text-white text-sm font-medium text-shadow"},"LIVE",-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[10]||(t[10]=(0,a.D$)(((...e)=>l.toggleFullscreen&&l.toggleFullscreen(...e)),["stop"])),class:"text-white hover:text-[#c30059] video-control-button mobile-fullscreen-btn",title:"Fullscreen"},[(0,i.Lk)("i",{class:(0,d.C4)([r.isFullscreen?"fas fa-compress-arrows-alt":"fas fa-expand-arrows-alt","text-xl"])},null,2)])])]),(0,i.Lk)("div",{class:"flex-1 flex items-center justify-center",onClick:t[15]||(t[15]=(0,a.D$)((()=>{}),["stop"]))},[r.isBuffering||r.isLoading?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Oi,[(0,i.Lk)("button",{onClick:t[12]||(t[12]=(0,a.D$)((e=>l.skipBackward(10)),["stop"])),class:"rounded-full border-2 border-white/70 w-12 h-12 flex flex-col items-center justify-center mx-3 control-shadow"},t[32]||(t[32]=[(0,i.Lk)("i",{class:"fas fa-undo-alt"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"10",-1)])),(0,i.Lk)("button",{onClick:t[13]||(t[13]=(0,a.D$)(((...e)=>l.togglePlayPause&&l.togglePlayPause(...e)),["stop"])),class:"rounded-full border-2 border-white/70 w-16 h-16 flex items-center justify-center mx-3 control-shadow"},[(0,i.Lk)("i",{class:(0,d.C4)([r.isPaused?"fas fa-play":"fas fa-pause","text-xl"])},null,2)]),(0,i.Lk)("button",{onClick:t[14]||(t[14]=(0,a.D$)((e=>l.skipForward(10)),["stop"])),class:"rounded-full border-2 border-white/70 w-12 h-12 flex flex-col items-center justify-center mx-3 control-shadow"},t[33]||(t[33]=[(0,i.Lk)("i",{class:"fas fa-redo-alt"},null,-1),(0,i.Lk)("span",{class:"text-xs"},"10",-1)]))]))]),(0,i.Lk)("div",{class:"p-4 video-controls-bottom safe-area-bottom",onClick:t[26]||(t[26]=(0,a.D$)((()=>{}),["stop"]))},[(0,i.Lk)("div",Qi,[r.showPreview?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"absolute bottom-8 transform -translate-x-1/2 bg-black/90 rounded-lg overflow-hidden shadow-xl preview-container",style:(0,d.Tr)({left:`${r.previewPosition}%`})},[(0,i.Lk)("div",Wi,[r.previewVideoRef?((0,i.uX)(),(0,i.CE)("video",{key:0,ref:"previewVideoRef",src:s.src,class:"w-full h-full object-cover",currentTime:r.previewTime,muted:""},null,8,Ki)):((0,i.uX)(),(0,i.CE)("div",qi,t[34]||(t[34]=[(0,i.Lk)("i",{class:"fas fa-film text-[#c30059] text-2xl"},null,-1)])))]),(0,i.Lk)("div",zi,(0,d.v_)(l.formatTime(r.previewTime)),1)],4)):(0,i.Q3)("",!0),(0,i.Lk)("div",{ref:"progressBar",class:"h-2 bg-white/30 rounded-full cursor-pointer group/progress relative overflow-hidden hover:h-3 transition-all duration-150",onMousemove:t[16]||(t[16]=(...e)=>l.updatePreview&&l.updatePreview(...e)),onMouseleave:t[17]||(t[17]=(...e)=>l.hidePreview&&l.hidePreview(...e)),onClick:t[18]||(t[18]=(...e)=>l.seek&&l.seek(...e))},[(0,i.Lk)("div",{class:"absolute top-0 left-0 h-full bg-white/20 rounded-full",style:(0,d.Tr)({width:`${r.bufferedPercentage}%`})},null,4),(0,i.Lk)("div",{class:"absolute top-0 left-0 h-full bg-[#c30059] rounded-full",style:(0,d.Tr)({width:`${r.playedPercentage}%`})},t[35]||(t[35]=[(0,i.Lk)("div",{class:"absolute right-0 top-1/2 -translate-y-1/2 w-4 h-4 bg-[#c30059] border-2 border-white rounded-full transform scale-0 group-hover/progress:scale-100 transition-all duration-150"},null,-1)]),4)],544),(0,i.Lk)("div",Hi,[(0,i.Lk)("div",null,(0,d.v_)(l.formatTime(r.currentTime)),1),s.isLive?((0,i.uX)(),(0,i.CE)("div",Gi,"LIVE")):((0,i.uX)(),(0,i.CE)("div",Ji,(0,d.v_)(l.formatTime(r.duration)),1))])]),(0,i.Lk)("div",Yi,[(0,i.Lk)("div",Zi,[(0,i.Lk)("span",eo,(0,d.v_)(s.title),1)]),(0,i.Lk)("div",to,[(0,i.Lk)("div",so,[(0,i.Lk)("button",{onClick:t[19]||(t[19]=(...e)=>l.toggleMute&&l.toggleMute(...e)),class:"icon-btn rounded-full border border-white/30 w-8 h-8 flex items-center justify-center",title:r.isMuted?"Unmute":"Mute"},[(0,i.Lk)("i",{class:(0,d.C4)([l.volumeIcon,"text-sm"])},null,2)],8,ao),(0,i.Lk)("div",io,[(0,i.Lk)("div",oo,[(0,i.bo)((0,i.Lk)("input",{type:"range","onUpdate:modelValue":t[20]||(t[20]=e=>r.volume=e),min:"0",max:"100",step:"1",onInput:t[21]||(t[21]=(...e)=>l.setVolume&&l.setVolume(...e)),class:"volume-slider"},null,544),[[a.Jo,r.volume]]),(0,i.Lk)("div",ro,(0,d.v_)(r.volume)+"%",1)])])]),r.supportsPiP&&!r.isMobileDevice?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[22]||(t[22]=(...e)=>l.togglePictureInPicture&&l.togglePictureInPicture(...e)),class:"icon-btn rounded-full border border-white/30 w-8 h-8 flex items-center justify-center pip-button"},[(0,i.Lk)("i",{class:(0,d.C4)([(r.isPiP,"fas fa-clone"),"text-sm"])},null,2)])):(0,i.Q3)("",!0),(0,i.Lk)("div",lo,[(0,i.Lk)("button",{onClick:t[23]||(t[23]=(0,a.D$)(((...e)=>l.toggleQualityMenu&&l.toggleQualityMenu(...e)),["stop"])),class:"icon-btn rounded-full border border-white/30 w-8 h-8 flex items-center justify-center"},t[36]||(t[36]=[(0,i.Lk)("i",{class:"fas fa-cog text-sm"},null,-1)])),r.showQualityMenu?((0,i.uX)(),(0,i.CE)("div",no,[(0,i.Lk)("div",co,[t[37]||(t[37]=(0,i.Lk)("div",{class:"px-3 py-1 text-white/70 text-xs uppercase"},"Quality",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.availableQualities,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:t=>l.setQuality(e),class:(0,d.C4)(["w-full px-3 py-2 text-left text-white hover:bg-white/10 flex justify-between items-center border-0 rounded-none",{"text-[#c30059]":r.currentQuality&&r.currentQuality.id===e.id}])},[(0,i.Lk)("span",null,(0,d.v_)(e.label),1),r.currentQuality&&r.currentQuality.id===e.id?((0,i.uX)(),(0,i.CE)("i",ho)):(0,i.Q3)("",!0)],10,uo)))),128))])])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",mo,[(0,i.Lk)("button",{onClick:t[24]||(t[24]=(0,a.D$)(((...e)=>l.toggleSpeedMenu&&l.toggleSpeedMenu(...e)),["stop"])),class:"icon-btn rounded-full border border-white/30 w-8 h-8 flex items-center justify-center"},t[38]||(t[38]=[(0,i.Lk)("i",{class:"fas fa-tachometer-alt text-sm"},null,-1)])),r.showSpeedMenu?((0,i.uX)(),(0,i.CE)("div",po,[(0,i.Lk)("div",fo,[t[39]||(t[39]=(0,i.Lk)("div",{class:"px-3 py-1 text-white/70 text-xs uppercase"},"Playback Speed",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.playbackSpeeds,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e,onClick:t=>l.setPlaybackSpeed(e),class:(0,d.C4)(["w-full px-3 py-2 text-left text-white hover:bg-white/10 flex justify-between items-center border-0 rounded-none",{"text-[#c30059]":r.currentSpeed===e}])},[(0,i.Lk)("span",null,(0,d.v_)(1===e?"Normal":e+"x"),1),r.currentSpeed===e?((0,i.uX)(),(0,i.CE)("i",vo)):(0,i.Q3)("",!0)],10,go)))),128))])])):(0,i.Q3)("",!0)]),r.isMobileDevice?((0,i.uX)(),(0,i.CE)("button",{key:1,onClick:t[25]||(t[25]=(...e)=>l.toggleFullscreen&&l.toggleFullscreen(...e)),class:"icon-btn rounded-full border border-white/30 w-8 h-8 flex items-center justify-center"},[(0,i.Lk)("i",{class:(0,d.C4)([r.isFullscreen?"fas fa-compress-arrows-alt":"fas fa-expand-arrows-alt","text-sm"])},null,2)])):(0,i.Q3)("",!0)])])])])):(0,i.Q3)("",!0),r.error?((0,i.uX)(),(0,i.CE)("div",bo,[(0,i.Lk)("div",yo,[t[40]||(t[40]=(0,i.Lk)("i",{class:"fas fa-exclamation-triangle text-[#c30059] text-4xl mb-4"},null,-1)),t[41]||(t[41]=(0,i.Lk)("h3",{class:"text-white text-xl font-bold mb-2"},"Playback Error",-1)),(0,i.Lk)("p",ko,(0,d.v_)(r.error),1),(0,i.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>l.retry&&l.retry(...e)),class:"bg-[#c30059] text-white py-2 px-4 rounded hover:bg-[#a30048] transition-colors"}," Retry ")])])):(0,i.Q3)("",!0)],512)}s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698);var xo=s(814),Lo=s.n(xo),Co={name:"AdvancedVideoPlayer",props:{src:{type:String,required:!0},title:{type:String,default:"Video"},streamType:{type:String,default:"hls",validator:e=>["hls","dash","mp4"].includes(e)},isLive:{type:Boolean,default:!1},drmConfig:{type:Object,default:()=>null},autoplay:{type:Boolean,default:!0},controlsVisible:{type:Boolean,default:!0},cdnConfig:{type:Object,default:()=>({primary:"https://cdn1.example.com",fallback:["https://cdn2.example.com","https://cdn3.example.com"],chunkSize:10})},preloadConfig:{type:Object,default:()=>({maxChunks:3,chunkSize:10,bufferAhead:30,lowLatencyMode:!0,maxBufferLength:60,minBufferLength:10,maxMaxBufferLength:600,maxBufferSize:0,maxBufferHole:.5,highBufferWatchdogPeriod:2,nudgeMaxRetry:5,nudgeOffset:.2,startLevel:-1,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!0,testBandwidth:!0,progressive:!0,backBufferLength:90})},networkConfig:{type:Object,default:()=>({maxBufferLength:30,maxMaxBufferLength:600,maxBufferSize:0,maxBufferHole:.5,lowLatencyMode:!0,backBufferLength:90,startLevel:-1,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!0,testBandwidth:!0,progressive:!0})}},data(){return{hls:null,shakaPlayer:null,isLoading:!0,isBuffering:!1,isPaused:!this.autoplay,currentTime:0,duration:0,bufferedPercentage:0,playedPercentage:0,volume:100,isMuted:!1,showControls:!0,controlsTimeout:null,isFullscreen:!1,availableQualities:[{id:"auto",label:"Auto"},{id:"1440p",label:"1440p",height:1440},{id:"1080p",label:"1080p",height:1080},{id:"720p",label:"720p",height:720},{id:"480p",label:"480p",height:480},{id:"360p",label:"360p",height:360},{id:"240p",label:"240p",height:240},{id:"144p",label:"144p",height:144},{id:"120p",label:"120p",height:120}],currentQuality:{id:"auto",label:"Auto"},showQualityMenu:!1,error:null,supportsPiP:!1,isPiP:!1,activeChunks:new Map,preloadedChunks:new Set,currentCdnIndex:0,networkSpeed:0,lastSpeedCheck:0,chunkLoadTimes:[],preloadWorker:null,streamManager:{currentQuality:"auto",availableQualities:[],currentSegment:0,bufferedSegments:[],preloadQueue:[],isPreloading:!1,speedSamples:[],speedTrend:"stable",lastQualityChange:0,rebufferingCount:0,qualityChangeThreshold:5e3},mountTimestamp:0,isMobileDevice:!1,autoLandscapeEnabled:!0,hasAutoRotated:!1,showPreview:!1,previewPosition:0,previewTime:0,previewVideoRef:null,currentChunk:0,networkMonitorInterval:null,showVolumeSlider:!1,showingControls:!0,showSpeedMenu:!1,currentSpeed:1,playbackSpeeds:[.25,.5,.75,1,1.25,1.5,1.75,2]}},computed:{volumeIcon(){return this.isMuted||0===this.volume?"fas fa-volume-mute":this.volume<50?"fas fa-volume-down":"fas fa-volume-up"},currentCdnUrl(){const e=[this.cdnConfig.primary,...this.cdnConfig.fallback];return e[this.currentCdnIndex]},optimalQuality(){const e=this.networkSpeed;return e<2?"360p":e<5?"480p":e<10?"720p":"1080p"}},watch:{isPaused(e){e?this.$emit("pause"):this.$emit("play")}},mounted(){this.initializePlayer(),this.detectMobileDevice(),localStorage.getItem("player-volume")&&(this.volume=parseInt(localStorage.getItem("player-volume"))),this.setVolume();try{const e=localStorage.getItem("video-auto-landscape");null!==e&&(this.autoLandscapeEnabled="true"===e)}catch(e){console.warn("Could not load auto landscape preference")}document.addEventListener("fullscreenchange",this.onFullscreenChange),window.addEventListener("keydown",this.handleKeydown),this.checkPiPSupport(),document.addEventListener("webkitpresentationmodechanged",this.onPiPChange),document.addEventListener("pictureinpicturechange",this.onPiPChange),this.$emit(this.isPaused?"pause":"play"),this.initializeStreamManager(),window.screen&&window.screen.orientation&&window.screen.orientation.addEventListener("change",this.handleOrientationChange),window.addEventListener("resize",this.detectMobileDevice),this.initializeQuality();try{const e=localStorage.getItem("player-volume");e&&(this.volume=parseInt(e),this.setVolume())}catch(e){console.warn("Could not load volume preference")}try{const e=localStorage.getItem("video-speed");e&&this.setPlaybackSpeed(parseFloat(e))}catch(e){console.warn("Could not load speed preference")}this.showingControls=!0,this.resetControlsTimer()},beforeUnmount(){this.destroyPlayer(),document.removeEventListener("fullscreenchange",this.onFullscreenChange),window.removeEventListener("keydown",this.handleKeydown),window.removeEventListener("resize",this.detectMobileDevice),this.controlsTimeout&&clearTimeout(this.controlsTimeout),document.removeEventListener("webkitpresentationmodechanged",this.onPiPChange),document.removeEventListener("pictureinpicturechange",this.onPiPChange),this.preloadWorker&&this.preloadWorker.terminate(),window.screen&&window.screen.orientation&&window.screen.orientation.removeEventListener("change",this.handleOrientationChange),this._networkMonitoringInterval&&clearInterval(this._networkMonitoringInterval),document.fullscreenElement&&document.exitFullscreen().catch((e=>{console.warn("Error exiting fullscreen:",e)}))},methods:{initializePlayer(){const e=this.$refs.videoElement;if(e){this.isLoading=!0,this.error=null;try{switch(this.streamType){case"hls":this.initHlsPlayer();break;case"dash":this.initDashPlayer();break;case"mp4":this.initDirectPlayer();break}}catch(t){this.handleError(t)}}},initHlsPlayer(){mt.Ay.isSupported()?(this.hls=new mt.Ay({debug:!1,enableWorker:!0,lowLatencyMode:!0,backBufferLength:90,maxBufferLength:30,maxMaxBufferLength:600,maxBufferSize:0,maxBufferHole:.5,highBufferWatchdogPeriod:2,nudgeMaxRetry:5,nudgeOffset:.2,startLevel:-1,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!0,testBandwidth:!0,progressive:!0,manifestLoadingTimeOut:2e4,manifestLoadingMaxRetry:5,manifestLoadingRetryDelay:1e3,levelLoadingTimeOut:2e4,levelLoadingMaxRetry:5,levelLoadingRetryDelay:1e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:5,fragLoadingRetryDelay:1e3,startFragPrefetch:!0}),this.hls.loadSource(this.src),this.hls.attachMedia(this.$refs.videoElement),this.hls.on(mt.Ay.Events.MANIFEST_PARSED,(()=>{this.autoplay&&this.$refs.videoElement.play().catch((e=>{console.warn("Autoplay prevented:",e),this.isPaused=!0}))})),this.hls.on(mt.Ay.Events.ERROR,((e,t)=>{if(t.fatal)switch(t.type){case mt.Ay.ErrorTypes.NETWORK_ERROR:console.log("Network error, trying to recover..."),this.hls.startLoad();break;case mt.Ay.ErrorTypes.MEDIA_ERROR:console.log("Media error, trying to recover..."),this.hls.recoverMediaError();break;default:console.log("Fatal error, cannot recover"),this.hls.destroy();break}})),this.hls.on(mt.Ay.Events.BUFFER_CREATED,(()=>{this.checkBufferHealth()})),this.hls.on(mt.Ay.Events.BANDWIDTH_ESTIMATE,((e,t)=>{this.networkSpeed=t.bitrate/1e6,this.adjustVideoQuality()}))):this.$refs.videoElement.canPlayType("application/vnd.apple.mpegurl")&&(this.$refs.videoElement.src=this.src,this.$refs.videoElement.addEventListener("loadedmetadata",(()=>{this.autoplay&&this.$refs.videoElement.play().catch((e=>{console.warn("Autoplay prevented:",e),this.isPaused=!0}))})))},initDashPlayer(){this.destroyPlayer();const e=this.$refs.videoElement;if(Lo().polyfill.installAll(),Lo().Player.isBrowserSupported())try{this.shakaPlayer=new(Lo().Player)(e),this.shakaPlayer.addEventListener("error",this.onShakaError);let t={abr:{enabled:!0,defaultBandwidthEstimate:3e5,switchInterval:5,restrictions:{minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},streaming:{rebufferingGoal:4,bufferingGoal:45,bufferBehind:15,alwaysStreamText:!0}};this.drmConfig&&(t.drm={servers:this.drmConfig.servers||{},clearKeys:this.drmConfig.clearKeys||{}}),this.shakaPlayer.configure(t),this.shakaPlayer.load(this.src).then((()=>{const t=this.shakaPlayer.getVariantTracks();this.availableQualities=t.map((e=>({id:e.id,label:e.height?`${e.height}p`:"Audio Only",bitrate:e.bandwidth}))),this.availableQualities.unshift({id:"auto",label:"Auto"}),this.currentQuality=this.availableQualities[0],this.autoplay&&e.play().catch((e=>{console.warn("Autoplay prevented",e),this.isPaused=!0}))})).catch((e=>{this.handleError("Error loading DASH manifest: "+e.message)}))}catch(t){this.handleError("Error initializing DASH player: "+t.message)}else this.handleError("DASH is not supported in this browser")},initDirectPlayer(){const e=this.$refs.videoElement;e.src=this.src,this.autoplay&&e.play().catch((e=>{console.warn("Autoplay prevented",e),this.isPaused=!0}))},destroyPlayer(){this.hls&&(this.hls.destroy(),this.hls=null),this.shakaPlayer&&(this.shakaPlayer.destroy(),this.shakaPlayer=null);const e=this.$refs.videoElement;e&&(e.src="",e.removeAttribute("src"))},onTimeUpdate(){const e=this.$refs.videoElement;if(!e)return;if(this.currentTime=e.currentTime,this.duration>0&&(this.playedPercentage=this.currentTime/this.duration*100),e.buffered.length>0){const t=e.buffered.end(e.buffered.length-1);this.bufferedPercentage=t/this.duration*100}const t=this.currentTime,s=Math.floor(t/this.cdnConfig.chunkSize);for(let a=1;a<=this.preloadConfig.maxChunks;a++){const e=s+a;this.preloadedChunks.has(e)||this.preloadChunk(e)}this.cleanupOldChunks(s)},onLoadedMetadata(){const e=this.$refs.videoElement;e&&(this.duration=e.duration,this.isLoading=!1)},onPlay(){this.isPaused=!1,this.isMobileDevice&&this.autoLandscapeEnabled&&!this.hasAutoRotated&&this.enterAutoLandscapeMode()},onPause(){this.isPaused=!0},onEnded(){this.isPaused=!0,this.isMobileDevice&&this.hasAutoRotated&&this.isFullscreen&&this.exitAutoLandscapeMode(),this.$emit("ended")},onBuffering(){this.isBuffering=!0},onPlaying(){this.isBuffering=!1},onError(){this.handleError("Video playback error")},onShakaError(e){this.handleError("DASH playback error: "+e.detail.message)},handleError(e){console.error("Player error:",e),this.error=e,this.isLoading=!1,this.isBuffering=!1,this.$emit("error",e)},seek(e){const t=this.$refs.videoElement,s=this.$refs.progressBar;if(!t||!s||this.isLive)return;const a=s.getBoundingClientRect(),i=(e.clientX-a.left)/a.width;t.currentTime=i*this.duration},togglePlayPause(){const e=this.$refs.videoElement;e&&(this.isPaused?e.play().catch((e=>{console.warn("Play failed:",e)})):e.pause())},toggleMute(){const e=this.$refs.videoElement;e&&(this.isMuted=!this.isMuted,e.muted=this.isMuted,this.isMuted||0!==this.volume||(this.volume=100,this.setVolume()))},setVolume(){const e=this.$refs.videoElement;if(e){this.volume=Math.max(0,Math.min(100,this.volume)),e.volume=this.volume/100,e.muted=0===this.volume,this.isMuted=e.muted;try{localStorage.setItem("player-volume",this.volume.toString())}catch(t){console.warn("Could not save volume preference")}}},toggleQualityMenu(){this.showQualityMenu=!this.showQualityMenu,this.showQualityMenu&&this.resetControlsTimer()},setQuality(e){if(this.currentQuality=e,this.showQualityMenu=!1,this.hls)if("auto"===e.id)this.hls.currentLevel=-1,this.hls.nextLevel=-1;else{const t=this.hls.levels,s=t.findIndex((t=>t.height===e.height));-1!==s&&(this.hls.currentLevel=s,this.hls.nextLevel=s)}else if(this.shakaPlayer)if("auto"===e.id)this.shakaPlayer.configure({abr:{enabled:!0,defaultBandwidthEstimate:5e5}});else{this.shakaPlayer.configure({abr:{enabled:!1}});const t=this.shakaPlayer.getVariantTracks(),s=t.find((t=>t.height===e.height));s&&this.shakaPlayer.selectVariantTrack(s,!1)}try{localStorage.setItem("video-quality",e.id)}catch(t){console.warn("Could not save quality preference")}},initializeQuality(){try{const e=localStorage.getItem("video-quality");if(e){const t=this.availableQualities.find((t=>t.id===e));t&&this.setQuality(t)}}catch(e){console.warn("Could not load quality preference")}},resetControlsTimer(){this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.controlsTimeout=setTimeout((()=>{this.isPaused||(this.showingControls=!1)}),3e3)},async toggleFullscreen(){const e=this.$refs.playerContainer;if(e)try{if(document.fullscreenElement){if(await document.exitFullscreen(),this.isFullscreen=!1,this.isMobileDevice&&screen.orientation&&screen.orientation.unlock)try{screen.orientation.unlock(),console.log("Orientation unlocked")}catch(t){console.warn("Could not unlock orientation:",t)}}else if(await e.requestFullscreen(),this.isFullscreen=!0,this.isMobileDevice&&screen.orientation&&screen.orientation.lock)try{await screen.orientation.lock("landscape"),console.log("Orientation locked to landscape")}catch(t){console.warn("Could not lock orientation:",t)}}catch(s){console.error("Fullscreen error:",s)}},onFullscreenChange(){this.isFullscreen=!!document.fullscreenElement,console.log("Fullscreen state changed:",this.isFullscreen)},formatTime(e){if(!e||isNaN(e))return"0:00";const t=Math.floor(e/60),s=Math.floor(e%60);return`${t}:${s<10?"0":""}${s}`},retry(){this.error=null,setTimeout((()=>{this.initializePlayer()}),100)},handleKeydown(e){if(this.$refs.videoElement)switch(e.key.toLowerCase()){case" ":case"k":e.preventDefault(),this.togglePlayPause();break;case"f":e.preventDefault(),this.toggleFullscreen();break;case"m":e.preventDefault(),this.toggleMute();break;case"arrowright":if(!this.isLive){e.preventDefault();const t=this.$refs.videoElement;t&&(t.currentTime=Math.min(t.currentTime+10,t.duration))}break;case"arrowleft":if(!this.isLive){e.preventDefault();const t=this.$refs.videoElement;t&&(t.currentTime=Math.max(t.currentTime-10,0))}break;case"arrowup":e.preventDefault(),this.volume=Math.min(this.volume+5,100),this.setVolume();break;case"arrowdown":e.preventDefault(),this.volume=Math.max(this.volume-5,0),this.setVolume();break}},checkPiPSupport(){const e=this.$refs.videoElement;e&&(this.supportsPiP=document.pictureInPictureEnabled||"webkitPresentationMode"in e||"webkitSupportsPresentationMode"in e)},async togglePictureInPicture(){const e=this.$refs.videoElement;if(e&&this.supportsPiP)try{document.pictureInPictureElement?await document.exitPictureInPicture():await e.requestPictureInPicture()}catch(t){console.error("PiP failed:",t)}},onPiPChange(){this.isPiP=!!document.pictureInPictureElement},skipForward(e){const t=this.$refs.videoElement;if(t){const s=Math.min(t.currentTime+e,t.duration||0);t.currentTime=s,this.showControlsOnInteraction()}},skipBackward(e){const t=this.$refs.videoElement;if(t){const s=Math.max(t.currentTime-e,0);t.currentTime=s,this.showControlsOnInteraction()}},showControlsOnInteraction(){this.$emit("interaction")},async initializeStreamManager(){this.preloadWorker=new Worker(new URL(s.p+s.u(347),s.b)),this.preloadWorker.onmessage=this.handlePreloadComplete.bind(this),await this.initializeChunkSystem(),this.startNetworkMonitoring()},async initializeChunkSystem(){if(this.cdnConfig.useCDN){this.currentChunk=0,this.preloadedChunks.clear();for(let e=0;e<this.cdnConfig.maxChunks;e++)await this.preloadChunk(e)}},async preloadChunk(e){if(this.cdnConfig.useCDN&&!this.preloadedChunks.has(e))try{const t=`${this.cdnConfig.cdnUrl}/chunks/${e}.ts`,s=await fetch(t),a=await s.blob();this.activeChunks.set(e,a),this.preloadedChunks.add(e),this.cleanupOldChunks(this.currentChunk)}catch(t){console.warn(`Failed to preload chunk ${e}:`,t)}},cleanupOldChunks(e){const t=new Set;for(let s=Math.max(0,e-Math.floor(this.cdnConfig.cleanupThreshold*this.cdnConfig.maxChunks));s<=e+Math.floor(this.cdnConfig.preloadThreshold*this.cdnConfig.maxChunks);s++)t.add(s);for(const s of this.preloadedChunks)t.has(s)||this.preloadedChunks.delete(s)},handlePreloadComplete(e){const{chunkIndex:t,success:s}=e.data;s&&this.preloadedChunks.add(t)},startNetworkMonitoring(){this.networkMonitorInterval=setInterval((()=>{if(this.hls){const e=this.hls.bandwidthEstimate;e&&(this.networkSpeed=e/1e6,this.adjustVideoQuality())}}),5e3)},adjustVideoQuality(){if(!this.hls||!this.availableQualities)return;const e=this.hls.levels;if(!e||0===e.length)return;let t=-1;t=this.networkSpeed>5?e.length-1:this.networkSpeed>2?Math.floor(e.length/2):0,t!==this.hls.currentLevel&&(this.hls.currentLevel=t)},detectMobileDevice(){const e=window.innerWidth<768||window.innerHeight<768,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),s="ontouchstart"in window||navigator.maxTouchPoints>0;this.isMobileDevice=e&&s||t,console.log("Device detection:",{isMobile:this.isMobileDevice})},handleOrientationChange(){const e=window.screen&&window.screen.orientation?window.screen.orientation.type:null;this.isMobileDevice&&this.isFullscreen&&e&&e.includes("portrait")&&console.log("User chose portrait orientation while in fullscreen")},async enterAutoLandscapeMode(){const e=this.$refs.playerContainer;if(e)try{if(this.hasAutoRotated=!0,await e.requestFullscreen(),this.isFullscreen=!0,screen.orientation&&screen.orientation.lock)try{await screen.orientation.lock("landscape"),console.log("Auto entered landscape mode")}catch(t){console.warn("Could not auto lock orientation:",t)}}catch(s){console.error("Auto landscape fullscreen error:",s)}},async exitAutoLandscapeMode(){try{if(screen.orientation&&screen.orientation.unlock)try{screen.orientation.unlock(),console.log("Orientation unlocked")}catch(e){console.warn("Error unlocking orientation:",e)}if(await new Promise((e=>setTimeout(e,100))),document.fullscreenElement)try{await document.exitFullscreen()}catch(e){console.warn("Error exiting fullscreen:",e)}this.isFullscreen=!1,this.hasAutoRotated=!1,this.$emit("interaction")}catch(t){console.error("Error exiting auto landscape mode:",t)}},toggleAutoLandscape(){this.autoLandscapeEnabled=!this.autoLandscapeEnabled;try{localStorage.setItem("video-auto-landscape",this.autoLandscapeEnabled.toString())}catch(e){console.warn("Could not save auto landscape preference")}!this.autoLandscapeEnabled||this.isPaused||this.hasAutoRotated||this.enterAutoLandscapeMode(),!this.autoLandscapeEnabled&&this.hasAutoRotated&&this.isFullscreen&&this.exitAutoLandscapeMode()},updatePreview(e){const t=this.$refs.progressBar;if(!t||this.isLive)return;const s=t.getBoundingClientRect(),a=(e.clientX-s.left)/s.width;this.previewPosition=100*a,this.previewTime=a*this.duration,this.showPreview=!0,this.$nextTick((()=>{const e=this.$refs.previewVideoRef;e&&(e.currentTime=this.previewTime)}))},hidePreview(){this.showPreview=!1},checkBufferHealth(){const e=this.$refs.videoElement;if(!e||!e.buffered.length)return;const t=e.buffered.end(e.buffered.length-1),s=t-e.currentTime;s<5&&(console.log("Buffer health low, attempting recovery..."),this.hls.startLoad())},toggleControls(){this.showingControls=!this.showingControls,this.resetControlsTimer()},toggleSpeedMenu(){this.showSpeedMenu=!this.showSpeedMenu,this.showSpeedMenu&&this.resetControlsTimer()},setPlaybackSpeed(e){const t=this.$refs.videoElement;if(t){this.currentSpeed=e,t.playbackRate=e,this.showSpeedMenu=!1;try{localStorage.setItem("video-speed",e.toString())}catch(s){console.warn("Could not save speed preference")}}}}};const So=(0,I.A)(Co,[["render",wo],["__scopeId","data-v-3eb4923a"]]);var Eo=So,Po={name:"VideoPlayer",components:{AdvancedVideoPlayer:Eo},data(){return{playerVisible:!1,currentStream:{url:"",title:"",type:"hls",isLive:!1,drmConfig:null},hlsStreamUrl:"https://noonenews.s3.ap-south-1.amazonaws.com/videos/hls/7/hls/master.m3u8",dashStreamUrl:"https://dash.akamaized.net/akamai/bbb_30fps/bbb_30fps.mpd",drmStreamUrl:"https://media.axprod.net/TestVectors/v7-MultiDRM-SingleKey/Manifest.mpd",drmConfig:{servers:{"com.widevine.alpha":"https://drm-widevine-licensing.axtest.net/AcquireLicense","com.microsoft.playready":"https://drm-playready-licensing.axtest.net/AcquireLicense"},clearKeys:{e4a2359a99d24d5797d10c86da322026:"cb541084c99731aef4fff74500c12ead"}}}},methods:{openPlayer(e,t,s,a=!1,i=null){this.currentStream={url:t,title:s,type:e,isLive:a,drmConfig:i},this.playerVisible=!0}}};const _o=(0,I.A)(Po,[["render",Fi]]);var Mo=_o;const Ao={class:"movie-details-wrapper bg-[#121212] text-white min-h-screen"},To={class:"hide-on-mobile header-with-gradient"},Vo={class:"movie-detail-container"},Io={class:"movie-backdrop"},Do=["src"],Ro={key:0,class:"video-container"},$o={key:0,class:"video-loading"},Fo={class:"movie-info-container"},Xo={class:"movie-badges"},jo={key:0,class:"badge premium"},No={key:1,class:"badge quality"},Uo={class:"movie-title"},Bo={class:"movie-meta"},Oo={class:"movie-tags"},Qo={class:"tag"},Wo={class:"tag"},Ko={class:"movie-description"},qo={class:"action-buttons"},zo={class:"pl-4 sm:pl-6 md:pl-10 py-4 space-y-8 relative overflow-hidden"},Ho={class:"relative carousel-container"},Jo={class:"flex gap-4 pr-4 carousel-inner-container"},Go={class:"cast-image"},Yo=["src","alt"],Zo={class:"cast-info"},er={class:"cast-name"},tr={class:"cast-role"},sr={class:"relative carousel-container"},ar={class:"flex gap-4 pr-4 carousel-inner-container"},ir=["onClick"],or={class:"relative rounded-md overflow-hidden card-container"},rr=["src","alt"],lr={class:"related-movie-title mt-1 text-xs font-semibold truncate card-text"},nr={key:1,class:"payment-popup-overlay"},cr={class:"payment-popup"},dr={class:"popup-header"},ur={class:"popup-content"},hr={class:"movie-preview"},mr=["src"],pr={class:"movie-info"},fr={class:"movie-title"},gr={class:"flex items-center gap-2 text-sm text-white/60"},vr={key:0},br={key:1,class:"dot-divider"},yr={key:2,class:"payment-popup-overlay"},kr={class:"payment-popup"},wr={class:"popup-header"},xr={class:"flex items-center gap-3"},Lr={class:"text-xl font-bold"},Cr={class:"text-sm text-white/60"},Sr={class:"popup-content"},Er={class:"movie-preview"},Pr=["src"],_r={class:"movie-info"},Mr={class:"movie-title"},Ar={class:"flex items-center gap-2 text-sm text-white/60"},Tr={key:0},Vr={key:1,class:"dot-divider"},Ir={key:0,class:"rental-details bg-white/5 rounded-lg p-4 my-4"},Dr={class:"flex justify-between items-center mb-2"},Rr={class:"text-xl font-bold"},$r={class:"flex justify-between items-center"},Fr={key:1,class:"premium-message bg-[#c30059]/10 rounded-lg p-4 my-4"},Xr={key:0},jr={key:1},Nr={key:2,class:"text-center text-sm text-white/60 mt-4"},Ur={key:3,class:"text-center text-sm text-white/60 mt-4"},Br={key:3,class:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50 backdrop-blur-sm"},Or={class:"bg-[#1d1d1d] rounded-xl w-full max-w-md p-6"},Qr={class:"flex justify-between items-center mb-6"},Wr={class:"text-xl font-bold"},Kr={class:"grid grid-cols-2 gap-4 mb-6"},qr={class:"relative"},zr=["value"];function Hr(e,t,s,a,o,r){const l=(0,i.g2)("AdvancedVideoPlayer"),n=(0,i.g2)("AppHeader"),c=(0,i.g2)("AppFooter");return(0,i.uX)(),(0,i.CE)("div",Ao,[o.isVideoPlaying?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"advanced-video-player-modal",onMousemove:t[0]||(t[0]=(...e)=>r.showControlsOnInteraction&&r.showControlsOnInteraction(...e)),onTouchstart:t[1]||(t[1]=(...e)=>r.showControlsOnInteraction&&r.showControlsOnInteraction(...e)),onClick:t[2]||(t[2]=(...e)=>r.toggleControlsVisibility&&r.toggleControlsVisibility(...e))},[(0,i.bF)(l,{ref:"videoPlayer",src:o.videoUrl,title:o.movie.title,streamType:o.streamType,autoplay:!0,isLive:!1,drmConfig:o.drmConfig,controlsVisible:o.controlsVisible,onClose:r.closeVideo,onPlay:r.onVideoPlay,onPause:r.onVideoPause,onInteraction:r.showControlsOnInteraction,onError:r.handleVideoError},null,8,["src","title","streamType","drmConfig","controlsVisible","onClose","onPlay","onPause","onInteraction","onError"])],32)):(0,i.Q3)("",!0),(0,i.Lk)("div",To,[(0,i.bF)(n,{onToggleSearch:r.toggleSearch,hideBackButton:!0},null,8,["onToggleSearch"])]),(0,i.Lk)("div",Vo,[(0,i.Lk)("div",Io,[(0,i.Lk)("img",{src:o.isMobileDevice&&o.movie.portrait_thumbnail_url?o.movie.portrait_thumbnail_url:o.movie.thumbnail_url,alt:"Movie Thumbnail",class:(0,d.C4)(["backdrop-image",{"portrait-mobile":o.isMobileDevice&&o.movie.portrait_thumbnail_url}])},null,10,Do),o.movie.promo_hls_url?((0,i.uX)(),(0,i.CE)("div",Ro,[o.isPromoLoading?((0,i.uX)(),(0,i.CE)("div",$o)):(0,i.Q3)("",!0),(0,i.Lk)("video",{ref:"heroVideo",class:"backdrop-video",autoplay:"",muted:"",loop:"",playsinline:"",onLoadeddata:t[3]||(t[3]=(...e)=>r.onPromoVideoLoaded&&r.onPromoVideoLoaded(...e)),onEnded:t[4]||(t[4]=(...e)=>r.handlePromoVideoEnd&&r.handlePromoVideoEnd(...e)),onError:t[5]||(t[5]=(...e)=>r.handlePromoVideoError&&r.handlePromoVideoError(...e)),onWaiting:t[6]||(t[6]=(...e)=>r.onPromoVideoWaiting&&r.onPromoVideoWaiting(...e)),onPlaying:t[7]||(t[7]=(...e)=>r.onPromoVideoPlaying&&r.onPromoVideoPlaying(...e)),onCanplay:t[8]||(t[8]=(...e)=>r.onPromoVideoCanPlay&&r.onPromoVideoCanPlay(...e))},null,544)])):(0,i.Q3)("",!0),t[31]||(t[31]=(0,i.Lk)("div",{class:"backdrop-gradient"},null,-1))]),(0,i.Lk)("button",{class:"back-btn mobile-only-element",onClick:t[9]||(t[9]=(...e)=>r.goBack&&r.goBack(...e))},t[32]||(t[32]=[(0,i.Lk)("i",{class:"fas fa-arrow-left"},null,-1)])),(0,i.Lk)("div",Fo,[(0,i.Lk)("div",Xo,[o.movie.isPremium?((0,i.uX)(),(0,i.CE)("span",jo,"Premium")):(0,i.Q3)("",!0),o.movie.is4K?((0,i.uX)(),(0,i.CE)("span",No,"4K")):(0,i.Q3)("",!0)]),(0,i.Lk)("h1",Uo,(0,d.v_)(o.movie.title),1),(0,i.Lk)("div",Bo,[(0,i.Lk)("span",null,(0,d.v_)(r.movieYear),1),t[33]||(t[33]=(0,i.Lk)("span",{class:"dot-divider"},null,-1)),(0,i.Lk)("span",null,(0,d.v_)(r.formattedDuration),1),t[34]||(t[34]=(0,i.Lk)("span",{class:"dot-divider"},null,-1)),(0,i.Lk)("span",null,(0,d.v_)(r.categoryName),1)]),(0,i.Lk)("div",Oo,[(0,i.Lk)("span",Qo,(0,d.v_)(o.movie.mood1||"Exciting"),1),(0,i.Lk)("span",Wo,(0,d.v_)(o.movie.mood2||"Suspenseful"),1)]),(0,i.Lk)("p",Ko,(0,d.v_)(o.movie.description||"In this thriller, a couple goes on a weekend trip that takes a dangerous turn when their car breaks down. Seeking shelter in a nearby home, they discover a dark secret in the basement that changes everything."),1),(0,i.Lk)("div",qo,[o.movie.promo_hls_url?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"play-button",onClick:t[10]||(t[10]=(...e)=>r.playPromo&&r.playPromo(...e))},t[35]||(t[35]=[(0,i.Lk)("i",{class:"fas fa-film"},null,-1),(0,i.Lk)("span",null,"Promo",-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("button",{class:"play-button",onClick:t[11]||(t[11]=(...e)=>r.playMovie&&r.playMovie(...e))},t[36]||(t[36]=[(0,i.Lk)("i",{class:"fas fa-play"},null,-1),(0,i.Lk)("span",null,"Play",-1)])),(0,i.Lk)("button",{class:(0,d.C4)(["secondary-button",{"in-watchlist":o.isInWatchlist}]),onClick:t[12]||(t[12]=(...e)=>r.toggleWatchlist&&r.toggleWatchlist(...e))},[(0,i.Lk)("i",{class:(0,d.C4)(["fas",o.isInWatchlist?"fa-bookmark":"fa-bookmark-o"])},null,2),(0,i.eW)(" "+(0,d.v_)(o.isInWatchlist?"Remove from Watchlist":"Add to Watchlist"),1)],2),(0,i.Lk)("button",{class:"action-button",onClick:t[13]||(t[13]=(...e)=>r.shareMovie&&r.shareMovie(...e))},t[37]||(t[37]=[(0,i.Lk)("i",{class:"fas fa-share-alt"},null,-1),(0,i.Lk)("span",{class:"action-label"},"Share",-1)]))])])]),(0,i.Lk)("main",zo,[(0,i.Lk)("section",null,[t[40]||(t[40]=(0,i.Lk)("div",{class:"flex justify-between items-center mb-3 pr-4"},[(0,i.Lk)("h2",{class:"gradient-text font-semibold text-base md:text-lg"}," Cast & Crew "),(0,i.Lk)("a",{class:"text-white font-semibold text-sm hover:underline whitespace-nowrap",href:"#"}," View All ")],-1)),(0,i.Lk)("div",Ho,[o.canScrollLeft.cast?((0,i.uX)(),(0,i.CE)("button",{key:0,"aria-label":"Previous Cast & Crew",class:"scroll-button left-scroll-button",onClick:t[14]||(t[14]=e=>r.scrollLeft("castContainer"))},t[38]||(t[38]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:"flex gap-4 overflow-x-auto scrollbar-hide scroll-container snap-x snap-mandatory",ref:"castContainer",onScroll:t[15]||(t[15]=e=>r.checkScrollButtons("castContainer","cast"))},[(0,i.Lk)("div",Jo,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.castAndCrew,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"cast-card snap-start"},[(0,i.Lk)("div",Go,[(0,i.Lk)("img",{src:e.image,alt:e.name},null,8,Yo)]),(0,i.Lk)("div",Zo,[(0,i.Lk)("h3",er,(0,d.v_)(e.name),1),(0,i.Lk)("p",tr,(0,d.v_)(e.role),1)])])))),128))])],544),o.canScrollRight.cast?((0,i.uX)(),(0,i.CE)("button",{key:1,"aria-label":"Next Cast & Crew",class:"scroll-button right-scroll-button",onClick:t[16]||(t[16]=e=>r.scrollRight("castContainer"))},t[39]||(t[39]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]))):(0,i.Q3)("",!0)])]),(0,i.Lk)("section",null,[t[43]||(t[43]=(0,i.Lk)("div",{class:"flex justify-between items-center mb-3 pr-4"},[(0,i.Lk)("h2",{class:"gradient-text font-semibold text-base md:text-lg"}," More Like This "),(0,i.Lk)("a",{class:"text-white font-semibold text-sm hover:underline whitespace-nowrap",href:"#"}," View All ")],-1)),(0,i.Lk)("div",sr,[o.canScrollLeft.related?((0,i.uX)(),(0,i.CE)("button",{key:0,"aria-label":"Previous Related Movies",class:"scroll-button left-scroll-button",onClick:t[17]||(t[17]=e=>r.scrollLeft("relatedContainer"))},t[41]||(t[41]=[(0,i.Lk)("i",{class:"fas fa-chevron-left"},null,-1)]))):(0,i.Q3)("",!0),(0,i.Lk)("div",{class:"flex gap-4 overflow-x-auto scrollbar-hide scroll-container snap-x snap-mandatory",ref:"relatedContainer",onScroll:t[18]||(t[18]=e=>r.checkScrollButtons("relatedContainer","related"))},[(0,i.Lk)("div",ar,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.relatedMovies,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"related-movie-card snap-start",onClick:t=>r.navigateToMovie(e.id)},[(0,i.Lk)("div",or,[(0,i.Lk)("img",{src:e.image,alt:e.title,class:"related-movie-image"},null,8,rr)]),(0,i.Lk)("p",lr,(0,d.v_)(e.title),1)],8,ir)))),128))])],544),o.canScrollRight.related?((0,i.uX)(),(0,i.CE)("button",{key:1,"aria-label":"Next Related Movies",class:"scroll-button right-scroll-button",onClick:t[19]||(t[19]=e=>r.scrollRight("relatedContainer"))},t[42]||(t[42]=[(0,i.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]))):(0,i.Q3)("",!0)])])]),(0,i.Lk)("div",{class:(0,d.C4)(["mobile-search-bar",{active:o.isSearchActive}])},[t[45]||(t[45]=(0,i.Lk)("input",{type:"text",placeholder:"Search movies, shows and more..."},null,-1)),(0,i.Lk)("button",{class:"text-white",onClick:t[20]||(t[20]=(...e)=>r.toggleSearch&&r.toggleSearch(...e))},t[44]||(t[44]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))],2),o.showPaymentPopup?((0,i.uX)(),(0,i.CE)("div",nr,[(0,i.Lk)("div",cr,[(0,i.Lk)("div",dr,[t[47]||(t[47]=(0,i.Fv)('<div class="flex items-center gap-3" data-v-108c0ec5><div class="premium-badge" data-v-108c0ec5><i class="fas fa-crown" data-v-108c0ec5></i></div><div data-v-108c0ec5><h2 class="text-xl font-bold" data-v-108c0ec5>Premium Content</h2><p class="text-sm text-white/60" data-v-108c0ec5>Subscribe to Continue Watching</p></div></div>',1)),(0,i.Lk)("button",{onClick:t[21]||(t[21]=(...e)=>r.closePaymentPopup&&r.closePaymentPopup(...e)),class:"close-button"},t[46]||(t[46]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,i.Lk)("div",ur,[(0,i.Lk)("div",hr,[(0,i.Lk)("img",{src:o.movie.thumbnail_url||o.movie.poster_url,alt:"Movie Thumbnail",class:"popup-thumbnail"},null,8,mr),(0,i.Lk)("div",pr,[(0,i.Lk)("h3",fr,(0,d.v_)(o.movie.title),1),(0,i.Lk)("div",gr,[r.formattedDuration?((0,i.uX)(),(0,i.CE)("span",vr,(0,d.v_)(r.formattedDuration),1)):(0,i.Q3)("",!0),r.formattedDuration&&r.categoryName?((0,i.uX)(),(0,i.CE)("span",br)):(0,i.Q3)("",!0),(0,i.Lk)("span",null,(0,d.v_)(r.categoryName),1)])])]),t[49]||(t[49]=(0,i.Fv)('<div class="premium-features" data-v-108c0ec5><h4 class="text-lg font-semibold mb-4" data-v-108c0ec5>Premium Benefits</h4><div class="features-grid" data-v-108c0ec5><div class="feature-item" data-v-108c0ec5><i class="fas fa-film text-[#c30059]" data-v-108c0ec5></i><div data-v-108c0ec5><p class="font-medium" data-v-108c0ec5>All Premium Content</p><p class="text-sm text-white/60" data-v-108c0ec5>Unlimited access to premium movies &amp; shows</p></div></div><div class="feature-item" data-v-108c0ec5><i class="fas fa-tv text-[#c30059]" data-v-108c0ec5></i><div data-v-108c0ec5><p class="font-medium" data-v-108c0ec5>Watch on Any Device</p><p class="text-sm text-white/60" data-v-108c0ec5>TV, laptop, phone, or tablet</p></div></div><div class="feature-item" data-v-108c0ec5><i class="fas fa-ban text-[#c30059]" data-v-108c0ec5></i><div data-v-108c0ec5><p class="font-medium" data-v-108c0ec5>Ad-Free Experience</p><p class="text-sm text-white/60" data-v-108c0ec5>Uninterrupted entertainment</p></div></div></div></div>',1)),(0,i.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>r.handleSubscribe&&r.handleSubscribe(...e)),class:"subscribe-button"},t[48]||(t[48]=[(0,i.Lk)("span",null,"View Plans & Subscribe",-1),(0,i.Lk)("i",{class:"fas fa-arrow-right"},null,-1)])),t[50]||(t[50]=(0,i.Lk)("p",{class:"text-center text-sm text-white/60 mt-4"}," Plans start from ₹365/year (₹1/day) ",-1))])])])):(0,i.Q3)("",!0),o.showRentalPopup?((0,i.uX)(),(0,i.CE)("div",yr,[(0,i.Lk)("div",kr,[(0,i.Lk)("div",wr,[(0,i.Lk)("div",xr,[t[51]||(t[51]=(0,i.Lk)("div",{class:"premium-badge"},[(0,i.Lk)("i",{class:"fas fa-ticket-alt"})],-1)),(0,i.Lk)("div",null,[(0,i.Lk)("h2",Lr,(0,d.v_)(o.isSubscribed?"Premium Access":"Rent Movie"),1),(0,i.Lk)("p",Cr,(0,d.v_)(o.isSubscribed?"Watch Instantly":`Watch for ${o.movie.rental_period} hours`),1)])]),(0,i.Lk)("button",{onClick:t[23]||(t[23]=e=>o.showRentalPopup=!1),class:"close-button"},t[52]||(t[52]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,i.Lk)("div",Sr,[(0,i.Lk)("div",Er,[(0,i.Lk)("img",{src:o.movie.thumbnail_url||o.movie.poster_url,alt:"Movie Thumbnail",class:"popup-thumbnail"},null,8,Pr),(0,i.Lk)("div",_r,[(0,i.Lk)("h3",Mr,(0,d.v_)(o.movie.title),1),(0,i.Lk)("div",Ar,[r.formattedDuration?((0,i.uX)(),(0,i.CE)("span",Tr,(0,d.v_)(r.formattedDuration),1)):(0,i.Q3)("",!0),r.formattedDuration&&r.categoryName?((0,i.uX)(),(0,i.CE)("span",Vr)):(0,i.Q3)("",!0),(0,i.Lk)("span",null,(0,d.v_)(r.categoryName),1)])])]),o.isSubscribed?((0,i.uX)(),(0,i.CE)("div",Fr,t[55]||(t[55]=[(0,i.Lk)("div",{class:"flex items-center gap-3"},[(0,i.Lk)("i",{class:"fas fa-crown text-[#c30059]"}),(0,i.Lk)("div",null,[(0,i.Lk)("p",{class:"font-medium"},"Premium Member Benefit"),(0,i.Lk)("p",{class:"text-sm text-white/60"},"Watch all rental movies for free")])],-1)]))):((0,i.uX)(),(0,i.CE)("div",Ir,[(0,i.Lk)("div",Dr,[t[53]||(t[53]=(0,i.Lk)("span",{class:"text-white/60"},"Rental Price",-1)),(0,i.Lk)("span",Rr,"₹"+(0,d.v_)(o.movie.rental_price),1)]),(0,i.Lk)("div",$r,[t[54]||(t[54]=(0,i.Lk)("span",{class:"text-white/60"},"Watch Period",-1)),(0,i.Lk)("span",null,(0,d.v_)(o.movie.rental_period)+" hours",1)])])),(0,i.Lk)("button",{onClick:t[24]||(t[24]=(...e)=>r.handleRentalPayment&&r.handleRentalPayment(...e)),class:"subscribe-button"},[o.isSubscribed?((0,i.uX)(),(0,i.CE)("span",jr,"Watch Now")):((0,i.uX)(),(0,i.CE)("span",Xr,"Rent Now for ₹"+(0,d.v_)(o.movie.rental_price),1)),t[56]||(t[56]=(0,i.Lk)("i",{class:"fas fa-arrow-right"},null,-1))]),o.isSubscribed?((0,i.uX)(),(0,i.CE)("p",Ur," Enjoy unlimited access with your premium membership ")):((0,i.uX)(),(0,i.CE)("p",Nr," Available to watch for "+(0,d.v_)(o.movie.rental_period)+" hours after payment ",1))])])])):(0,i.Q3)("",!0),(0,i.bF)(c),o.showShareDialog?((0,i.uX)(),(0,i.CE)("div",Br,[(0,i.Lk)("div",Or,[(0,i.Lk)("div",Qr,[(0,i.Lk)("h3",Wr,'Share "'+(0,d.v_)(o.movie.title)+'"',1),(0,i.Lk)("button",{onClick:t[25]||(t[25]=e=>o.showShareDialog=!1),class:"text-white/60 hover:text-white"},t[57]||(t[57]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,i.Lk)("div",Kr,[(0,i.Lk)("button",{onClick:t[26]||(t[26]=(...e)=>r.shareToWhatsApp&&r.shareToWhatsApp(...e)),class:"flex items-center gap-3 bg-[#25D366]/10 p-4 rounded-lg hover:bg-[#25D366]/20 transition-all"},t[58]||(t[58]=[(0,i.Lk)("i",{class:"fab fa-whatsapp text-[#25D366] text-2xl"},null,-1),(0,i.Lk)("span",null,"WhatsApp",-1)])),(0,i.Lk)("button",{onClick:t[27]||(t[27]=(...e)=>r.shareToFacebook&&r.shareToFacebook(...e)),class:"flex items-center gap-3 bg-[#1877F2]/10 p-4 rounded-lg hover:bg-[#1877F2]/20 transition-all"},t[59]||(t[59]=[(0,i.Lk)("i",{class:"fab fa-facebook text-[#1877F2] text-2xl"},null,-1),(0,i.Lk)("span",null,"Facebook",-1)])),(0,i.Lk)("button",{onClick:t[28]||(t[28]=(...e)=>r.shareToTwitter&&r.shareToTwitter(...e)),class:"flex items-center gap-3 bg-[#1DA1F2]/10 p-4 rounded-lg hover:bg-[#1DA1F2]/20 transition-all"},t[60]||(t[60]=[(0,i.Lk)("i",{class:"fab fa-twitter text-[#1DA1F2] text-2xl"},null,-1),(0,i.Lk)("span",null,"Twitter",-1)])),(0,i.Lk)("button",{onClick:t[29]||(t[29]=(...e)=>r.copyShareLink&&r.copyShareLink(...e)),class:"flex items-center gap-3 bg-white/10 p-4 rounded-lg hover:bg-white/20 transition-all"},t[61]||(t[61]=[(0,i.Lk)("i",{class:"fas fa-link text-white text-2xl"},null,-1),(0,i.Lk)("span",null,"Copy Link",-1)]))]),(0,i.Lk)("div",qr,[(0,i.Lk)("input",{ref:"shareLink",type:"text",value:r.shareUrl,class:"w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 pr-24 text-white focus:border-[#c30059] focus:outline-none transition-colors",readonly:""},null,8,zr),(0,i.Lk)("button",{onClick:t[30]||(t[30]=(...e)=>r.copyShareLink&&r.copyShareLink(...e)),class:"absolute right-2 top-1/2 -translate-y-1/2 text-sm text-[#c30059] hover:text-[#a80048] transition-colors"},(0,d.v_)(o.copyStatus),1)])])])):(0,i.Q3)("",!0)])}const Jr="http://192.168.0.104:8000",Gr=C.A.create({baseURL:Jr,headers:{"Content-Type":"application/json"}});Gr.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),Gr.interceptors.response.use((e=>e),(e=>{if(401===e.response?.status){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.setItem("isAuthenticated","false");const e=window.location.hash.slice(1);window.location.href.includes("/login")||(window.location.href=`/#/login?redirect=${encodeURIComponent(e)}`)}return Promise.reject(e)}));const Yr={toggle:e=>Gr.post("/api/watchlist/toggle/",{content_id:e}),getStatus:e=>Gr.get(`/api/watchlist/status/?content_id=${e}`),getList:()=>Gr.get("/api/watchlist/")};const Zr="http://192.168.0.104:8000";var el={name:"MovieDetails",components:{AppHeader:We,AppFooter:Wt,AdvancedVideoPlayer:Eo},props:{id:{type:[Number,String],required:!0}},data(){return{movie:{},inWatchlist:!1,isSearchActive:!1,isVideoPlaying:!1,controlsVisible:!0,isVideoPaused:!1,controlsTimeout:null,isMobileDevice:!1,videoInteractionDelay:2500,videoUrl:"",streamType:"hls",promoStartDelay:3e3,drmConfig:{servers:{"com.widevine.alpha":"https://license.url/widevine"},clearKeys:{}},playerSettings:{defaultQuality:"auto",preferredQualityIndex:1,skipInterval:10,keyboardShortcutsEnabled:!0,rememberLastPosition:!0,autoQualitySwitch:!0},canScrollLeft:{cast:!1,related:!1},canScrollRight:{cast:!0,related:!0},castAndCrew:[{name:"Naveen Chandra",role:"Alex",image:"https://i.ibb.co/wQVtYjk/actor1.jpg"},{name:"Tanya Hope",role:"Archana",image:"https://i.ibb.co/wBCDVS4/actor2.jpg"},{name:"Surya Sreenivas",role:"Director",image:"https://i.ibb.co/KWVfnkz/director.jpg"},{name:"Aadhi Pinisetty",role:"Co-Star",image:"https://i.ibb.co/pZZMKxG/actor3.jpg"},{name:"Nara Rohit",role:"Supporting",image:"https://i.ibb.co/0QLnH3H/actor4.jpg"},{name:"Ananya Nagalla",role:"Supporting",image:"https://i.ibb.co/TM2Mgq2/actor5.jpg"},{name:"Ravi Shankar",role:"Villain",image:"https://i.ibb.co/qNybG5m/actor6.jpg"},{name:"Priyanka Mohan",role:"Guest Role",image:"https://i.ibb.co/1RtqL7G/actor7.jpg"},{name:"Sri Vishnu",role:"Supporting",image:"https://i.ibb.co/bKPFsvY/actor8.jpg"},{name:"Rajendra Prasad",role:"Special Appearance",image:"https://i.ibb.co/QJfD4vW/actor9.jpg"},{name:"Radhika",role:"Supporting",image:"https://i.ibb.co/jvBvQxn/actor10.jpg"},{name:"Ravi Teja",role:"Cameo",image:"https://i.ibb.co/N9mGB0k/actor11.jpg"}],relatedMovies:[{id:101,title:"Midnight Mystery",image:"https://i.ibb.co/cDfWsvC/related1.jpg"},{id:102,title:"The Stranger",image:"https://i.ibb.co/DkFnm7g/related2.jpg"},{id:103,title:"Dark Echo",image:"https://i.ibb.co/MRVvFDZ/related3.jpg"},{id:104,title:"Silent Night",image:"https://i.ibb.co/5cG2WXF/related4.jpg"},{id:105,title:"The Guilty",image:"https://i.ibb.co/mBVR2KM/related5.jpg"},{id:106,title:"Trance",image:"https://i.ibb.co/hWD1BXg/related6.jpg"},{id:107,title:"Haunted House",image:"https://i.ibb.co/k8DQzTF/related7.jpg"},{id:108,title:"Night Watch",image:"https://i.ibb.co/hyCJTBL/related8.jpg"},{id:109,title:"The Missing",image:"https://i.ibb.co/dj8rS0M/related9.jpg"},{id:110,title:"Fear Factor",image:"https://i.ibb.co/8XvX1fL/related10.jpg"},{id:111,title:"Paranormal",image:"https://i.ibb.co/r57Kzc5/related11.jpg"},{id:112,title:"Last Breath",image:"https://i.ibb.co/B6wS7HK/related12.jpg"}],heroVideo:null,hls:null,showPaymentPopup:!1,userSubscriptionStatus:null,showRentalPopup:!1,rentalInfo:null,isSubscribed:!1,isPromoLoading:!0,promoVideoError:null,isPlayingPromo:!1,isInWatchlist:!1,showShareDialog:!1,copyStatus:"Copy"}},computed:{computedStreamType(){return this.videoUrl.includes(".m3u8")?"hls":this.videoUrl.includes(".mpd")?"dash":(this.videoUrl.includes(".mp4"),"mp4")},movieYear(){return this.movie&&this.movie.created_at?new Date(this.movie.created_at).getFullYear():(new Date).getFullYear()},formattedDuration(){if(!this.movie||!this.movie.duration)return"";const e=parseInt(this.movie.duration);if(isNaN(e))return"";const t=Math.floor(e/3600),s=Math.floor(e%3600/60);return 0===t?`${s}m`:0===s?`${t}h`:`${t}h ${s}m`},categoryName(){return this.movie&&this.movie.category_name||""},formattedCategories(){return this.movie&&this.movie.categories?this.movie.categories.map((e=>e.name)).join(", "):""},shareUrl(){return"undefined"!==typeof window?window.location.href:""}},watch:{$route(){window.scrollTo(0,0)},videoUrl:{immediate:!0,handler(e){e&&(this.streamType=this.computedStreamType)}},movie:{immediate:!0,handler(e){e&&(e.promo_hls_url||e.promo_video_url)&&this.$nextTick((()=>{this.initializeHeroVideo()}))}}},mounted(){this.initializeHeroVideo(),this.$nextTick((()=>{this.checkScrollButtons("castContainer","cast"),this.checkScrollButtons("relatedContainer","related"),this.checkDeviceType(),window.addEventListener("resize",this.checkDeviceType),window.addEventListener("scroll",this.handleScroll)}))},beforeUnmount(){this.hls&&this.hls.destroy(),window.removeEventListener("resize",this.checkDeviceType),window.removeEventListener("scroll",this.handleScroll),this.controlsTimeout&&clearTimeout(this.controlsTimeout)},created(){this.$route.params.videoUrl&&(this.videoUrl=this.$route.params.videoUrl,this.streamType=this.$route.params.videoType||"hls"),this.fetchMovieDetails(),this.loadPlayerPreferences(),this.checkWatchlistStatus()},methods:{loadPlayerPreferences(){const e=localStorage.getItem("player-preferences");if(e)try{const t=JSON.parse(e);Object.keys(this.playerSettings).forEach((e=>{void 0!==t[e]&&(this.playerSettings[e]=t[e])}))}catch(t){console.error("Error parsing saved player preferences",t)}},savePlayerPreferences(){localStorage.setItem("player-preferences",JSON.stringify(this.playerSettings))},initializeHeroVideo(){console.log("Initializing hero video...",this.movie);const e=this.$refs.heroVideo;if(!e)return void console.error("Video element not found");const t=this.movie.promo_hls_url||this.movie.video_url;if(console.log("Video source:",t),t&&t.includes(".m3u8"))try{this.isPromoLoading=!0,this.promoVideoError=null,e.classList.remove("playing"),this.promoTimer&&clearTimeout(this.promoTimer),this.promoTimer=setTimeout((()=>{mt.Ay.isSupported()?(console.log("HLS is supported, initializing HLS..."),this.hls&&(console.log("Destroying existing HLS instance"),this.hls.destroy()),this.hls=new mt.Ay({debug:!0,enableWorker:!0,lowLatencyMode:!0,backBufferLength:90,maxBufferSize:0,maxBufferLength:30,manifestLoadingTimeOut:2e4,manifestLoadingMaxRetry:3,levelLoadingTimeOut:2e4,fragLoadingTimeOut:2e4}),this.hls.on(mt.Ay.Events.MEDIA_ATTACHED,(()=>{console.log("HLS Media attached")})),this.hls.on(mt.Ay.Events.MANIFEST_PARSED,((t,s)=>{console.log("HLS Manifest parsed, levels:",s.levels.length),e.play().catch((e=>{console.error("Auto-play prevented:",e)}))})),this.hls.on(mt.Ay.Events.ERROR,((e,t)=>{if(console.error("HLS error:",t),t.fatal)switch(t.type){case mt.Ay.ErrorTypes.NETWORK_ERROR:console.log("Network error, trying to recover..."),this.hls.startLoad();break;case mt.Ay.ErrorTypes.MEDIA_ERROR:console.log("Media error, trying to recover..."),this.hls.recoverMediaError();break;default:console.log("Fatal error, cannot recover"),this.hls.destroy(),this.promoVideoError=t;break}})),this.hls.loadSource(t),this.hls.attachMedia(e)):e.canPlayType("application/vnd.apple.mpegurl")?(console.log("Using native HLS support (Safari)"),e.src=t,e.load(),e.addEventListener("loadeddata",(()=>{e.play().catch((e=>{console.error("Auto-play prevented:",e)}))}))):(console.error("HLS playback not supported on this device/browser"),this.promoVideoError=new Error("HLS playback not supported"))}),this.promoStartDelay)}catch(s){console.error("Error initializing video:",s),this.promoVideoError=s}else console.error("Invalid or missing HLS URL")},onPromoVideoCanPlay(){console.log("Video can play");const e=this.$refs.heroVideo;e&&e.play().catch((e=>{console.error("Play failed:",e)}))},onPromoVideoLoaded(){console.log("Promo video loaded successfully"),this.isPromoLoading=!1;const e=this.$refs.heroVideo;e&&(e.classList.add("playing"),e.muted=!0,e.play().catch((e=>{console.error("Play failed:",e)})))},onPromoVideoWaiting(){console.log("Promo video waiting/buffering"),this.isPromoLoading=!0},onPromoVideoPlaying(){console.log("Promo video playing"),this.isPromoLoading=!1;const e=this.$refs.heroVideo;e&&e.classList.add("playing")},handlePromoVideoError(e){console.error("Promo video error:",e),this.promoVideoError=e;const t=this.$refs.heroVideo;t&&t.classList.remove("playing")},async checkUserSubscription(){try{const e=localStorage.getItem("phone");if(!e)return!1;const t=await C.A.get(`${Zr}/users/profile/?phone=${e}`);if(t.data&&"success"===t.data.status){const e=t.data.user;if(e.is_subscribed&&e.subscription_end_date){const t=new Date(e.subscription_end_date),s=new Date;return t>s}}return!1}catch(e){return console.error("Error checking subscription:",e),!1}},async checkRentalStatus(){try{const e=localStorage.getItem("phone");if(!e)return null;const t=await C.A.get(`${Zr}/api/rentals/check/?phone=${e}&video_id=${this.movie.id}`);return t.data&&"success"===t.data.status?t.data.rental:null}catch(e){return console.error("Error checking rental status:",e),null}},async handleRentalPayment(){try{const e=localStorage.getItem("phone");if(!e)return void this.$router.push("/login");const t=await this.checkUserSubscription();if(t)return this.showRentalPopup=!1,void this.playMovie();const s=await C.A.post(`${Zr}/api/rentals/create/`,{phone:e,video_id:this.movie.id});if(s.data&&"success"===s.data.status){const t={key:s.data.key_id,amount:s.data.amount,currency:s.data.currency,name:"No1 OTT",description:`Rent ${this.movie.title} for ${this.movie.rental_period} hours`,order_id:s.data.order_id,handler:async t=>{try{const s=await C.A.post(`${Zr}/api/rentals/verify/`,{razorpay_payment_id:t.razorpay_payment_id,razorpay_order_id:t.razorpay_order_id,razorpay_signature:t.razorpay_signature,video_id:this.movie.id,phone:e});"success"===s.data.status&&(this.rentalInfo=s.data.rental,this.showRentalPopup=!1,this.playMovie())}catch(s){console.error("Rental payment verification failed:",s),alert("Payment verification failed. Please contact support.")}}},a=new window.Razorpay(t);a.open()}}catch(e){console.error("Error creating rental:",e),alert("Failed to process rental. Please try again.")}},async playMovie(){try{if(!this.movie.hls_url)throw new Error("No video URL available");this.controlsVisible=!0,this.isVideoPaused=!1,this.isVideoPlaying=!0,this.videoUrl=this.movie.hls_url,this.streamType="hls",document.body.style.overflow="hidden",this.$nextTick((()=>{if(!this.$refs.videoPlayer)throw console.error("Video player reference not found"),new Error("Video player initialization failed");this.resetControlsTimer()}))}catch(e){console.error("Error playing video:",e),this.$store.dispatch("showToast",{message:"Sorry, the video is not available at the moment. Please try again later.",type:"error"}),this.isVideoPlaying=!1,document.body.style.overflow="auto"}},closeVideo(){this.isVideoPlaying=!1,this.isPlayingPromo=!1,this.savePlayerPreferences(),document.body.style.overflow=""},async toggleWatchlist(){try{const e="true"===localStorage.getItem("isAuthenticated"),t=localStorage.getItem("token");if(!e||!t){const e=this.$route.fullPath;return void this.$router.push({path:"/login",query:{redirect:e}})}this.$store.commit("setLoading",!0);const s=await Yr.toggle(this.id);"success"===s.data.status&&(this.isInWatchlist=s.data.in_watchlist,this.$store.dispatch("showToast",{message:s.data.message,type:"success"}))}catch(e){console.error("Error toggling watchlist:",e),this.$store.dispatch("showToast",{message:"Failed to update watchlist. Please try again.",type:"error"})}finally{this.$store.commit("setLoading",!1)}},async checkWatchlistStatus(){try{const e="true"===localStorage.getItem("isAuthenticated"),t=localStorage.getItem("token");if(!e||!t)return;const s=await Yr.getStatus(this.id);this.isInWatchlist=s.data.in_watchlist}catch(e){console.error("Error checking watchlist status:",e)}},shareMovie(){const e=this.shareUrl,t={title:this.movie.title,text:this.movie.description,url:e};"undefined"!==typeof navigator&&navigator.share&&this.isMobileDevice?navigator.share(t).then((()=>{this.$store.dispatch("showToast",{message:"Shared successfully!",type:"success"})})).catch((e=>{console.error("Error sharing:",e),this.showShareDialog=!0})):this.showShareDialog=!0},toggleSearch(){this.isSearchActive=!this.isSearchActive},navigateToMovie(e){this.$router.push({name:"MovieDetails",params:{id:e}})},goBack(){this.$router.go(-1)},capitalizeText(e){return e?e.split(/[\s-]+/).map((e=>{const t=["HD","UHD","4K","TV","II","III","IV","SPY"];if(t.includes(e.toUpperCase()))return e.toUpperCase();const s=["a","an","the","and","but","or","for","nor","in","to","on","at","by","of"];return s.includes(e.toLowerCase())?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" "):""},async fetchMovieDetails(){try{const e=await C.A.get(`${Zr}/api/videos/${this.id}/`);if(console.log("API Response:",e.data),!e.data)throw new Error("Invalid response data");if(this.movie={...e.data,title:this.capitalizeText(e.data.title),description:this.capitalizeText(e.data.description)},!e.data.hls_url)throw new Error("No video URL available");this.videoUrl=e.data.hls_url,this.streamType="hls",console.log("Set video URL:",this.videoUrl),console.log("Stream type:",this.streamType)}catch(e){console.error("Error fetching movie details:",e),this.$store.dispatch("showToast",{message:"Error loading movie details. Please try again later.",type:"error"})}},checkDeviceType(){this.isMobileDevice=window.innerWidth<768||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.videoInteractionDelay=this.isMobileDevice?3500:2500},showControlsOnInteraction(){this.controlsVisible=!0,this.resetControlsTimer()},resetControlsTimer(){this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.isVideoPaused||(this.controlsTimeout=setTimeout((()=>{this.controlsVisible=!1}),this.videoInteractionDelay))},toggleControlsVisibility(e){e.preventDefault(),this.controlsVisible=!this.controlsVisible,this.controlsVisible&&!this.isVideoPaused&&this.resetControlsTimer()},onVideoPlay(){this.isVideoPaused=!1,this.resetControlsTimer()},onVideoPause(){this.isVideoPaused=!0,this.controlsVisible=!0,this.controlsTimeout&&clearTimeout(this.controlsTimeout)},handleVideoError(e){console.error("Video playback error:",e),"dash"===this.streamType&&this.videoUrl.includes(".mpd")&&(this.streamType="mp4",this.videoUrl="https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",console.log("Falling back to MP4 format"),this.$refs.videoPlayer&&this.$refs.videoPlayer.retry())},checkScrollButtons(e,t){const s=this.$refs[e];if(!s)return;this.canScrollLeft[t]=s.scrollLeft>0;const a=s.scrollWidth-s.clientWidth;this.canScrollRight[t]=s.scrollLeft<a-1},scrollLeft(e){const t=this.$refs[e];if(!t)return;const s="castContainer"===e?150:180,a=t.clientWidth,i=Math.floor(a/s),o=s*i,r=Math.max(0,t.scrollLeft-o);t.scrollTo({left:r,behavior:"smooth"})},scrollRight(e){const t=this.$refs[e];if(!t)return;const s="castContainer"===e?150:180,a=t.clientWidth,i=Math.floor(a/s),o=s*i,r=t.scrollWidth-t.clientWidth,l=Math.min(r,t.scrollLeft+o);t.scrollTo({left:l,behavior:"smooth"})},handleScroll(){const e=document.querySelector(".header-with-gradient");e&&(window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled"))},handleSubscribe(){this.showPaymentPopup=!1,this.$router.push({name:"SubscriptionPlans",query:{redirect:this.$route.fullPath,video_id:this.movie.id}})},closePaymentPopup(){this.showPaymentPopup=!1},handlePromoVideoEnd(){console.log("Promo video ended");const e=this.$refs.heroVideo;e&&(e.currentTime=0,e.play().catch((e=>{console.log("Error replaying promo video:",e)})))},playPromo(){this.movie.promo_hls_url&&(this.videoUrl=this.movie.promo_hls_url,this.isPlayingPromo=!0,this.isVideoPlaying=!0,document.body.style.overflow="hidden",this.$nextTick((()=>{this.$refs.videoPlayer&&this.resetControlsTimer()})))},shareToWhatsApp(){const e=`Check out "${this.movie.title}" on No1 OTT!\n\n${this.movie.description}\n\n`,t=`https://wa.me/?text=${encodeURIComponent(e+this.shareUrl)}`;"undefined"!==typeof window&&window.open(t,"_blank"),this.showShareDialog=!1},shareToFacebook(){const e=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(this.shareUrl)}`;"undefined"!==typeof window&&window.open(e,"_blank"),this.showShareDialog=!1},shareToTwitter(){const e=`Check out "${this.movie.title}" on No1 OTT!`,t=`https://twitter.com/intent/tweet?text=${encodeURIComponent(e)}&url=${encodeURIComponent(this.shareUrl)}`;"undefined"!==typeof window&&window.open(t,"_blank"),this.showShareDialog=!1},async copyShareLink(){if("undefined"!==typeof navigator)try{await navigator.clipboard.writeText(this.shareUrl),this.copyStatus="Copied!",this.$store.dispatch("showToast",{message:"Link copied to clipboard!",type:"success"}),setTimeout((()=>{this.copyStatus="Copy"}),2e3)}catch(e){console.error("Failed to copy:",e),this.$refs.shareLink&&(this.$refs.shareLink.select(),document.execCommand("copy"),this.copyStatus="Copied!",setTimeout((()=>{this.copyStatus="Copy"}),2e3))}}}};const tl=(0,I.A)(el,[["render",Hr],["__scopeId","data-v-108c0ec5"]]);var sl=tl;const al={class:"min-h-screen bg-[#121212] text-white"},il={class:"relative h-[30vh] bg-gradient-to-r from-[#1a1a1a] to-[#2d2d2d] overflow-visible"},ol={class:"relative container mx-auto px-4 h-full flex items-center"},rl={class:"max-w-2xl w-full"},ll={class:"flex flex-wrap items-center gap-3 relative"},nl={class:"relative flex-1 max-w-md"},cl={class:"relative"},dl=["placeholder"],ul={key:0,class:"absolute w-full mt-2 bg-[#1d1d1d] rounded-lg shadow-xl border border-white/10 max-h-[300px] overflow-y-auto",style:{"z-index":"100"}},hl={key:0,class:"p-4 text-center text-white/60"},ml={key:1,class:"p-4 text-center text-white/60"},pl=["onClick"],fl={class:"flex items-start gap-3"},gl={class:"font-medium"},vl={class:"text-sm text-white/60"},bl={key:0},yl={key:1},kl={key:2},wl={key:3},xl=["disabled"],Ll={class:"container mx-auto px-4 -mt-6"},Cl={class:"bg-[#1d1d1d] rounded-xl p-4 shadow-lg mb-6 mt-8"},Sl={class:"flex items-center gap-4 overflow-x-auto pb-2 scrollbar-thin"},El=["onClick"],Pl={class:"text-sm font-medium"},_l={class:"text-xs opacity-60"},Ml={class:"grid grid-cols-12 gap-6"},Al={class:"col-span-12 md:col-span-3 space-y-4 mb-8"},Tl={class:"bg-[#1d1d1d] rounded-xl p-4"},Vl={class:"flex items-center justify-between mb-4"},Il={class:"flex flex-wrap gap-2 mb-4"},Dl={class:"truncate max-w-[120px]"},Rl=["onClick"],$l={key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4"},Fl={class:"bg-[#1d1d1d] rounded-xl p-6 max-w-md w-full"},Xl={class:"flex justify-end gap-3"},jl={key:1,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 px-4"},Nl={class:"bg-[#1d1d1d] rounded-xl p-6 max-w-md w-full"},Ul={class:"text-xl font-bold mb-2"},Bl={class:"text-white/70 mb-6"},Ol={class:"flex justify-end gap-3"},Ql={class:"bg-white/5 rounded-lg p-3 mb-4"},Wl={class:"grid grid-cols-2 gap-2"},Kl={class:"bg-white/5 rounded p-2"},ql={class:"text-lg font-bold"},zl={class:"bg-white/5 rounded p-2"},Hl={class:"text-lg font-bold"},Jl={class:"bg-white/5 rounded-lg p-3 mb-4"},Gl={class:"flex flex-wrap gap-2"},Yl=["onClick"],Zl={class:"bg-white/5 rounded-lg p-3"},en={class:"space-y-2"},tn=["onClick"],sn={class:"bg-[#1d1d1d] rounded-xl p-4"},an={class:"flex flex-wrap gap-2"},on=["onClick"],rn={key:0,class:"bg-[#1d1d1d] rounded-xl p-4"},ln={class:"space-y-3 max-h-[600px] overflow-y-auto pr-2"},nn={class:"relative w-32 h-20 rounded-lg overflow-hidden flex-shrink-0"},cn=["src","alt"],dn={class:"absolute bottom-1 right-1 px-1.5 py-0.5 bg-black/70 text-xs rounded"},un={class:"flex-1 min-w-0"},hn={class:"text-sm font-medium line-clamp-2 mb-1"},mn={class:"flex items-center gap-2 text-xs text-white/60"},pn={key:0,class:"mt-4 text-center"},fn={class:"col-span-12 md:col-span-9"},gn={key:0,class:"bg-[#1d1d1d] rounded-xl overflow-hidden"},vn={class:"p-6 border-b border-white/10"},bn={class:"text-2xl font-bold mb-2"},yn={class:"text-white/60"},kn={class:"p-6"},wn={class:"bg-[#151515] rounded-lg p-4 mb-6"},xn={class:"font-bold mb-3"},Ln={class:"grid grid-cols-3 gap-4"},Cn={class:"text-white/60 text-sm mb-1"},Sn={class:"text-xl font-bold"},En={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"},Pn={key:0,class:"col-span-full flex justify-center items-center py-12"},_n=["onClick"],Mn={class:"aspect-square rounded-xl overflow-hidden relative group-hover:scale-[1.02] transition-all"},An=["src","alt"],Tn={class:"absolute bottom-0 left-0 right-0 p-3 pb-2 z-20"},Vn={class:"font-bold text-xl mb-0.5 text-white"},In={class:"text-sm text-white/80"},Dn={class:"p-6 border-t border-white/10 bg-[#151515]"},Rn={class:"flex flex-wrap gap-3"},$n=["onClick"],Fn={key:1,class:"space-y-6"},Xn={class:"bg-[#1d1d1d] rounded-xl p-6"},jn={class:"flex items-start justify-between"},Nn={class:"text-2xl font-bold mb-2"},Un={class:"text-white/60"},Bn={class:"flex items-center gap-4 overflow-x-auto pb-2"},On=["onClick"],Qn={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Wn={class:"bg-[#1d1d1d] rounded-xl overflow-hidden"},Kn={class:"relative aspect-video"},qn=["src","alt"],zn={class:"absolute bottom-2 right-2 px-2 py-1 rounded bg-black/70 text-sm"},Hn={class:"absolute top-2 right-2 px-2 py-1 rounded bg-[#c30059] text-xs font-medium"},Jn={class:"p-4"},Gn={class:"font-medium mb-2 line-clamp-2"},Yn={class:"flex items-center gap-4 text-sm text-white/60"},Zn={class:"text-center mt-8"},ec={key:0,class:"fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 flex items-center"};function tc(e,t,s,o,r,l){const n=(0,i.g2)("AppHeader"),c=(0,i.g2)("AppFooter");return(0,i.uX)(),(0,i.CE)("div",al,[(0,i.bF)(n),(0,i.Lk)("div",il,[t[16]||(t[16]=(0,i.Lk)("div",{class:"absolute inset-0 opacity-30"},[(0,i.Lk)("img",{src:"https://images.unsplash.com/photo-1524492412937-b28074a5d7da?w=1200&auto=format&fit=crop&q=80",alt:"India Map",class:"w-full h-full object-cover"})],-1)),t[17]||(t[17]=(0,i.Lk)("div",{class:"absolute inset-0 bg-gradient-to-b from-[#1a1a1a]/80 to-[#1a1a1a]"},null,-1)),(0,i.Lk)("div",ol,[(0,i.Lk)("div",rl,[t[14]||(t[14]=(0,i.Lk)("h1",{class:"text-3xl md:text-4xl font-bold mb-3"},"Regional Content Hub",-1)),t[15]||(t[15]=(0,i.Lk)("p",{class:"text-base md:text-lg text-white/70 mb-4"},"Discover local stories, culture, and entertainment from every corner of India",-1)),(0,i.Lk)("div",ll,[(0,i.Lk)("div",nl,[(0,i.Lk)("div",cl,[(0,i.bo)((0,i.Lk)("input",{type:"text",placeholder:l.searchPlaceholder,class:"w-full px-4 py-2 bg-white/10 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#c30059] text-white placeholder-white/50 pr-10","onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),onInput:t[1]||(t[1]=(...e)=>l.handleLocationSearch&&l.handleLocationSearch(...e)),onFocus:t[2]||(t[2]=e=>r.showLocationDropdown=!0)},null,40,dl),[[a.Jo,r.searchQuery]]),(0,i.Lk)("i",{class:(0,d.C4)(["fas",r.isSearching?"fa-spinner fa-spin":"fa-search","absolute right-3 top-1/2 -translate-y-1/2 text-white/50"])},null,2),r.showLocationDropdown&&(l.filteredLocations.length>0||r.isSearching)?((0,i.uX)(),(0,i.CE)("div",ul,[r.isSearching?((0,i.uX)(),(0,i.CE)("div",hl,t[13]||(t[13]=[(0,i.Lk)("i",{class:"fas fa-spinner fa-spin mr-2"},null,-1),(0,i.eW)(" Searching... ")]))):0===l.filteredLocations.length?((0,i.uX)(),(0,i.CE)("div",ml," No results found ")):((0,i.uX)(!0),(0,i.CE)(i.FK,{key:2},(0,i.pI)(l.filteredLocations,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,onClick:t=>l.selectLocation(e),class:"p-3 hover:bg-white/5 cursor-pointer border-b border-white/10 last:border-0"},[(0,i.Lk)("div",fl,[(0,i.Lk)("i",{class:(0,d.C4)(["fas",{"fa-map":"state"===e.type,"fa-building":"district"===e.type,"fa-landmark":"constituency"===e.type,"fa-city":"mandal"===e.type,"fa-home":"village"===e.type},"text-[#c30059] mt-1"])},null,2),(0,i.Lk)("div",null,[(0,i.Lk)("div",gl,(0,d.v_)(e.name),1),(0,i.Lk)("div",vl,[(0,i.Lk)("span",null,(0,d.v_)(e.type.charAt(0).toUpperCase()+e.type.slice(1)),1),"state"!==e.type?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},["district"===e.type?((0,i.uX)(),(0,i.CE)("span",bl," in "+(0,d.v_)(e.parentInfo.state),1)):(0,i.Q3)("",!0),"constituency"===e.type?((0,i.uX)(),(0,i.CE)("span",yl," in "+(0,d.v_)(e.parentInfo.district)+", "+(0,d.v_)(e.parentInfo.state),1)):(0,i.Q3)("",!0),"mandal"===e.type?((0,i.uX)(),(0,i.CE)("span",kl," in "+(0,d.v_)(e.parentInfo.constituency)+", "+(0,d.v_)(e.parentInfo.district),1)):(0,i.Q3)("",!0),"village"===e.type?((0,i.uX)(),(0,i.CE)("span",wl," in "+(0,d.v_)(e.parentInfo.mandal)+", "+(0,d.v_)(e.parentInfo.constituency),1)):(0,i.Q3)("",!0)],64)):(0,i.Q3)("",!0)])])])],8,pl)))),128))])):(0,i.Q3)("",!0)])]),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.useCurrentLocation&&l.useCurrentLocation(...e)),class:"px-4 py-2 bg-white/10 rounded-lg hover:bg-white/20 transition-colors flex items-center gap-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed",disabled:r.isLoadingLocation},[(0,i.Lk)("i",{class:(0,d.C4)(["fas",r.isLoadingLocation?"fa-spinner fa-spin":"fa-location-arrow"])},null,2),(0,i.Lk)("span",null,(0,d.v_)(r.isLoadingLocation?"Locating...":"Near Me"),1)],8,xl)])])])]),(0,i.Lk)("div",Ll,[(0,i.Lk)("div",Cl,[(0,i.Lk)("div",Sl,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.navigationLevels,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:t=>l.setActiveLevel(e),class:(0,d.C4)(["flex flex-col items-center px-4 py-2 rounded-lg transition-all whitespace-nowrap",[r.activeLevel.id===e.id?"bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white":"hover:bg-white/5 text-white/70 hover:text-white"]])},[(0,i.Lk)("i",{class:(0,d.C4)(["fas",e.icon,"text-xl mb-1"])},null,2),(0,i.Lk)("span",Pl,(0,d.v_)(e.name),1),(0,i.Lk)("span",_l,(0,d.v_)(e.count),1)],10,El)))),128))])]),(0,i.Lk)("div",Ml,[(0,i.Lk)("div",Al,[(0,i.Lk)("div",Tl,[(0,i.Lk)("div",Vl,[t[19]||(t[19]=(0,i.Lk)("h2",{class:"text-lg font-bold"},"Quick Actions",-1)),l.hasSelection?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[4]||(t[4]=e=>r.showClearConfirm=!0),class:"px-3 py-1 bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300 rounded-lg text-sm transition-all flex items-center gap-2"},t[18]||(t[18]=[(0,i.Lk)("i",{class:"fas fa-trash-alt text-xs"},null,-1),(0,i.Lk)("span",null,"Clear All",-1)]))):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Il,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.breadcrumbTrail,((e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:(0,d.C4)(["px-3 py-1 rounded-full text-sm flex items-center gap-2 transition-colors group",s===l.breadcrumbTrail.length-1?"bg-[#c30059]":"bg-white/10"])},[(0,i.Lk)("i",{class:(0,d.C4)(["fas",l.getIconForLevel(r.navigationLevels[s].id),"text-xs"])},null,2),(0,i.Lk)("span",Dl,(0,d.v_)(e.name),1),s!==l.breadcrumbTrail.length-1?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:e=>l.showNavigateConfirm(s),class:"opacity-0 group-hover:opacity-100 hover:text-white/80 transition-opacity"},t[20]||(t[20]=[(0,i.Lk)("i",{class:"fas fa-times text-xs"},null,-1)]),8,Rl)):(0,i.Q3)("",!0)],2)))),128))]),r.showClearConfirm?((0,i.uX)(),(0,i.CE)("div",$l,[(0,i.Lk)("div",Fl,[t[21]||(t[21]=(0,i.Lk)("h3",{class:"text-xl font-bold mb-2"},"Reset Selection?",-1)),t[22]||(t[22]=(0,i.Lk)("p",{class:"text-white/70 mb-6"}," This will clear your current location selection and return to the states view. Are you sure you want to continue? ",-1)),(0,i.Lk)("div",Xl,[(0,i.Lk)("button",{onClick:t[5]||(t[5]=e=>r.showClearConfirm=!1),class:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors"}," Cancel "),(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.confirmClear&&l.confirmClear(...e)),class:"px-4 py-2 bg-red-500/80 hover:bg-red-500 rounded-lg transition-colors"}," Reset ")])])])):(0,i.Q3)("",!0),null!==r.showNavigateBackConfirm?((0,i.uX)(),(0,i.CE)("div",jl,[(0,i.Lk)("div",Nl,[(0,i.Lk)("h3",Ul,"Go Back to "+(0,d.v_)(l.getNavigateBackTitle)+"?",1),(0,i.Lk)("p",Bl," This will clear your selections after "+(0,d.v_)(l.getNavigateBackTitle)+". Are you sure you want to continue? ",1),(0,i.Lk)("div",Ol,[(0,i.Lk)("button",{onClick:t[7]||(t[7]=e=>r.showNavigateBackConfirm=null),class:"px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors"}," Cancel "),(0,i.Lk)("button",{onClick:t[8]||(t[8]=(...e)=>l.confirmNavigateBack&&l.confirmNavigateBack(...e)),class:"px-4 py-2 bg-[#c30059] hover:bg-[#d4015f] rounded-lg transition-colors"}," Continue ")])])])):(0,i.Q3)("",!0),(0,i.Lk)("div",Ql,[t[25]||(t[25]=(0,i.Lk)("h3",{class:"text-sm font-medium mb-2 text-white/80"},"Content Overview",-1)),(0,i.Lk)("div",Wl,[(0,i.Lk)("div",Kl,[t[23]||(t[23]=(0,i.Lk)("div",{class:"text-xs text-white/60 mb-1"},"Total Videos",-1)),(0,i.Lk)("div",ql,(0,d.v_)(l.currentLevelVideos.length),1)]),(0,i.Lk)("div",zl,[t[24]||(t[24]=(0,i.Lk)("div",{class:"text-xs text-white/60 mb-1"},"Categories",-1)),(0,i.Lk)("div",Hl,(0,d.v_)(l.uniqueCategories.length),1)])])]),(0,i.Lk)("div",Jl,[t[26]||(t[26]=(0,i.Lk)("h3",{class:"text-sm font-medium mb-2 text-white/80"},"Trending Topics",-1)),(0,i.Lk)("div",Gl,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.trendingTopics,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:t=>l.filterByTopic(e),class:(0,d.C4)(["px-2 py-1 rounded text-xs bg-white/5 hover:bg-[#c30059] transition-colors",{"bg-[#c30059]":e.active}])}," # "+(0,d.v_)(e.name),11,Yl)))),128))])]),(0,i.Lk)("div",Zl,[t[27]||(t[27]=(0,i.Lk)("h3",{class:"text-sm font-medium mb-2 text-white/80"},"Quick Navigation",-1)),(0,i.Lk)("div",en,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.quickNavigationActions,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:e.action,class:"w-full p-2 rounded bg-white/5 hover:bg-white/10 transition-colors text-left text-sm flex items-center gap-2"},[(0,i.Lk)("i",{class:(0,d.C4)(["fas",e.icon,"text-[#c30059]"])},null,2),(0,i.Lk)("span",null,(0,d.v_)(e.name),1)],8,tn)))),128))])])]),(0,i.Lk)("div",sn,[t[28]||(t[28]=(0,i.Lk)("h2",{class:"text-lg font-bold mb-3"},"Quick Filters",-1)),(0,i.Lk)("div",an,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.quickFilters,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:t=>l.applyFilter(e),class:(0,d.C4)(["px-3 py-1 rounded-full text-sm transition-colors",e.active?"bg-[#c30059] text-white":"bg-white/10 hover:bg-white/20"])},(0,d.v_)(e.name),11,on)))),128))])]),l.currentLevelVideos.length>0?((0,i.uX)(),(0,i.CE)("div",rn,[t[31]||(t[31]=(0,i.Lk)("h2",{class:"text-lg font-bold mb-3"},"Related Videos",-1)),(0,i.Lk)("div",ln,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.paginatedVideos,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"flex gap-3 p-2 rounded-lg hover:bg-white/5 transition-colors cursor-pointer"},[(0,i.Lk)("div",nn,[(0,i.Lk)("img",{src:e.thumbnail,alt:e.title,class:"w-full h-full object-cover"},null,8,cn),(0,i.Lk)("div",dn,(0,d.v_)(e.duration),1)]),(0,i.Lk)("div",un,[(0,i.Lk)("h3",hn,(0,d.v_)(e.title),1),(0,i.Lk)("div",mn,[(0,i.Lk)("span",null,(0,d.v_)(e.views)+" views",1),t[29]||(t[29]=(0,i.Lk)("span",null,"•",-1)),(0,i.Lk)("span",null,(0,d.v_)(e.date),1)])])])))),128))]),l.hasMoreVideos?((0,i.uX)(),(0,i.CE)("div",pn,[(0,i.Lk)("button",{onClick:t[9]||(t[9]=(...e)=>l.loadMoreVideos&&l.loadMoreVideos(...e)),class:"px-4 py-2 bg-white/5 hover:bg-white/10 rounded-lg text-sm transition-colors inline-flex items-center gap-2"},t[30]||(t[30]=[(0,i.Lk)("span",null,"Load More",-1),(0,i.Lk)("i",{class:"fas fa-chevron-down text-xs"},null,-1)]))])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",fn,[r.selectedVillage?((0,i.uX)(),(0,i.CE)("div",Fn,[(0,i.Lk)("div",Xn,[(0,i.Lk)("div",jn,[(0,i.Lk)("div",null,[(0,i.Lk)("h2",Nn,(0,d.v_)(r.selectedVillage.name),1),(0,i.Lk)("p",Un,(0,d.v_)(l.getLocationPath),1)]),(0,i.Lk)("button",{onClick:t[10]||(t[10]=(...e)=>l.toggleFavorite&&l.toggleFavorite(...e)),class:(0,d.C4)(["w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors",{"text-[#c30059]":r.isFavorite}])},[(0,i.Lk)("i",{class:(0,d.C4)(["fas",r.isFavorite?"fa-heart":"fa-heart-o"])},null,2)],2)])]),(0,i.Lk)("div",Bn,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.videoCategories,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:t=>l.setActiveCategory(e),class:(0,d.C4)(["px-4 py-2 rounded-full whitespace-nowrap transition-colors",[r.activeCategory.id===e.id?"bg-[#c30059] text-white":"bg-white/5 hover:bg-white/10"]])},(0,d.v_)(e.name),11,On)))),128))]),(0,i.Lk)("div",Qn,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.filteredVideos,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"group cursor-pointer"},[(0,i.Lk)("div",Wn,[(0,i.Lk)("div",Kn,[(0,i.Lk)("img",{src:e.thumbnail,alt:e.title,class:"w-full h-full object-cover"},null,8,qn),t[34]||(t[34]=(0,i.Lk)("div",{class:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center"},[(0,i.Lk)("button",{class:"w-12 h-12 rounded-full bg-[#c30059] flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-play text-xl"})])],-1)),(0,i.Lk)("div",zn,(0,d.v_)(e.duration),1),(0,i.Lk)("div",Hn,(0,d.v_)(e.quality),1)]),(0,i.Lk)("div",Jn,[(0,i.Lk)("h3",Gn,(0,d.v_)(e.title),1),(0,i.Lk)("div",Yn,[(0,i.Lk)("span",null,(0,d.v_)(e.views)+" views",1),(0,i.Lk)("span",null,(0,d.v_)(e.date),1)])])])])))),128))]),(0,i.Lk)("div",Zn,[l.hasMoreVideos?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[11]||(t[11]=(...e)=>l.loadMoreVideos&&l.loadMoreVideos(...e)),class:"px-6 py-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors"}," Load More Videos ")):(0,i.Q3)("",!0)])])):((0,i.uX)(),(0,i.CE)("div",gn,[(0,i.Lk)("div",vn,[(0,i.Lk)("h2",bn,(0,d.v_)(l.getMapTitle),1),(0,i.Lk)("p",yn,(0,d.v_)(l.getMapDescription),1)]),(0,i.Lk)("div",kn,[(0,i.Lk)("div",wn,[(0,i.Lk)("h3",xn,(0,d.v_)(l.getMapStats.title),1),(0,i.Lk)("div",Ln,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.getMapStats.stats,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.label,class:"bg-white/5 rounded-lg p-3"},[(0,i.Lk)("p",Cn,(0,d.v_)(e.label),1),(0,i.Lk)("p",Sn,(0,d.v_)(e.value),1)])))),128))])]),(0,i.Lk)("div",En,[r.loading?((0,i.uX)(),(0,i.CE)("div",Pn,t[32]||(t[32]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#c30059]"},null,-1)]))):((0,i.uX)(!0),(0,i.CE)(i.FK,{key:1},(0,i.pI)(l.currentLevelItems,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:t=>e&&e.id?l.selectItem(e):null,class:"relative group"},[(0,i.Lk)("div",Mn,[t[33]||(t[33]=(0,i.Lk)("div",{class:"absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent opacity-90 z-10"},null,-1)),(0,i.Lk)("img",{src:e.image_url||"https://no1ott.com/_next/image?url=https%3A%2F%2Fnoonenews.s3.ap-south-1.amazonaws.com%2Fnooneott%2Fdjmhnewaschzhcp1746893494878_Original.jpg&w=1080&q=75",class:"w-full h-full object-cover absolute inset-0",alt:e.name},null,8,An),(0,i.Lk)("div",Tn,[(0,i.Lk)("h4",Vn,(0,d.v_)(e.name),1),(0,i.Lk)("p",In,[r.selectedState?r.selectedDistrict?r.selectedConstituency?r.selectedMandal?((0,i.uX)(),(0,i.CE)(i.FK,{key:4},[(0,i.eW)((0,d.v_)(e.videos?.length||0)+" Videos ",1)],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:3},[(0,i.eW)((0,d.v_)(l.getVillageCount(e))+" Villages ",1)],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[(0,i.eW)((0,d.v_)(e.mandals_count||0)+" Mandals ",1)],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)((0,d.v_)(e.constituencies_count||0)+" Constituencies ",1)],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)((0,d.v_)(e.districts_count||0)+" Districts ",1)],64))])])])],8,_n)))),128))])]),(0,i.Lk)("div",Dn,[(0,i.Lk)("div",Rn,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.quickFilters,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e.id,onClick:t=>l.applyFilter(e),class:(0,d.C4)(["px-4 py-2 rounded-lg text-sm transition-colors",e.active?"bg-[#c30059] text-white":"bg-white/5 hover:bg-white/10"])},[(0,i.Lk)("i",{class:(0,d.C4)(["fas",e.icon,"mr-2"])},null,2),(0,i.eW)(" "+(0,d.v_)(e.name),1)],10,$n)))),128))])])]))])])]),r.error?((0,i.uX)(),(0,i.CE)("div",ec,[t[36]||(t[36]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle mr-2"},null,-1)),(0,i.Lk)("span",null,(0,d.v_)(r.error),1),(0,i.Lk)("button",{onClick:t[12]||(t[12]=e=>r.error=null),class:"ml-4 hover:text-white/80"},t[35]||(t[35]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))])):(0,i.Q3)("",!0),(0,i.bF)(c)])}s(2489),s(8237);const sc=C.A.create({baseURL:"http://192.168.0.104:8000/api/",timeout:1e4,headers:{"Content-Type":"application/json"}});var ac={name:"RegionalContent",components:{AppHeader:We,AppFooter:Wt},data(){return{searchQuery:"",searchTimeout:null,isSearching:!1,searchResults:[],searchDebounceTime:300,loading:!1,error:null,states:[],districts:[],constituencies:[],mandals:[],villages:[],showClearConfirm:!1,showNavigateBackConfirm:null,navigateBackIndex:null,activeLevel:{id:"state",name:"States",icon:"fa-map",count:0},selectedState:null,selectedDistrict:null,selectedConstituency:null,selectedMandal:null,selectedVillage:null,isFavorite:!1,activeCategory:{id:"all",name:"All Videos"},videosPerPage:5,currentVideoPage:1,navigationLevels:[{id:"state",name:"States",icon:"fa-map",count:0},{id:"district",name:"Districts",icon:"fa-building",count:0},{id:"constituency",name:"Constituencies",icon:"fa-landmark",count:0},{id:"mandal",name:"Mandals",icon:"fa-city",count:0},{id:"village",name:"Villages",icon:"fa-home",count:0},{id:"favorites",name:"Favorites",icon:"fa-heart",count:0}],videoCategories:[{id:"all",name:"All Videos"},{id:"news",name:"News"},{id:"culture",name:"Culture & Festivals"},{id:"education",name:"Education"},{id:"agriculture",name:"Agriculture"},{id:"development",name:"Development"}],quickFilters:[{id:"latest",name:"Latest Updates",icon:"fa-clock",active:!1},{id:"trending",name:"Trending",icon:"fa-fire",active:!1},{id:"hd",name:"HD Quality",icon:"fa-video",active:!1},{id:"local",name:"Local News",icon:"fa-newspaper",active:!1}],trendingTopics:[{id:1,name:"LocalNews",active:!1},{id:2,name:"Development",active:!1},{id:3,name:"Culture",active:!1},{id:4,name:"Education",active:!1},{id:5,name:"Agriculture",active:!1}],quickNavigationActions:[{id:1,name:"Latest Updates",icon:"fa-clock",action:()=>this.filterByDate("latest")},{id:2,name:"Most Viewed",icon:"fa-eye",action:()=>this.filterByViews()},{id:3,name:"HD Content",icon:"fa-video",action:()=>this.filterByQuality("HD")},{id:4,name:"Saved Items",icon:"fa-bookmark",action:()=>this.showSavedItems()}],isLoadingLocation:!1,locationError:null,showLocationDropdown:!1,locations:[{id:1,name:"Ichchapuram Town",coordinates:{lat:19.1136,lng:84.6868},state:"Andhra Pradesh",district:"Srikakulam",constituency:"Ichchapuram",mandal:"Ichchapuram Mandal",village:"Ichchapuram Town"},{id:2,name:"Paradise",coordinates:{lat:17.44,lng:78.4983},state:"Telangana",district:"Hyderabad",constituency:"Secunderabad",mandal:"Secunderabad Circle",village:"Paradise"}]}},computed:{hasSelection(){return this.selectedState||this.selectedDistrict||this.selectedConstituency||this.selectedMandal||this.selectedVillage},breadcrumbTrail(){const e=[];return this.selectedState&&e.push({name:this.selectedState.name,type:"state"}),this.selectedDistrict&&e.push({name:this.selectedDistrict.name,type:"district"}),this.selectedConstituency&&e.push({name:this.selectedConstituency.name,type:"constituency"}),this.selectedMandal&&e.push({name:this.selectedMandal.name,type:"mandal"}),this.selectedVillage&&e.push({name:this.selectedVillage.name,type:"village"}),e},currentLevelItems(){return this.loading?[]:this.selectedState?!this.selectedDistrict&&this.districts.length>0?this.districts:!this.selectedConstituency&&this.constituencies.length>0?this.constituencies:!this.selectedMandal&&this.mandals.length>0?this.mandals:this.villages.length>0?this.villages:[]:this.states},getNextLevelName(){return this.selectedState?this.selectedDistrict?this.selectedConstituency?this.selectedMandal?"videos":"villages":"mandals":"constituencies":"districts"},filteredVideos(){if(!this.selectedVillage)return[];let e=this.selectedVillage.videos;return"all"!==this.activeCategory.id&&(e=e.filter((e=>e.category===this.activeCategory.id))),this.quickFilters.find((e=>"hd"===e.id&&e.active))&&(e=e.filter((e=>"HD"===e.quality||"4K"===e.quality))),this.quickFilters.find((e=>"latest"===e.id&&e.active))&&(e=e.sort(((e,t)=>new Date(t.date)-new Date(e.date)))),e},getLocationPath(){return this.breadcrumbTrail.map((e=>e.name)).join(" > ")},getMapTitle(){return this.selectedState?this.selectedDistrict?this.selectedDistrict.name:this.selectedState.name:"Explore India"},getMapDescription(){return this.selectedState?this.selectedDistrict?`Explore areas in ${this.selectedDistrict.name}`:`Explore districts in ${this.selectedState.name}`:"Select a state to explore regional content"},getMapStats(){return this.selectedState?this.selectedDistrict?{title:`${this.selectedDistrict.name} Statistics`,stats:[{label:"Constituencies",value:this.selectedDistrict.constituencies?.length||0},{label:"Mandals",value:this.selectedDistrict.constituencies?.reduce(((e,t)=>e+(t.mandals?.length||0)),0)||0},{label:"Villages",value:this.selectedDistrict.constituencies?.reduce(((e,t)=>e+t.mandals?.reduce(((e,t)=>e+(t.villages?.length||0)),0)||0),0)||0}]}:{title:`${this.selectedState.name} Statistics`,stats:[{label:"Districts",value:this.selectedState.districts_count||this.districts.length||0},{label:"Constituencies",value:this.selectedState.constituencies_count||this.districts.reduce(((e,t)=>e+(t.constituencies?.length||0)),0)||0},{label:"Mandals",value:this.selectedState.mandals_count||this.districts.reduce(((e,t)=>e+t.constituencies?.reduce(((e,t)=>e+(t.mandals?.length||0)),0)||0),0)||0},{label:"Villages",value:this.selectedState.villages_count||this.districts.reduce(((e,t)=>e+t.constituencies?.reduce(((e,t)=>e+t.mandals?.reduce(((e,t)=>e+(t.villages?.length||0)),0)||0),0)||0),0)||0}]}:{title:"India Statistics",stats:[{label:"States",value:this.states.length},{label:"Total Districts",value:this.states.reduce(((e,t)=>e+(t.districts_count||0)),0)},{label:"Total Videos",value:"2,500+"}]}},getListTitle(){return this.selectedState?this.selectedDistrict?this.selectedConstituency?this.selectedMandal?"Villages":"Mandals":"Constituencies":"Districts":"States"},currentLevelVideos(){if(this.selectedVillage&&this.selectedVillage.videos)return this.selectedVillage.videos;if(this.selectedMandal){const e=[],t=this.selectedState?.districts?.find((e=>e.id===this.selectedDistrict.id)),s=t?.constituencies?.find((e=>e.id===this.selectedConstituency.id)),a=s?.mandals?.find((e=>e.id===this.selectedMandal.id));return a?.villages?.forEach((t=>{t.videos&&e.push(...t.videos)})),e}if(this.selectedConstituency){const e=[],t=this.selectedState?.districts?.find((e=>e.id===this.selectedDistrict.id)),s=t?.constituencies?.find((e=>e.id===this.selectedConstituency.id));return s?.mandals?.forEach((t=>{t.villages?.forEach((t=>{t.videos&&e.push(...t.videos)}))})),e}if(this.selectedDistrict){const e=[],t=this.selectedState?.districts?.find((e=>e.id===this.selectedDistrict.id));return t?.constituencies?.forEach((t=>{t.mandals?.forEach((t=>{t.villages?.forEach((t=>{t.videos&&e.push(...t.videos)}))}))})),e}if(this.selectedState){const e=[];return this.selectedState.districts?.forEach((t=>{t.constituencies?.forEach((t=>{t.mandals?.forEach((t=>{t.villages?.forEach((t=>{t.videos&&e.push(...t.videos)}))}))}))})),e}return[]},paginatedVideos(){const e=0,t=this.currentVideoPage*this.videosPerPage;return this.currentLevelVideos.slice(e,t)},hasMoreVideos(){return this.currentLevelVideos.length>this.paginatedVideos.length},uniqueCategories(){const e=new Set;return this.currentLevelVideos.forEach((t=>{t.category&&e.add(t.category)})),Array.from(e)},filteredLocations(){return this.searchResults},searchPlaceholder(){return"Search states, districts, constituencies, mandals, or villages..."},getNavigateBackTitle(){return"state"===this.showNavigateBackConfirm?"state":"district"===this.showNavigateBackConfirm?"district":"constituency"===this.showNavigateBackConfirm?"constituency":"mandal"===this.showNavigateBackConfirm?"mandal":"village"}},methods:{async fetchStates(){try{const e=await sc.get("frontend/states/");console.log("States response:",e.data),"success"===e.data.status&&(this.states=e.data.data,this.navigationLevels[0].count=this.states.length)}catch(e){console.error("Error fetching states:",e),this.error="Error loading states. Please try again later."}},async fetchDistricts(e){try{console.log("Fetching districts for state ID:",e);const t=await sc.get("frontend/districts/",{params:{state_id:e}});if(!t.data||"success"!==t.data.status||!Array.isArray(t.data.data))throw new Error("Invalid response format from server");this.districts=await Promise.all(t.data.data.map((async e=>{const t=await sc.get("frontend/constituencies/",{params:{district_id:e.id}});return"success"===t.data.status&&(e.constituencies=await Promise.all(t.data.data.map((async e=>{const t=await sc.get("frontend/mandals/",{params:{constituency_id:e.id}});return"success"===t.data.status&&(e.mandals=await Promise.all(t.data.data.map((async e=>{const t=await sc.get("frontend/villages/",{params:{mandal_id:e.id}});return"success"===t.data.status&&(e.villages=t.data.data),e})))),e})))),e}))),this.navigationLevels[1].count=this.districts.length,console.log("Districts loaded with full hierarchy:",this.districts)}catch(t){console.error("Error details:",t.response||t),this.error=t.response?.data?.message||"Error loading districts. Please try again later.",this.districts=[],this.navigationLevels[1].count=0}},async fetchConstituencies(e){try{const t=await sc.get("frontend/constituencies/",{params:{district_id:e}});"success"===t.data.status&&(this.constituencies=await Promise.all(t.data.data.map((async e=>{const t=await sc.get("frontend/mandals/",{params:{constituency_id:e.id}});return"success"===t.data.status&&(e.mandals=await Promise.all(t.data.data.map((async e=>{const t=await sc.get("frontend/villages/",{params:{mandal_id:e.id}});return"success"===t.data.status&&(e.villages=t.data.data),e})))),e}))),this.navigationLevels[2].count=this.constituencies.length)}catch(t){console.error("Error fetching constituencies:",t),this.error="Error loading constituencies. Please try again later."}},async fetchMandals(e){try{const t=await sc.get("frontend/mandals/",{params:{constituency_id:e}});"success"===t.data.status&&(this.mandals=t.data.data.map((e=>({...e,villages_count:e.villages?.length||e.villages_count||0}))),this.navigationLevels[3].count=this.mandals.length,console.log("Mandals loaded with village counts:",this.mandals))}catch(t){console.error("Error fetching mandals:",t),this.error="Error loading mandals. Please try again later."}},async fetchVillages(e){try{const t=await sc.get("frontend/villages/",{params:{mandal_id:e}});"success"===t.data.status&&(this.villages=t.data.data,this.navigationLevels[4].count=this.villages.length)}catch(t){console.error("Error fetching villages:",t),this.error="Error loading villages. Please try again later."}},async selectState(e){try{this.loading=!0,this.error=null,this.selectedState=e,this.selectedDistrict=null,this.selectedConstituency=null,this.selectedMandal=null,this.selectedVillage=null,console.log("Selected state:",e);try{const t=await sc.get(`frontend/state-statistics/${e.id}/`);if(t.data&&"success"===t.data.status){const s=t.data.data;this.selectedState={...e,districts_count:s.districts_count||0,constituencies_count:s.constituencies_count||0,mandals_count:s.mandals_count||0,villages_count:s.villages_count||0}}}catch(t){console.error("Error fetching state statistics:",t)}const s=await sc.get("frontend/districts/",{params:{state_id:e.id}});if(!s.data||"success"!==s.data.status||!Array.isArray(s.data.data))throw new Error("Invalid response format from server");this.districts=s.data.data,this.navigationLevels[1].count=this.districts.length,this.selectedState.districts_count||(this.selectedState.districts_count=this.districts.length)}catch(s){console.error("Error details:",s.response||s),this.error=s.response?.data?.message||s.message||"Error loading districts. Please try again later.",this.districts=[],this.navigationLevels[1].count=0}finally{this.loading=!1}},async selectDistrict(e){this.selectedDistrict=e,this.selectedConstituency=null,this.selectedMandal=null,this.selectedVillage=null,await this.fetchConstituencies(e.id)},async selectConstituency(e){this.selectedConstituency=e,this.selectedMandal=null,this.selectedVillage=null,await this.fetchMandals(e.id)},async selectMandal(e){this.selectedMandal=e,this.selectedVillage=null,await this.fetchVillages(e.id)},selectVillage(e){this.selectedVillage=e},setActiveLevel(e){this.activeLevel=e,"state"===e.id&&this.clearAll()},async clearAll(){try{this.loading=!0,this.selectedState=null,this.selectedDistrict=null,this.selectedConstituency=null,this.selectedMandal=null,this.selectedVillage=null,this.districts=[],this.constituencies=[],this.mandals=[],this.villages=[],await this.fetchStates()}catch(e){console.error("Error during clear:",e),this.error="Error loading states. Please try again."}finally{this.loading=!1}},async confirmClear(){this.showClearConfirm=!1,await this.clearAll()},getIconForLevel(e){const t=this.navigationLevels.find((t=>t.id===e));return t?t.icon:"fa-map-marker-alt"},async handleLocationSearch(){this.searchTimeout&&clearTimeout(this.searchTimeout),this.isSearching=!0,this.showLocationDropdown=!0,this.searchTimeout=setTimeout((async()=>{try{if(!this.searchQuery.trim())return this.searchResults=[],void(this.isSearching=!1);console.log("Performing search for:",this.searchQuery.trim());for(const t of this.states)t.districts||(console.log("Loading districts for state:",t.name),await this.fetchDistricts(t.id),t.districts=this.districts);const e=await this.performSearch(this.searchQuery.trim());this.searchResults=e}catch(e){console.error("Search error:",e),this.error="Error performing search. Please try again."}finally{this.isSearching=!1}}),this.searchDebounceTime)},async performSearch(e){const t=[],s=e.toLowerCase().split(" ").filter((e=>e.length>0));console.log("Starting search with terms:",s),console.log("Current states data:",this.states);const a=(t,s)=>{const a=t.toLowerCase();let i=0;return a===e.toLowerCase()&&(i+=100),s.forEach((e=>{a.includes(e)&&(i+=10,a.startsWith(e)&&(i+=5))})),i};for(const o of this.states){console.log("Searching in state:",o.name);const e=a(o.name,s);if(e>0&&t.push({id:o.id,name:o.name,type:"state",score:e,parentInfo:{}}),o.districts){console.log("Districts in state:",o.name,o.districts);for(const e of o.districts){console.log("Checking district:",e.name);const i=a(e.name,s);if(i>0&&(console.log("Found matching district:",e.name,"with score:",i),t.push({id:e.id,name:e.name,type:"district",score:i,parentInfo:{state:o.name}})),e.constituencies)for(const r of e.constituencies){const i=a(r.name,s);if(i>0&&t.push({id:r.id,name:r.name,type:"constituency",score:i,parentInfo:{state:o.name,district:e.name}}),r.mandals)for(const l of r.mandals){const i=a(l.name,s);if(i>0&&t.push({id:l.id,name:l.name,type:"mandal",score:i,parentInfo:{state:o.name,district:e.name,constituency:r.name}}),l.villages)for(const n of l.villages){const i=a(n.name,s);i>0&&t.push({id:n.id,name:n.name,type:"village",score:i,parentInfo:{state:o.name,district:e.name,constituency:r.name,mandal:l.name}})}}}}}}console.log("Search results:",t);const i=t.sort(((e,t)=>{if(t.score!==e.score)return t.score-e.score;const s={state:0,district:1,constituency:2,mandal:3,village:4};return s[e.type]-s[t.type]}));return console.log("Sorted results:",i),i},async selectLocation(e){if(this.showLocationDropdown=!1,this.searchQuery=e.name,"state"===e.type){this.clearAll();const t=this.states.find((t=>t.name===e.name));t&&this.selectState(t)}else if("district"===e.type){this.selectedConstituency=null,this.selectedMandal=null,this.selectedVillage=null;const t=this.states.find((t=>t.name===e.parentInfo.state));if(t){this.selectState(t);const s=t.districts.find((t=>t.name===e.name));s&&this.selectDistrict(s)}}else if("constituency"===e.type){this.selectedMandal=null,this.selectedVillage=null;const t=this.states.find((t=>t.name===e.parentInfo.state));if(t){this.selectState(t);const s=t.districts.find((t=>t.name===e.parentInfo.district));if(s){this.selectDistrict(s);const t=s.constituencies.find((t=>t.name===e.name));t&&this.selectConstituency(t)}}}else if("mandal"===e.type){this.selectedVillage=null;const t=this.states.find((t=>t.name===e.parentInfo.state));if(t){this.selectState(t);const s=t.districts.find((t=>t.name===e.parentInfo.district));if(s){this.selectDistrict(s);const t=s.constituencies.find((t=>t.name===e.parentInfo.constituency));if(t){this.selectConstituency(t);const s=t.mandals.find((t=>t.name===e.name));s&&this.selectMandal(s)}}}}else if("village"===e.type){const t=this.states.find((t=>t.name===e.parentInfo.state));if(t){this.selectState(t);const s=t.districts.find((t=>t.name===e.parentInfo.district));if(s){this.selectDistrict(s);const t=s.constituencies.find((t=>t.name===e.parentInfo.constituency));if(t){this.selectConstituency(t);const s=t.mandals.find((t=>t.name===e.parentInfo.mandal));if(s){this.selectMandal(s);const t=s.villages.find((t=>t.name===e.name));t&&this.selectVillage(t)}}}}}},async selectItem(e){e&&(this.selectedState?this.selectedDistrict?this.selectedConstituency?this.selectedMandal?this.villages.find((t=>t.id===e.id))&&await this.selectVillage(e):this.mandals.find((t=>t.id===e.id))&&await this.selectMandal(e):this.constituencies.find((t=>t.id===e.id))&&await this.selectConstituency(e):this.districts.find((t=>t.id===e.id))&&await this.selectDistrict(e):await this.selectState(e))},toggleFavorite(){this.isFavorite=!this.isFavorite},setActiveCategory(e){this.activeCategory=e},applyFilter(e){e.active=!e.active},loadMoreVideos(){this.currentVideoPage++},resetVideoPagination(){this.currentVideoPage=1},filterByTopic(e){e.active=!e.active,this.currentVideoPage=1},filterByDate(e){"latest"===e&&this.currentLevelVideos.sort(((e,t)=>new Date(t.date)-new Date(e.date))),this.currentVideoPage=1},filterByViews(){this.currentLevelVideos.sort(((e,t)=>{const s=parseInt(e.views.replace("K","000")),a=parseInt(t.views.replace("K","000"));return a-s})),this.currentVideoPage=1},filterByQuality(e){this.quickFilters.forEach((t=>{"hd"===t.id&&(t.active="HD"===e)})),this.currentVideoPage=1},showSavedItems(){this.quickNavigationActions.find((e=>4===e.id)).active=!this.quickNavigationActions.find((e=>4===e.id)).active,this.currentVideoPage=1},async useCurrentLocation(){this.isLoadingLocation=!0,this.locationError=null,this.userLocation=null,this.locationMethod=null;try{if(navigator.geolocation)try{const e=await this.getGeolocationPosition();this.userLocation={lat:e.coords.latitude,lng:e.coords.longitude},this.locationMethod="gps"}catch(e){console.warn("Geolocation failed:",e),await this.getIPBasedLocation()}else await this.getIPBasedLocation();if(!this.userLocation)throw new Error("Could not determine your location");{const e=await this.findNearestVillage(this.userLocation);if(!e)throw new Error("No nearby locations found in our database");await this.navigateToLocation(e),this.showLocationSuccess(e.village)}}catch(t){this.handleLocationError(t)}finally{this.isLoadingLocation=!1}},getGeolocationPosition(){return new Promise(((e,t)=>{const s={enableHighAccuracy:!0,timeout:1e4,maximumAge:0};navigator.geolocation.getCurrentPosition(e,t,s)}))},async getIPBasedLocation(){try{const e=await fetch("https://ipapi.co/json/");if(!e.ok)throw new Error("IP location service failed");const t=await e.json();this.userLocation={lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},this.locationMethod="ip"}catch(e){throw console.error("IP location failed:",e),new Error("Could not determine location from IP")}},async findNearestVillage(e){let t=null,s=1/0;return this.locations.forEach((a=>{const i=this.calculateDistance(e.lat,e.lng,a.coordinates.lat,a.coordinates.lng);i<s&&(s=i,t=a)})),s<=50?t:null},async navigateToLocation(e){this.clearAll();const t=this.states.find((t=>t.name===e.state));if(!t)throw new Error("State not found");await this.selectState(t);const s=t.districts.find((t=>t.name===e.district));if(!s)throw new Error("District not found");await this.selectDistrict(s);const a=s.constituencies.find((t=>t.name===e.constituency));if(!a)throw new Error("Constituency not found");await this.selectConstituency(a);const i=a.mandals.find((t=>t.name===e.mandal));if(!i)throw new Error("Mandal not found");await this.selectMandal(i);const o=i.villages.find((t=>t.name===e.village));if(!o)throw new Error("Village not found");await this.selectVillage(o)},showLocationSuccess(e){console.log(`Located near ${e}`)},handleLocationError(e){this.locationError=e.message,console.error("Location error:",e);let t="Could not determine your location. ";1===e.code?t+="Please allow location access and try again.":2===e.code?t+="Location service is not available.":3===e.code&&(t+="Location request timed out."),console.error(t)},calculateDistance(e,t,s,a){const i=6371,o=this.deg2rad(s-e),r=this.deg2rad(a-t),l=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.deg2rad(e))*Math.cos(this.deg2rad(s))*Math.sin(r/2)*Math.sin(r/2),n=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return i*n},deg2rad(e){return e*(Math.PI/180)},loadVillageVideos(e){this.currentVideoPage=1,this.updateActiveFilters(),e&&e.videos&&(this.currentLevelVideos=e.videos),this.$nextTick((()=>{const e=document.querySelector(".videos-section");e&&e.scrollIntoView({behavior:"smooth"})}))},updateActiveFilters(){this.quickFilters.forEach((e=>e.active=!1)),this.trendingTopics.forEach((e=>e.active=!1)),this.activeCategory={id:"all",name:"All Videos"}},delay(e){return new Promise((t=>setTimeout(t,e)))},async selectVillageWithDelay(e){await this.delay(300),this.selectedVillage=e,this.loadVillageVideos(e)},async navigateToLevel(e){0===e?(this.clearAll(),await this.fetchStates()):1===e?(this.selectedConstituency=null,this.selectedMandal=null,this.selectedVillage=null,this.constituencies=[],this.mandals=[],this.villages=[],this.selectedState&&await this.fetchDistricts(this.selectedState.id)):2===e?(this.selectedMandal=null,this.selectedVillage=null,this.mandals=[],this.villages=[],this.selectedDistrict&&await this.fetchConstituencies(this.selectedDistrict.id)):3===e&&(this.selectedVillage=null,this.villages=[],this.selectedConstituency&&await this.fetchMandals(this.selectedConstituency.id))},showNavigateConfirm(e){this.showNavigateBackConfirm=this.breadcrumbTrail[e].type,this.navigateBackIndex=e},async confirmNavigateBack(){try{this.loading=!0;const e=this.navigateBackIndex;this.showNavigateBackConfirm=null,0===e?await this.clearAll():1===e?(this.selectedConstituency=null,this.selectedMandal=null,this.selectedVillage=null,this.constituencies=[],this.mandals=[],this.villages=[],this.selectedState&&this.selectedDistrict&&await this.fetchDistricts(this.selectedState.id)):2===e?(this.selectedMandal=null,this.selectedVillage=null,this.mandals=[],this.villages=[],this.selectedDistrict&&await this.fetchConstituencies(this.selectedDistrict.id)):3===e&&(this.selectedVillage=null,this.villages=[],this.selectedConstituency&&await this.fetchMandals(this.selectedConstituency.id))}catch(e){console.error("Error during navigation:",e),this.error="Error loading data. Please try again."}finally{this.loading=!1}},getVillageCount(e){return Array.isArray(e.villages)?e.villages.length:"number"===typeof e.villages_count?e.villages_count:0}},watch:{selectedState(e){e&&this.$emit("hierarchy-updated",{level:"state",value:e})},selectedDistrict(e){e&&this.$emit("hierarchy-updated",{level:"district",value:e})},selectedConstituency(e){e&&this.$emit("hierarchy-updated",{level:"constituency",value:e})},selectedMandal(e){e&&this.$emit("hierarchy-updated",{level:"mandal",value:e})},selectedVillage(e){e&&(this.$emit("hierarchy-updated",{level:"village",value:e}),this.loadVillageVideos(e))}},mounted(){this.handleOutsideClick=e=>{e.target.closest(".relative")||(this.showLocationDropdown=!1)},document.addEventListener("click",this.handleOutsideClick)},beforeUnmount(){document.removeEventListener("click",this.handleOutsideClick)},async created(){await this.fetchStates();const e=this.$route.query.state_id;if(e){const t=this.states.find((t=>t.id===parseInt(e)));t&&await this.selectState(t)}}};const ic=(0,I.A)(ac,[["render",tc],["__scopeId","data-v-7ae2226d"]]);var oc=ic;const rc={class:"search-page"},lc={class:"search-container"},nc={key:0,class:"quick-filters"},cc=["onClick"],dc={key:1,class:"recent-searches"},uc={class:"section-header"},hc={class:"recent-list"},mc=["onClick"],pc=["onClick"],fc={key:2,class:"trending-section"},gc={class:"trending-grid"},vc=["onClick"],bc={class:"trending-image"},yc=["src","alt"],kc={class:"badges"},wc={key:0,class:"badge premium"},xc={class:"trending-info"},Lc={key:3,class:"search-results"},Cc={key:0,class:"search-suggestions"},Sc=["onClick"],Ec={key:1,class:"results-grid"},Pc=["onClick"],_c={class:"result-image"},Mc=["src","alt"],Ac={class:"badges"},Tc={key:0,class:"badge premium"},Vc={class:"result-info"},Ic={key:2,class:"no-results"};function Dc(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("div",rc,[(0,i.Lk)("button",{class:"back-btn",onClick:t[0]||(t[0]=(...e)=>l.goBack&&l.goBack(...e)),"aria-label":"Go back"},t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-arrow-left"},null,-1)])),(0,i.Lk)("div",lc,[(0,i.Lk)("div",{class:(0,d.C4)(["search-input-wrapper",{focused:r.isInputFocused}])},[t[9]||(t[9]=(0,i.Lk)("i",{class:"fas fa-search search-icon"},null,-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>r.searchQuery=e),placeholder:"Search Title, Movie or Cast",onInput:t[2]||(t[2]=(...e)=>l.handleSearch&&l.handleSearch(...e)),onFocus:t[3]||(t[3]=e=>r.isInputFocused=!0),onBlur:t[4]||(t[4]=e=>r.isInputFocused=!1),class:"search-input",autofocus:""},null,544),[[a.Jo,r.searchQuery]]),r.searchQuery?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[5]||(t[5]=(...e)=>l.clearSearch&&l.clearSearch(...e)),class:"clear-btn","aria-label":"Clear search"},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))):(0,i.Q3)("",!0)],2),r.searchQuery?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",nc,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.quickFilters,(e=>((0,i.uX)(),(0,i.CE)("button",{key:e,class:"filter-chip",onClick:t=>l.applyFilter(e)},(0,d.v_)(e),9,cc)))),128))])),!r.searchQuery&&r.recentSearches.length?((0,i.uX)(),(0,i.CE)("div",dc,[(0,i.Lk)("div",uc,[t[10]||(t[10]=(0,i.Lk)("h2",{class:"section-title"},"Recent Searches",-1)),(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.clearRecentSearches&&l.clearRecentSearches(...e)),class:"clear-all-btn"},"Clear All")]),(0,i.Lk)("div",hc,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.recentSearches,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e,class:"recent-item",onClick:t=>l.applyRecentSearch(e)},[t[12]||(t[12]=(0,i.Lk)("i",{class:"fas fa-history"},null,-1)),(0,i.Lk)("span",null,(0,d.v_)(e),1),(0,i.Lk)("button",{onClick:(0,a.D$)((t=>l.removeRecentSearch(e)),["stop"]),class:"remove-btn"},t[11]||(t[11]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]),8,pc)],8,mc)))),128))])])):(0,i.Q3)("",!0),r.searchQuery?((0,i.uX)(),(0,i.CE)("div",Lc,[r.suggestions.length&&!r.searchResults.length?((0,i.uX)(),(0,i.CE)("div",Cc,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.suggestions,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e,class:"suggestion-item",onClick:t=>l.applySuggestion(e)},[t[14]||(t[14]=(0,i.Lk)("i",{class:"fas fa-search"},null,-1)),(0,i.Lk)("span",null,(0,d.v_)(e),1)],8,Sc)))),128))])):(0,i.Q3)("",!0),r.searchResults.length?((0,i.uX)(),(0,i.CE)("div",Ec,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.searchResults,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"result-card",onClick:t=>l.handleResultClick(e)},[(0,i.Lk)("div",_c,[(0,i.Lk)("img",{src:e.image,alt:e.title},null,8,Mc),(0,i.Lk)("div",Ac,[e.isPremium?((0,i.uX)(),(0,i.CE)("span",Tc,"Premium")):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Vc,[(0,i.Lk)("h3",null,(0,d.v_)(e.title),1)])],8,Pc)))),128))])):r.suggestions.length?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ic,[t[15]||(t[15]=(0,i.Lk)("i",{class:"fas fa-search no-results-icon"},null,-1)),(0,i.Lk)("p",null,'No results found for "'+(0,d.v_)(r.searchQuery)+'"',1),t[16]||(t[16]=(0,i.Lk)("p",{class:"no-results-suggestion"},"Try different keywords or browse trending content",-1))]))])):((0,i.uX)(),(0,i.CE)("div",fc,[t[13]||(t[13]=(0,i.Lk)("h2",{class:"section-title"},"Trending Now",-1)),(0,i.Lk)("div",gc,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.trendingItems,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"trending-card",onClick:t=>l.handleTrendingClick(e)},[(0,i.Lk)("div",bc,[(0,i.Lk)("img",{src:e.image,alt:e.title},null,8,yc),(0,i.Lk)("div",kc,[e.isPremium?((0,i.uX)(),(0,i.CE)("span",wc,"Premium")):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",xc,[(0,i.Lk)("h3",null,(0,d.v_)(e.title),1)])],8,vc)))),128))])]))])])}var Rc={name:"SearchPage",data(){return{searchQuery:"",isInputFocused:!1,searchResults:[],suggestions:[],recentSearches:[],quickFilters:["Movies","Web Series","TV Shows","Kids"],trendingItems:[{id:1,title:"Mega Grand Finale",type:"Show",image:"https://i.ibb.co/Jk3kB0r/mega-finale.jpg",isNewEpisode:!0,is4K:!0,isPremium:!0},{id:2,title:"RRR",type:"Movie",image:"https://i.ibb.co/VCQRyM1/rrr.jpg",is4K:!0,isPremium:!0},{id:3,title:"Pushpa",type:"Movie",image:"https://i.ibb.co/0MKzGTw/pushpa.jpg",is4K:!0,isPremium:!0},{id:4,title:"Guntur Kaaram",type:"Movie",image:"https://i.ibb.co/tCW0q0Y/guntur-kaaram.jpg",isNewEpisode:!0,is4K:!0,isPremium:!0},{id:5,title:"Waltair Veerayya",type:"Movie",image:"https://i.ibb.co/Kj8vXNm/waltair-veerayya.jpg",is4K:!0,isPremium:!0},{id:6,title:"Custody",type:"Movie",image:"https://i.ibb.co/9vPNYtL/custody.jpg",isNewEpisode:!0,is4K:!0}],sampleResults:[{id:1,title:"Salaar",type:"Movie",description:"Action drama starring Prabhas",image:"https://i.ibb.co/Ld4q7Gv/salaar.jpg",is4K:!0,isPremium:!0},{id:2,title:"Hi Nanna",type:"Movie",description:"Emotional drama with Nani",image:"https://i.ibb.co/YRbp6Gg/hi-nanna.jpg",is4K:!0},{id:3,title:"Animal",type:"Movie",description:"Action thriller",image:"https://i.ibb.co/wYBqgBF/animal.jpg",is4K:!0,isPremium:!0},{id:4,title:"Dunki",type:"Movie",description:"Comedy drama",image:"https://i.ibb.co/0QGBHdh/dunki.jpg",is4K:!0,isPremium:!0},{id:5,title:"Devil",type:"Movie",description:"Action thriller",image:"https://i.ibb.co/Jt8LXYL/devil.jpg",is4K:!0,isPremium:!0},{id:6,title:"Extra Ordinary Man",type:"Movie",description:"Action comedy",image:"https://i.ibb.co/ZX4Lk8Y/extra-ordinary-man.jpg",is4K:!0},{id:7,title:"Eagle",type:"Movie",description:"Action thriller",image:"https://i.ibb.co/M6BMTL6/eagle.jpg",is4K:!0,isPremium:!0},{id:8,title:"Saindhav",type:"Movie",description:"Action drama",image:"https://i.ibb.co/xGQ8YW4/saindhav.jpg",is4K:!0,isPremium:!0}]}},mounted(){this.loadRecentSearches()},methods:{loadRecentSearches(){const e=localStorage.getItem("recentSearches");this.recentSearches=e?JSON.parse(e):[]},saveRecentSearches(){localStorage.setItem("recentSearches",JSON.stringify(this.recentSearches))},addToRecentSearches(e){e.trim()&&(this.recentSearches=this.recentSearches.filter((t=>t!==e)),this.recentSearches.unshift(e),this.recentSearches.length>10&&(this.recentSearches=this.recentSearches.slice(0,10)),this.saveRecentSearches())},handleSearch(){const e=this.searchQuery.trim();e?(this.addToRecentSearches(e),this.searchResults=this.sampleResults.filter((t=>t.title.toLowerCase().includes(e.toLowerCase()))),this.suggestions=this.sampleResults.filter((t=>t.title.toLowerCase().includes(e.toLowerCase())&&!this.searchResults.includes(t))).map((e=>e.title))):(this.searchResults=[],this.suggestions=[])},updateSuggestions(){},clearSearch(){this.searchQuery="",this.searchResults=[],this.suggestions=[]},goBack(){this.$router.go(-1)},applyFilter(e){this.searchQuery=e,this.handleSearch()},applyRecentSearch(e){this.searchQuery=e,this.handleSearch()},removeRecentSearch(e){this.recentSearches=this.recentSearches.filter((t=>t!==e)),this.saveRecentSearches()},clearRecentSearches(){this.recentSearches=[],localStorage.removeItem("recentSearches")},applySuggestion(e){this.searchQuery=e,this.handleSearch()},handleTrendingClick(e){"Movie"===e.type?this.$router.push(`/movie/${e.id}`):"Web Series"===e.type?this.$router.push(`/series/${e.id}`):this.$router.push(`/content/${e.id}`)},handleResultClick(e){"Movie"===e.type?this.$router.push(`/movie/${e.id}`):"Web Series"===e.type?this.$router.push(`/series/${e.id}`):this.$router.push(`/content/${e.id}`)}}};const $c=(0,I.A)(Rc,[["render",Dc],["__scopeId","data-v-e2ee71c6"]]);var Fc=$c;const Xc={class:"regional-page"},jc={class:"container mx-auto px-4 py-6"},Nc={class:"text-2xl font-bold text-white mb-6"},Uc={key:0,class:"flex justify-center items-center py-8"},Bc={key:1,class:"text-red-500 text-center py-8"},Oc={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Qc={class:"text-white"};function Wc(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",Xc,[(0,i.Lk)("div",jc,[(0,i.Lk)("h1",Nc,(0,d.v_)(o.stateName),1),o.loading?((0,i.uX)(),(0,i.CE)("div",Uc,t[0]||(t[0]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"},null,-1)]))):(0,i.Q3)("",!0),o.error?((0,i.uX)(),(0,i.CE)("div",Bc,(0,d.v_)(o.error),1)):(0,i.Q3)("",!0),o.loading||o.error?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Oc,[(0,i.Lk)("pre",Qc,(0,d.v_)(o.stateDetails),1)]))])])}var Kc={name:"RegionalPage",data(){return{stateId:null,stateName:"",stateDetails:null,loading:!0,error:null}},async created(){this.stateId=this.$route.params.stateId;try{const e=await C.A.get(`http://192.168.0.104:8000/api/frontend/state/${this.stateId}`);console.log("API Response:",e.data),e.data?(this.stateDetails=e.data,this.stateName=e.data.name||"State Details"):this.error="No data received from server"}catch(e){console.error("Error fetching state details:",e.response||e),this.error=e.response?.data?.message||"Error loading state details. Please try again later."}finally{this.loading=!1}}};const qc=(0,I.A)(Kc,[["render",Wc],["__scopeId","data-v-35c10b4c"]]);var zc=qc;const Hc={class:"min-h-screen bg-[#121212] flex items-center justify-center px-4 py-10"},Jc={class:"w-full max-w-4xl"},Gc={class:"bg-[#1d1d1d] rounded-xl p-6 md:p-8"},Yc={class:"space-y-6"},Zc={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ed={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},td={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},sd={class:"md:col-span-2"},ad={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},id={class:"space-y-2 md:col-span-2"},od={class:"flex gap-4"},rd={class:"relative flex-1"},ld=["disabled"],nd={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2"},cd={key:1,class:"absolute right-3 top-1/2 -translate-y-1/2 text-green-500"},dd=["disabled"],ud={key:0,class:"text-[#ff4d4d] text-sm mt-1 flex items-center gap-2"},hd={key:1,class:"text-green-500 text-sm mt-1 flex items-center gap-2"},md={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pd={class:"relative"},fd=["disabled"],gd={value:""},vd=["value"],bd={key:0,class:"absolute right-10 top-1/2 -translate-y-1/2"},yd={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},kd=["disabled"],wd=["value"],xd={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Ld=["disabled"],Cd=["value"],Sd={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Ed={class:"relative"},Pd=["disabled"],_d=["value"],Md={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Ad={class:"relative"},Td=["disabled"],Vd=["value"],Id={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Dd={class:"relative"},Rd={key:0,class:"absolute right-4 top-1/2 -translate-y-1/2"},$d={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Fd={key:1,class:"mt-1 bg-[#1d1d1d] border border-white/10 rounded-lg shadow-lg max-h-40 overflow-y-auto"},Xd=["onClick"],jd={class:"font-medium"},Nd={class:"text-sm text-white/60"},Ud={class:"md:col-span-2"},Bd={class:"relative"},Od={key:0,class:"absolute right-4 top-1/2 -translate-y-1/2"},Qd={key:1,class:"absolute z-50 w-full mt-1 bg-[#1d1d1d] border border-white/10 rounded-lg shadow-lg max-h-60 overflow-y-auto"},Wd=["onClick"],Kd={class:"font-medium"},qd={class:"text-sm text-white/60"},zd={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Hd={class:"space-y-6 pt-4"},Jd={class:"flex items-start space-x-3"},Gd={key:0,class:"mt-1 text-[#ff4d4d] text-sm"},Yd=["disabled"],Zd={key:0},eu={key:1,class:"absolute inset-0 flex items-center justify-center"},tu={key:1,class:"mt-4 p-4 bg-red-500/10 border border-red-500/20 rounded-lg"},su={class:"text-red-500 text-sm text-center"};function au(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("div",Hc,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/home")),class:"absolute top-6 left-6 text-white/70 hover:text-white"},t[30]||(t[30]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)])),(0,i.Lk)("div",Jc,[t[57]||(t[57]=(0,i.Lk)("div",{class:"text-center mb-8"},[(0,i.Lk)("img",{src:ee,alt:"Logo",class:"h-12 mx-auto mb-4"}),(0,i.Lk)("h1",{class:"text-2xl font-bold text-white"},"Complete Your Profile"),(0,i.Lk)("p",{class:"text-white/60 mt-2"},"Please fill in your details to continue")],-1)),(0,i.Lk)("div",Gc,[(0,i.Lk)("form",{onSubmit:t[29]||(t[29]=(0,a.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"])),class:"space-y-6",novalidate:""},[(0,i.Lk)("div",Yc,[t[40]||(t[40]=(0,i.Lk)("h3",{class:"text-xl font-semibold text-[#c30059] border-b border-[#c30059] pb-2"}," Personal Information ",-1)),(0,i.Lk)("div",Zc,[(0,i.Lk)("div",null,[t[31]||(t[31]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" First name "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.form.firstName=e),type:"text",class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.firstName}])},null,2),[[a.Jo,r.form.firstName]]),r.errors.firstName?((0,i.uX)(),(0,i.CE)("p",ed,(0,d.v_)(r.errors.firstName),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[32]||(t[32]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" Last name "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.form.lastName=e),type:"text",class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.lastName}])},null,2),[[a.Jo,r.form.lastName]]),r.errors.lastName?((0,i.uX)(),(0,i.CE)("p",td,(0,d.v_)(r.errors.lastName),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",sd,[t[33]||(t[33]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"}," Email Address ",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.form.email=e),type:"email",class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.email}]),placeholder:"Enter your email"},null,2),[[a.Jo,r.form.email]]),r.errors.email?((0,i.uX)(),(0,i.CE)("p",ad,(0,d.v_)(r.errors.email),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",id,[t[39]||(t[39]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},[(0,i.eW)(" Referral Code "),(0,i.Lk)("span",{class:"text-gray-500"},"(Optional)")],-1)),(0,i.Lk)("div",od,[(0,i.Lk)("div",rd,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.form.referralCode=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white uppercase",placeholder:"Enter referral code",disabled:r.isValidatingReferral||r.referralStatus.valid,onInput:t[5]||(t[5]=(...e)=>l.handleReferralInput&&l.handleReferralInput(...e))},null,40,ld),[[a.Jo,r.form.referralCode]]),r.isValidatingReferral?((0,i.uX)(),(0,i.CE)("div",nd,t[34]||(t[34]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0),r.referralStatus.valid?((0,i.uX)(),(0,i.CE)("div",cd,t[35]||(t[35]=[(0,i.Lk)("i",{class:"fas fa-check-circle"},null,-1)]))):(0,i.Q3)("",!0)]),r.referralStatus.valid?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,type:"button",onClick:t[6]||(t[6]=(...e)=>l.verifyReferralCode&&l.verifyReferralCode(...e)),disabled:!r.form.referralCode||r.isValidatingReferral,class:"px-6 py-2 rounded-lg bg-[#c30059] text-white hover:bg-[#ff4d4d] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},t[36]||(t[36]=[(0,i.Lk)("span",null,"Verify",-1)]),8,dd))]),r.errors.referralCode?((0,i.uX)(),(0,i.CE)("p",ud,[t[37]||(t[37]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,i.eW)(" "+(0,d.v_)(r.errors.referralCode),1)])):(0,i.Q3)("",!0),r.referralStatus.valid?((0,i.uX)(),(0,i.CE)("p",hd,t[38]||(t[38]=[(0,i.Lk)("i",{class:"fas fa-check-circle"},null,-1),(0,i.eW)(" Valid referral code ")]))):(0,i.Q3)("",!0)])])]),(0,i.Lk)("div",md,[(0,i.Lk)("div",null,[t[42]||(t[42]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 1. State "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.Lk)("div",pd,[(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.form.state=e),onChange:t[8]||(t[8]=(...e)=>l.handleStateChange&&l.handleStateChange(...e)),class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors appearance-none",{"border-[#ff4d4d]":r.errors.state}]),disabled:r.isLoadingStates},[(0,i.Lk)("option",gd,(0,d.v_)(r.isLoadingStates?"Loading states...":"Select State"),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.states,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,d.v_)(e.label),9,vd)))),128))],42,fd),[[a.u1,r.form.state]]),r.isLoadingStates?((0,i.uX)(),(0,i.CE)("div",bd,t[41]||(t[41]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0)]),r.errors.state?((0,i.uX)(),(0,i.CE)("p",yd,(0,d.v_)(r.errors.state),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[44]||(t[44]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 2. District "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>r.form.district=e),onChange:t[10]||(t[10]=(...e)=>l.handleDistrictChange&&l.handleDistrictChange(...e)),class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors appearance-none",{"border-[#ff4d4d]":r.errors.district}]),disabled:!r.form.state},[t[43]||(t[43]=(0,i.Lk)("option",{value:""},"Select District",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.districts,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,d.v_)(e.label),9,wd)))),128))],42,kd),[[a.u1,r.form.district]]),r.errors.district?((0,i.uX)(),(0,i.CE)("p",xd,(0,d.v_)(r.errors.district),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[46]||(t[46]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 3. Constituency "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[11]||(t[11]=e=>r.form.constituency=e),onChange:t[12]||(t[12]=(...e)=>l.handleConstituencyChange&&l.handleConstituencyChange(...e)),class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors appearance-none",{"border-[#ff4d4d]":r.errors.constituency}]),disabled:!r.form.district},[t[45]||(t[45]=(0,i.Lk)("option",{value:""},"Select Constituency",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.constituencies,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,d.v_)(e.label),9,Cd)))),128))],42,Ld),[[a.u1,r.form.constituency]]),r.errors.constituency?((0,i.uX)(),(0,i.CE)("p",Sd,(0,d.v_)(r.errors.constituency),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[48]||(t[48]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 4. Mandal "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.Lk)("div",Ed,[r.isManualMandal?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:1,"onUpdate:modelValue":t[15]||(t[15]=e=>r.form.manualMandal=e),type:"text",class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.mandal}]),placeholder:"Enter Mandal name",onInput:t[16]||(t[16]=(...e)=>l.handleManualMandalChange&&l.handleManualMandalChange(...e))},null,34)),[[a.Jo,r.form.manualMandal]]):(0,i.bo)(((0,i.uX)(),(0,i.CE)("select",{key:0,"onUpdate:modelValue":t[13]||(t[13]=e=>r.form.mandal=e),onChange:t[14]||(t[14]=(...e)=>l.handleMandalChange&&l.handleMandalChange(...e)),class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors appearance-none",{"border-[#ff4d4d]":r.errors.mandal}]),disabled:!r.form.constituency},[t[47]||(t[47]=(0,i.Lk)("option",{value:""},"Select Mandal",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.mandals,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,d.v_)(e.label),9,_d)))),128))],42,Pd)),[[a.u1,r.form.mandal]]),(0,i.Lk)("button",{onClick:t[17]||(t[17]=(...e)=>l.toggleMandalInput&&l.toggleMandalInput(...e)),class:"absolute right-12 top-1/2 -translate-y-1/2 text-white/60 hover:text-white text-sm underline",type:"button"},(0,d.v_)(r.isManualMandal?"Select from list":"Enter manually"),1)]),r.errors.mandal?((0,i.uX)(),(0,i.CE)("p",Md,(0,d.v_)(r.errors.mandal),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[50]||(t[50]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 5. Village "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.Lk)("div",Ad,[r.isManualVillage?(0,i.bo)(((0,i.uX)(),(0,i.CE)("input",{key:1,"onUpdate:modelValue":t[20]||(t[20]=e=>r.form.manualVillage=e),type:"text",class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.village}]),placeholder:"Enter Village name",onInput:t[21]||(t[21]=(...e)=>l.handleManualVillageChange&&l.handleManualVillageChange(...e))},null,34)),[[a.Jo,r.form.manualVillage]]):(0,i.bo)(((0,i.uX)(),(0,i.CE)("select",{key:0,"onUpdate:modelValue":t[18]||(t[18]=e=>r.form.village=e),onChange:t[19]||(t[19]=(...e)=>l.handleVillageChange&&l.handleVillageChange(...e)),class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors appearance-none",{"border-[#ff4d4d]":r.errors.village}]),disabled:!r.form.mandal},[t[49]||(t[49]=(0,i.Lk)("option",{value:""},"Select Village",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.villages,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.value,value:e.value},(0,d.v_)(e.label),9,Vd)))),128))],42,Td)),[[a.u1,r.form.village]]),(0,i.Lk)("button",{onClick:t[22]||(t[22]=(...e)=>l.toggleVillageInput&&l.toggleVillageInput(...e)),class:"absolute right-12 top-1/2 -translate-y-1/2 text-white/60 hover:text-white text-sm underline",type:"button"},(0,d.v_)(r.isManualVillage?"Select from list":"Enter manually"),1)]),r.errors.village?((0,i.uX)(),(0,i.CE)("p",Id,(0,d.v_)(r.errors.village),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[52]||(t[52]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 6. Pincode "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.Lk)("div",Dd,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[23]||(t[23]=e=>r.form.pincode=e),type:"number",inputmode:"numeric",pattern:"[0-9]*",onInput:t[24]||(t[24]=(...e)=>l.validatePincode&&l.validatePincode(...e)),onKeypress:t[25]||(t[25]=(...e)=>l.allowOnlyNumbers&&l.allowOnlyNumbers(...e)),maxlength:"6",class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",{"border-[#ff4d4d]":r.errors.pincode}]),placeholder:"Enter 6-digit pincode"},null,34),[[a.Jo,r.form.pincode]]),r.isLoadingPincode?((0,i.uX)(),(0,i.CE)("div",Rd,t[51]||(t[51]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0)]),r.errors.pincode?((0,i.uX)(),(0,i.CE)("p",$d,(0,d.v_)(r.errors.pincode),1)):(0,i.Q3)("",!0),r.pincodeSuggestions.length>0?((0,i.uX)(),(0,i.CE)("div",Fd,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.pincodeSuggestions,((t,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,onClick:s=>e.selectPincode(t),class:"px-4 py-2 text-white hover:bg-[#2d2d2d] cursor-pointer"},[(0,i.Lk)("div",jd,(0,d.v_)(t.pincode),1),(0,i.Lk)("div",Nd,(0,d.v_)(t.area),1)],8,Xd)))),128))])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Ud,[t[54]||(t[54]=(0,i.Lk)("label",{class:"block text-white/90 text-sm mb-2"},[(0,i.eW)(" 7. Address "),(0,i.Lk)("span",{class:"text-[#ff4d4d]"},"*")],-1)),(0,i.Lk)("div",Bd,[(0,i.bo)((0,i.Lk)("input",{ref:"addressInput","onUpdate:modelValue":t[26]||(t[26]=e=>r.form.address=e),type:"text",class:(0,d.C4)(["w-full bg-[#121212] border border-white/10 rounded-lg h-12 px-4 text-white focus:border-[#c30059] focus:outline-none transition-colors",{"border-[#ff4d4d]":r.errors.address}]),placeholder:"Start typing your address...",onInput:t[27]||(t[27]=(...e)=>l.handleAddressInput&&l.handleAddressInput(...e))},null,34),[[a.Jo,r.form.address]]),r.isLoadingAddresses?((0,i.uX)(),(0,i.CE)("div",Od,t[53]||(t[53]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0),r.addressSuggestions.length>0?((0,i.uX)(),(0,i.CE)("div",Qd,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.addressSuggestions,((e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,onClick:t=>l.selectAddress(e),class:"px-4 py-3 text-white hover:bg-[#2d2d2d] cursor-pointer flex items-start"},[(0,i.Lk)("div",null,[(0,i.Lk)("div",Kd,(0,d.v_)(e.structured_formatting?.main_text||e.description),1),(0,i.Lk)("div",qd,(0,d.v_)(e.structured_formatting?.secondary_text),1)])],8,Wd)))),128))])):(0,i.Q3)("",!0)]),r.errors.address?((0,i.uX)(),(0,i.CE)("p",zd,(0,d.v_)(r.errors.address),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Hd,[(0,i.Lk)("div",Jd,[(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"terms","onUpdate:modelValue":t[28]||(t[28]=e=>r.form.termsAccepted=e),class:"mt-1 rounded border-white/30 bg-transparent text-[#c30059] focus:ring-[#c30059] focus:ring-offset-0 focus:ring-offset-transparent"},null,512),[[a.lH,r.form.termsAccepted]]),t[55]||(t[55]=(0,i.Lk)("label",{for:"terms",class:"text-white/80 text-sm"},[(0,i.eW)(" I accept OTT's "),(0,i.Lk)("a",{href:"#",class:"text-[#c30059] hover:text-[#ff4d4d] underline decoration-dotted underline-offset-2"},"Terms & Conditions"),(0,i.eW)(" and "),(0,i.Lk)("a",{href:"#",class:"text-[#c30059] hover:text-[#ff4d4d] underline decoration-dotted underline-offset-2"},"Privacy Statement")],-1))]),r.errors.terms?((0,i.uX)(),(0,i.CE)("p",Gd,(0,d.v_)(r.errors.terms),1)):(0,i.Q3)("",!0),(0,i.Lk)("button",{type:"submit",disabled:r.isLoading,class:"w-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white py-4 rounded-lg font-medium text-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed relative"},[r.isLoading?((0,i.uX)(),(0,i.CE)("div",eu,t[56]||(t[56]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-6 w-6 border-2 border-white/20 border-t-white"},null,-1)]))):((0,i.uX)(),(0,i.CE)("span",Zd,"Complete Registration"))],8,Yd),r.errors.general?((0,i.uX)(),(0,i.CE)("div",tu,[(0,i.Lk)("p",su,(0,d.v_)(r.errors.general),1)])):(0,i.Q3)("",!0)])],32)])])])}var iu={name:"RegistrationPage",data(){return{form:{firstName:"",lastName:"",email:"",state:"",district:"",constituency:"",mandal:"",manualMandal:"",village:"",manualVillage:"",address:"",pincode:"",termsAccepted:!1,phone:"",referralCode:""},token:null,errors:{},districts:[],constituencies:[],mandals:[],villages:[],states:[],isLoadingStates:!1,isLoadingGoogleMaps:!1,apiBaseUrl:"http://192.168.0.104:8000",addressSuggestions:[],placesService:null,geocoder:null,googleMapsLoaded:!1,selectedPlace:null,googleMapsScriptLoaded:!1,isManualMandal:!1,isManualVillage:!1,isLoadingAddresses:!1,isLoadingPincode:!1,pincodeSuggestions:[],addressSearchTimeout:null,isLoading:!1,googleMapsApiKey:"AIzaSyAYUmDhZ4ZWfwL15I2pYhEKcxhKEzEh2No",isValidatingReferral:!1,referralStatus:{valid:!1,message:""}}},methods:{async fetchStates(){console.log("fetchStates method called");try{this.isLoadingStates=!0,this.errors.state=null;const e=`${this.apiBaseUrl}/api/states/`;console.log("Fetching states from URL:",e);const t=await fetch(e,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"});if(console.log("API Response status:",t.status),!t.ok)throw new Error(`Server returned ${t.status}: ${t.statusText}`);const s=await t.json();if(console.log("Received states data:",s),!Array.isArray(s))throw new Error("Expected array of states but received different format");this.states=s.map((e=>({value:e.id,label:e.name}))),console.log("Processed states:",this.states),0===this.states.length&&(this.errors.state="No states available. Please try again.")}catch(e){console.error("Error in fetchStates:",e),this.errors.state=`Failed to load states: ${e.message}`}finally{this.isLoadingStates=!1}},async handleSubmit(){if(console.log("Handle submit called"),this.validateForm()){let s=null;try{console.log("Form validation passed, proceeding with submission"),this.isLoading=!0,this.errors={};const e=localStorage.getItem("csrfToken"),t={first_name:this.form.firstName,last_name:this.form.lastName,email:this.form.email,phone:this.form.phone,state:this.form.state,district:this.form.district,constituency:this.form.constituency,mandal:this.isManualMandal?this.form.manualMandal:this.form.mandal,village:this.isManualVillage?this.form.manualVillage:this.form.village,address:this.form.address,pincode:this.form.pincode,referral_code:this.form.referralCode||null};console.log("Sending registration data:",t),console.log("Completing registration..."),s=await fetch(`${this.apiBaseUrl}/users/complete-registration/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":e,"X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify(t)}),console.log("Registration response status:",s.status);const a=await s.json();if(console.log("Registration response:",a),!s.ok)throw new Error(a.message||"Registration failed");console.log("Registration successful, updating local storage"),a.user&&localStorage.setItem("user",JSON.stringify(a.user)),a.csrf_token&&localStorage.setItem("csrfToken",a.csrf_token),localStorage.setItem("phone",this.form.phone),localStorage.setItem("registrationSuccess","true"),localStorage.setItem("registrationMessage","Registration completed successfully!"),window.location.href="/"}catch(e){console.error("Registration error:",e),this.errors.general=e.message||"An error occurred during registration. Please try again.";try{this.$toast&&this.$toast.error(this.errors.general,{position:"top-right",duration:3e3})}catch(t){console.warn("Toast notification failed:",t)}401===s?.status&&(window.location.href="/login")}finally{this.isLoading=!1}}},async registerDevice(e){try{const t={device_type:"web",device_name:navigator.userAgent,device_id:"web-"+Math.random().toString(36).substr(2,9),device_model:navigator.platform,os_version:navigator.userAgent,app_version:"1.0.0"},s=await fetch(`${this.apiBaseUrl}/devices/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,"X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)});s.ok||console.error("Failed to register device")}catch(t){console.error("Error registering device:",t)}},async handleAddressInput(){this.form.address&&this.googleMapsLoaded?(this.addressSearchTimeout&&clearTimeout(this.addressSearchTimeout),this.isLoadingAddresses=!0,this.addressSearchTimeout=setTimeout((async()=>{try{const e=this.states.find((e=>e.value===this.form.state))?.label||"",t=this.districts.find((e=>e.value===this.form.district))?.label||"",s=this.constituencies.find((e=>e.value===this.form.constituency))?.label||"",a=this.isManualMandal?this.form.manualMandal:this.mandals.find((e=>e.value===this.form.mandal))?.label||"",i=this.isManualVillage?this.form.manualVillage:this.villages.find((e=>e.value===this.form.village))?.label||"",o=`${this.form.address}, ${i}, ${a}, ${s} constituency, ${t}, ${e}, India`,r=await this.getPlacePredictions(o,!0);this.addressSuggestions=r}catch(e){console.error("Error fetching address suggestions:",e),this.errors.maps="Unable to fetch address suggestions. Please try again."}finally{this.isLoadingAddresses=!1}}),300)):this.addressSuggestions=[]},async getPlacePredictions(e,t=!1){return this.placesService?new Promise(((s,a)=>{const i={input:e,componentRestrictions:{country:"IN"},language:"en",types:t?["address","establishment"]:["geocode"]};this.placesService.getPlacePredictions(i,((t,i)=>{console.log("Places API response:",{status:i,results:t,query:e}),i===window.google.maps.places.PlacesServiceStatus.OK&&t?s(t):i===window.google.maps.places.PlacesServiceStatus.ZERO_RESULTS?s([]):(console.warn("Places API returned status:",i),a(new Error(`Places API returned status: ${i}`)))}))})):(console.error("Places service not initialized"),[])},async selectAddress(e){this.isLoadingPincode=!0;try{const t=await this.getPlaceDetails(e.place_id);console.log("Selected place details:",t);const s=this.formatAddress(t);this.form.address=s;const a=await this.extractPincode(t);a&&(this.form.pincode=a,delete this.errors.pincode),this.addressSuggestions=[],this.selectedPlace=t}catch(t){console.error("Error in selectAddress:",t),this.errors.maps="Error retrieving address details. Please try again."}finally{this.isLoadingPincode=!1}},formatAddress(e){const t={street_number:"",route:"",sublocality_level_1:"",locality:"",administrative_area_level_2:"",administrative_area_level_1:"",postal_code:""};e.address_components.forEach((e=>{const s=e.types[0];Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=e.long_name)}));let s="";return t.street_number&&(s+=t.street_number+" "),t.route&&(s+=t.route+", "),t.sublocality_level_1&&(s+=t.sublocality_level_1+", "),t.locality&&(s+=t.locality+", "),t.administrative_area_level_2&&(s+=t.administrative_area_level_2+", "),t.administrative_area_level_1&&(s+=t.administrative_area_level_1),t.postal_code&&(s+=" - "+t.postal_code),s.trim().replace(/,\s*$/,"")},async getPlaceDetails(e){return new Promise(((t,s)=>{this.detailedPlacesService.getDetails({placeId:e,fields:["address_components","formatted_address","geometry","name"]},((e,a)=>{"OK"===a?t(e):s(new Error(`Place details failed with status: ${a}`))}))}))},async extractPincode(e){for(const s of e.address_components)if(s.types.includes("postal_code"))return s.long_name;if(e.geometry?.location)try{return await this.getPincodeFromCoordinates(e.geometry.location.lat(),e.geometry.location.lng())}catch(t){console.warn("Failed to get pincode from coordinates:",t)}return null},async getPincodeFromCoordinates(e,t){return new Promise(((s,a)=>{this.geocoder||(this.geocoder=new window.google.maps.Geocoder),this.geocoder.geocode({location:{lat:e,lng:t}},((e,t)=>{if("OK"===t){for(let t of e)for(let e of t.address_components)if(e.types.includes("postal_code"))return void s(e.long_name);a(new Error("No pincode found in geocoding results"))}else a(new Error(`Geocoding failed with status: ${t}`))}))}))},async fetchDistricts(e){try{console.log("Fetching districts for state:",e);const t=await fetch(`${this.apiBaseUrl}/api/frontend/districts/?state_id=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();console.log("Districts API response:",s),"success"===s.status?(this.districts=s.data.map((e=>({value:e.id,label:e.name}))),console.log("Mapped districts:",this.districts)):(console.error("Error fetching districts:",s.message),this.errors.district="Failed to load districts. Please try again.")}catch(t){console.error("Error fetching districts:",t),this.errors.district="Failed to load districts. Please check your connection."}},async fetchConstituencies(e){try{console.log("Fetching constituencies for district:",e);const t=await fetch(`${this.apiBaseUrl}/api/frontend/constituencies/?district_id=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();console.log("Constituencies API response:",s),"success"===s.status?(this.constituencies=s.data.map((e=>({value:e.id,label:e.name}))),console.log("Mapped constituencies:",this.constituencies)):(console.error("Error fetching constituencies:",s.message),this.errors.constituency="Failed to load constituencies. Please try again.")}catch(t){console.error("Error fetching constituencies:",t),this.errors.constituency="Failed to load constituencies. Please check your connection."}},async fetchMandals(e){try{console.log("Fetching mandals for constituency:",e);const t=await fetch(`${this.apiBaseUrl}/api/frontend/mandals/?constituency_id=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();console.log("Mandals API response:",s),"success"===s.status?(this.mandals=s.data.map((e=>({value:e.id,label:e.name}))),console.log("Mapped mandals:",this.mandals)):(console.error("Error fetching mandals:",s.message),this.errors.mandal="Failed to load mandals. Please try again.")}catch(t){console.error("Error fetching mandals:",t),this.errors.mandal="Failed to load mandals. Please check your connection."}},async fetchVillages(e){try{console.log("Fetching villages for mandal:",e);const t=await fetch(`${this.apiBaseUrl}/api/frontend/villages/?mandal_id=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const s=await t.json();console.log("Villages API response:",s),"success"===s.status?(this.villages=s.data.map((e=>({value:e.id,label:e.name}))),console.log("Mapped villages:",this.villages)):(console.error("Error fetching villages:",s.message),this.errors.village="Failed to load villages. Please try again.")}catch(t){console.error("Error fetching villages:",t),this.errors.village="Failed to load villages. Please check your connection."}},async handleStateChange(){console.log("State changed to:",this.form.state),this.form.district="",this.form.constituency="",this.form.mandal="",this.form.village="",this.districts=[],this.constituencies=[],this.mandals=[],this.villages=[],this.form.state&&await this.fetchDistricts(this.form.state)},async handleDistrictChange(){console.log("District changed to:",this.form.district),this.form.constituency="",this.form.mandal="",this.form.village="",this.constituencies=[],this.mandals=[],this.villages=[],this.form.district&&await this.fetchConstituencies(this.form.district)},async handleConstituencyChange(){console.log("Constituency changed to:",this.form.constituency),this.form.mandal="",this.form.village="",this.mandals=[],this.villages=[],this.form.constituency&&await this.fetchMandals(this.form.constituency)},async handleMandalChange(){console.log("Mandal changed to:",this.form.mandal),this.form.village="",this.form.manualVillage="",this.villages=[],this.addressSuggestions=[],this.form.address="",this.form.pincode="",this.form.mandal&&await this.fetchVillages(this.form.mandal)},async handleVillageChange(){this.form.address="",this.form.pincode="",this.addressSuggestions=[],this.form.village&&await this.searchAddress()},allowOnlyNumbers(e){const t=/[0-9]/.test(e.key),s=["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(e.key);t||s||e.preventDefault(),this.form.pincode.length>=6&&!s&&e.preventDefault()},validatePincode(e){this.form.pincode=e.target.value.replace(/\D/g,"").slice(0,6),6===this.form.pincode.length?delete this.errors.pincode:this.form.pincode.length>0&&(this.errors.pincode="Pincode must be exactly 6 digits")},toggleMandalInput(){this.isManualMandal=!this.isManualMandal,this.isManualMandal?(this.form.mandal="",this.form.manualMandal=""):this.form.manualMandal="",this.form.village="",this.form.manualVillage="",this.villages=[]},toggleVillageInput(){this.isManualVillage=!this.isManualVillage,this.isManualVillage?(this.form.village="",this.form.manualVillage=""):this.form.manualVillage=""},handleManualMandalChange(){this.form.village="",this.form.manualVillage="",this.villages=[],this.form.manualMandal&&(delete this.errors.mandal,this.fetchManualMandal(this.form.manualMandal))},handleManualVillageChange(){this.form.manualVillage&&(delete this.errors.village,this.fetchManualVillage(this.form.manualVillage),this.searchAddressWithManualLocation())},async fetchManualMandal(e){try{const t=await fetch(`${this.apiBaseUrl}/mandals/search/?name=${encodeURIComponent(e)}&constituency_id=${this.form.constituency}`),s=await t.json();if("success"===s.status&&s.data.length>0){const t=s.data.find((t=>t.name.toLowerCase()===e.toLowerCase()));t&&(this.form.mandal=t.id,await this.fetchVillages(t.id))}}catch(t){console.error("Error fetching manual mandal:",t)}},async fetchManualVillage(e){try{const t=this.form.mandal||"",s=await fetch(`${this.apiBaseUrl}/villages/search/?name=${encodeURIComponent(e)}&mandal_id=${t}`),a=await s.json();if("success"===a.status&&a.data.length>0){const t=a.data.find((t=>t.name.toLowerCase()===e.toLowerCase()));t&&(this.form.village=t.id,this.searchAddress())}}catch(t){console.error("Error fetching manual village:",t)}},async searchAddressWithManualLocation(){if(this.googleMapsLoaded)try{const e=this.states.find((e=>e.value===this.form.state))?.label||"",t=this.districts.find((e=>e.value===this.form.district))?.label||"",s=this.constituencies.find((e=>e.value===this.form.constituency))?.label||"",a=this.isManualMandal?this.form.manualMandal:this.mandals.find((e=>e.value===this.form.mandal))?.label||"",i=this.isManualVillage?this.form.manualVillage:this.villages.find((e=>e.value===this.form.village))?.label||"";if(!i)return;let o=`${i}, ${a}, ${s} constituency, ${t}, ${e}, India`,r=await this.getPlacePredictions(o);r.length||(o=`${i}, ${a}, ${t}, ${e}, India`,r=await this.getPlacePredictions(o)),r.length||(o=`${i} village, ${s} constituency, ${t} district, ${e}, India`,r=await this.getPlacePredictions(o)),this.addressSuggestions=r,1===r.length&&await this.selectAddress(r[0])}catch(e){console.error("Error in manual location search:",e)}},validateForm(){console.log("Validating form..."),this.errors={};let e=!0;return this.form.firstName||(this.errors.firstName="First name is required",e=!1),this.form.lastName||(this.errors.lastName="Last name is required",e=!1),this.form.email&&!this.isValidEmail(this.form.email)&&(this.errors.email="Please enter a valid email address",e=!1),this.form.state||(this.errors.state="State is required",e=!1),this.form.district||(this.errors.district="District is required",e=!1),this.form.constituency||(this.errors.constituency="Constituency is required",e=!1),this.isManualMandal||this.form.mandal?this.isManualMandal&&!this.form.manualMandal&&(this.errors.mandal="Mandal name is required",e=!1):(this.errors.mandal="Mandal is required",e=!1),this.isManualVillage||this.form.village?this.isManualVillage&&!this.form.manualVillage&&(this.errors.village="Village name is required",e=!1):(this.errors.village="Village is required",e=!1),this.form.address||(this.errors.address="Address is required",e=!1),this.form.pincode?/^\d{6}$/.test(this.form.pincode)||(this.errors.pincode="Pincode must be exactly 6 digits",e=!1):(this.errors.pincode="Pincode is required",e=!1),this.form.termsAccepted||(this.errors.terms="You must accept the Terms & Conditions to continue",e=!1),this.form.referralCode&&!this.referralStatus.valid&&(this.errors.referralCode="Please verify the referral code",e=!1),console.log("Validation result:",{isValid:e,errors:this.errors}),e},isValidEmail(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)},initGoogleMaps(){return new Promise(((e,t)=>{try{if(console.log("Starting Google Maps initialization"),this.isLoadingGoogleMaps=!0,window.google&&window.google.maps)return console.log("Google Maps already loaded, initializing services"),this.initPlacesService(),this.isLoadingGoogleMaps=!1,this.googleMapsLoaded=!0,void e();const s=document.createElement("script");s.src=`https://maps.googleapis.com/maps/api/js?key=${this.googleMapsApiKey}&libraries=places&callback=initGoogleCallback`,s.async=!0,s.defer=!0,window.initGoogleCallback=()=>{console.log("Google Maps loaded successfully"),this.googleMapsScriptLoaded=!0,this.initPlacesService(),this.googleMapsLoaded=!0,this.isLoadingGoogleMaps=!1,e()},s.onerror=e=>{console.error("Error loading Google Maps:",e),this.errors.maps="Failed to load Google Maps. Please check your internet connection.",this.isLoadingGoogleMaps=!1,t(e)},document.head.appendChild(s),console.log("Google Maps script added to document")}catch(s){console.error("Error in initGoogleMaps:",s),this.errors.maps="Failed to initialize Google Maps.",this.isLoadingGoogleMaps=!1,t(s)}}))},initPlacesService(){try{if(console.log("Initializing Places Service"),!window.google||!window.google.maps)throw new Error("Google Maps not loaded");const e=document.getElementById("places-service-map");e&&e.remove();const t=document.createElement("div");t.style.display="none",t.id="places-service-map",document.body.appendChild(t);const s=new window.google.maps.Map(t,{center:{lat:-34.397,lng:150.644},zoom:8});this.placesService=new window.google.maps.places.AutocompleteService,this.geocoder=new window.google.maps.Geocoder,this.detailedPlacesService=new window.google.maps.places.PlacesService(s),console.log("Places service initialized successfully"),this.googleMapsLoaded=!0,delete this.errors.maps}catch(e){console.error("Error initializing places service:",e),this.errors.maps="Failed to initialize location services.",this.googleMapsLoaded=!1}},async searchAddress(){if(console.log("searchAddress called with current state:",{googleMapsLoaded:this.googleMapsLoaded,placesService:!!this.placesService,village:this.form.village}),!this.googleMapsLoaded||!this.placesService){console.log("Reinitializing Google Maps");try{await this.initGoogleMaps()}catch(e){return void console.error("Failed to reinitialize Google Maps:",e)}}if(this.form.village)try{const e=this.states.find((e=>e.value===this.form.state))?.label||"",t=this.districts.find((e=>e.value===this.form.district))?.label||"",s=this.constituencies.find((e=>e.value===this.form.constituency))?.label||"",a=this.mandals.find((e=>e.value===this.form.mandal))?.label||"",i=this.villages.find((e=>e.value===this.form.village))?.label||"";console.log("Searching with location data:",{state:e,district:t,constituency:s,mandal:a,village:i});let o=`${i}, ${a}, ${s} constituency, ${t}, ${e}, India`;console.log("Trying search with query:",o);let r=await this.getPlacePredictions(o);r.length||(o=`${i}, ${a}, ${t}, ${e}, India`,console.log("Retrying with simplified query:",o),r=await this.getPlacePredictions(o)),this.addressSuggestions=r,console.log("Got address suggestions:",r),1===r.length&&await this.selectAddress(r[0])}catch(e){console.error("Error in searchAddress:",e),this.errors.maps="Unable to fetch address suggestions. Please try again."}else console.log("No village selected")},handleReferralInput(){this.form.referralCode=this.form.referralCode.toUpperCase(),this.referralStatus.valid=!1,this.referralStatus.message="",this.errors.referralCode=""},async verifyReferralCode(){if(this.form.referralCode){this.isValidatingReferral=!0,this.errors.referralCode="";try{const e=await C.A.get(`${this.apiBaseUrl}/users/verify-referral/`,{params:{code:this.form.referralCode},headers:{Accept:"application/json"}}),t=e.data;"success"===t.status?(this.referralStatus.valid=!0,this.referralStatus.message="Valid referral code",this.errors.referralCode=""):(this.referralStatus.valid=!1,this.errors.referralCode=t.message||"Invalid referral code")}catch(e){console.error("Error verifying referral code:",e),this.errors.referralCode=e.response?.data?.message||"Failed to verify referral code",this.referralStatus.valid=!1}finally{this.isValidatingReferral=!1}}}},async created(){console.log("Component created - Starting initialization");try{if(this.form.phone=this.$route.query.phone||localStorage.getItem("phone")||"",this.token=this.$route.query.token||localStorage.getItem("token")||localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user")).token,console.log("Initial token:",this.token),!this.form.phone)return console.error("Missing phone number"),this.errors.general="Missing phone number. Please try logging in again.",void this.$router.push("/login");if(!this.token)return console.error("Missing token"),this.errors.general="Authentication token is missing. Please try logging in again.",void this.$router.push("/login");localStorage.getItem("phone")||localStorage.setItem("phone",this.form.phone),console.log("Initializing Google Maps"),await this.initGoogleMaps(),console.log("Starting to fetch states"),await this.fetchStates();const e=new URLSearchParams(window.location.search),t=e.get("ref");t&&(this.form.referralCode=t.toUpperCase(),await this.verifyReferralCode())}catch(e){console.error("Error in component creation:",e),this.errors.general="Failed to initialize the form. Please refresh the page."}},mounted(){console.log("Component mounted - Checking states:",{statesLength:this.states.length,states:this.states}),0!==this.states.length||this.isLoadingStates||(console.log("States are empty, fetching again"),this.fetchStates())},beforeUnmount(){const e=document.getElementById("places-service-map");e&&e.remove()}};const ou=(0,I.A)(iu,[["render",au],["__scopeId","data-v-23973fd1"]]);var ru=ou;const lu={class:"min-h-screen bg-[#121212] text-white"},nu={class:"container mx-auto px-4 pt-12 md:pt-24 pb-32 md:pb-12 mb-safe"},cu={class:"relative"},du={class:"relative -mt-12 md:-mt-16 px-4 sm:px-6"},uu={class:"flex flex-col md:flex-row items-center md:items-end gap-4 md:gap-6"},hu={class:"w-24 h-24 md:w-32 md:h-32 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center text-white border-4 border-[#121212]"},mu={class:"text-3xl md:text-4xl font-bold"},pu={class:"text-center md:text-left flex-1"},fu={class:"text-xl md:text-3xl font-bold"},gu={class:"text-white/60 mt-1"},vu={class:"mt-8 md:mt-12 grid grid-cols-1 md:grid-cols-12 gap-6"},bu={class:"md:col-span-4 space-y-6"},yu={class:"bg-white/5 rounded-xl p-6"},ku={class:"space-y-4"},wu={class:"font-medium"},xu={class:"font-medium"},Lu={class:"font-medium"},Cu={key:0,class:"bg-white/10 rounded-lg p-3 text-center"},Su={class:"text-sm"},Eu={class:"text-[#c30059] font-bold"},Pu={class:"md:col-span-8 space-y-6"},_u={class:"bg-white/5 rounded-xl p-6"},Mu={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"},Au={class:"bg-white/5 rounded-xl p-6"},Tu={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"},Vu={class:"bg-white/5 rounded-xl p-6"},Iu={class:"flex items-center justify-between mb-4"},Du={class:"text-sm text-white/60"},Ru={key:0,class:"flex justify-center py-8"},$u={key:1,class:"text-center py-8 text-white/60"},Fu={key:2,class:"space-y-4"},Xu={class:"flex items-center gap-4"},ju={class:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center"},Nu={class:"font-medium"},Uu={class:"text-sm text-white/60"},Bu={key:0,class:"text-xs text-white/40"},Ou={class:"flex items-center gap-4"},Qu=["onClick","disabled"],Wu={key:3,class:"mt-4 p-4 bg-red-500/20 text-red-500 rounded-lg text-sm"},Ku={key:0,class:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4 mb-safe"},qu={class:"bg-[#1d1d1d] rounded-xl w-full max-w-md p-6"},zu={class:"flex justify-between items-center mb-6"},Hu={key:0,class:"mt-1 text-sm text-red-500"},Ju={key:0,class:"mt-1 text-sm text-red-500"},Gu={class:"pt-4"},Yu=["disabled"],Zu={key:0,class:"fas fa-spinner fa-spin"};function eh(e,t,s,o,r,l){const n=(0,i.g2)("AppHeader"),c=(0,i.g2)("ReferralCard");return(0,i.uX)(),(0,i.CE)("div",lu,[(0,i.bF)(n),(0,i.Lk)("main",nu,[(0,i.Lk)("div",cu,[t[7]||(t[7]=(0,i.Lk)("div",{class:"h-32 md:h-64 w-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] rounded-xl"},null,-1)),(0,i.Lk)("div",du,[(0,i.Lk)("div",uu,[(0,i.Lk)("div",hu,[(0,i.Lk)("span",mu,(0,d.v_)(l.userInitials),1)]),(0,i.Lk)("div",pu,[(0,i.Lk)("h1",fu,(0,d.v_)(l.userName),1),(0,i.Lk)("p",gu,(0,d.v_)(r.user?.phone||"No phone number"),1)]),(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/profile/update")),class:"px-6 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors flex items-center gap-2"},t[6]||(t[6]=[(0,i.Lk)("i",{class:"fas fa-edit"},null,-1),(0,i.eW)(" Edit Profile ")]))])])]),(0,i.Lk)("div",vu,[(0,i.Lk)("div",bu,[(0,i.Lk)("div",yu,[t[13]||(t[13]=(0,i.Lk)("h2",{class:"text-xl font-semibold mb-4"},"Membership Details",-1)),(0,i.Lk)("div",ku,[(0,i.Lk)("div",null,[t[8]||(t[8]=(0,i.Lk)("p",{class:"text-white/60"},"Membership Plan",-1)),(0,i.Lk)("p",wu,(0,d.v_)(r.user?.subscription_type||"Free Plan"),1)]),(0,i.Lk)("div",null,[t[9]||(t[9]=(0,i.Lk)("p",{class:"text-white/60"},"Valid From",-1)),(0,i.Lk)("p",xu,(0,d.v_)(l.formatSubscriptionDate(r.user?.subscription_start_date)),1)]),(0,i.Lk)("div",null,[t[10]||(t[10]=(0,i.Lk)("p",{class:"text-white/60"},"Valid Until",-1)),(0,i.Lk)("p",Lu,(0,d.v_)(l.formatSubscriptionDate(r.user?.subscription_end_date)),1)]),(0,i.Lk)("div",null,[t[11]||(t[11]=(0,i.Lk)("p",{class:"text-white/60"},"Status",-1)),(0,i.Lk)("p",{class:(0,d.C4)([l.isSubscriptionActive?"text-green-500":"text-red-500","font-medium"])},(0,d.v_)(l.isSubscriptionActive?"Active":"Expired"),3)]),l.daysRemaining>0?((0,i.uX)(),(0,i.CE)("div",Cu,[(0,i.Lk)("p",Su,[(0,i.Lk)("span",Eu,(0,d.v_)(l.daysRemaining),1),t[12]||(t[12]=(0,i.Lk)("span",{class:"text-white/60"},"days remaining",-1))])])):(0,i.Q3)("",!0)])]),t[14]||(t[14]=(0,i.Fv)('<div class="bg-white/5 rounded-xl p-6" data-v-9bb3480e><h2 class="text-xl font-semibold mb-4" data-v-9bb3480e>Account Settings</h2><div class="space-y-3" data-v-9bb3480e><button class="w-full py-3 px-4 bg-white/5 hover:bg-white/10 rounded-lg text-left flex items-center justify-between" data-v-9bb3480e><span data-v-9bb3480e>Language</span><span class="text-white/60" data-v-9bb3480e>English</span></button><button class="w-full py-3 px-4 bg-white/5 hover:bg-white/10 rounded-lg text-left flex items-center justify-between" data-v-9bb3480e><span data-v-9bb3480e>Video Quality</span><span class="text-white/60" data-v-9bb3480e>Auto</span></button><button class="w-full py-3 px-4 bg-white/5 hover:bg-white/10 rounded-lg text-left flex items-center justify-between" data-v-9bb3480e><span data-v-9bb3480e>Downloads</span><span class="text-white/60" data-v-9bb3480e>WiFi Only</span></button></div></div>',1)),(0,i.bF)(c,{isInProfilePage:!0})]),(0,i.Lk)("div",Pu,[(0,i.Lk)("div",_u,[t[15]||(t[15]=(0,i.Lk)("div",{class:"flex items-center justify-between mb-4"},[(0,i.Lk)("h2",{class:"text-xl font-semibold"},"My List"),(0,i.Lk)("button",{class:"text-white/60 hover:text-white"},"View All")],-1)),(0,i.Lk)("div",Mu,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(4,(e=>(0,i.Lk)("div",{key:e,class:"aspect-[2/3] rounded-lg bg-white/10 animate-pulse"}))),64))])]),(0,i.Lk)("div",Au,[t[16]||(t[16]=(0,i.Lk)("div",{class:"flex items-center justify-between mb-4"},[(0,i.Lk)("h2",{class:"text-xl font-semibold"},"Continue Watching"),(0,i.Lk)("button",{class:"text-white/60 hover:text-white"},"View All")],-1)),(0,i.Lk)("div",Tu,[((0,i.uX)(),(0,i.CE)(i.FK,null,(0,i.pI)(4,(e=>(0,i.Lk)("div",{key:e,class:"aspect-[2/3] rounded-lg bg-white/10 animate-pulse"}))),64))])]),(0,i.Lk)("div",Vu,[(0,i.Lk)("div",Iu,[t[17]||(t[17]=(0,i.Lk)("h2",{class:"text-xl font-semibold"},"Device Management",-1)),(0,i.Lk)("div",Du,(0,d.v_)(r.devices.length)+"/3 Devices Active ",1)]),r.isLoadingDevices?((0,i.uX)(),(0,i.CE)("div",Ru,t[18]||(t[18]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"},null,-1)]))):0===r.devices.length?((0,i.uX)(),(0,i.CE)("div",$u," No devices found ")):((0,i.uX)(),(0,i.CE)("div",Fu,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.devices,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"flex items-center justify-between p-4 bg-white/5 rounded-lg"},[(0,i.Lk)("div",Xu,[(0,i.Lk)("div",ju,[(0,i.Lk)("i",{class:(0,d.C4)([l.getDeviceIcon(e.device_type),"text-[#ff4d4d]"])},null,2)]),(0,i.Lk)("div",null,[(0,i.Lk)("p",Nu,(0,d.v_)(e.device_name),1),(0,i.Lk)("p",Uu,(0,d.v_)(e.device_type)+" • Last active "+(0,d.v_)(l.formatDate(e.last_active)),1),e.device_model?((0,i.uX)(),(0,i.CE)("p",Bu,(0,d.v_)(e.device_model)+" • "+(0,d.v_)(e.os_version||"Unknown OS"),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Ou,[(0,i.Lk)("span",{class:(0,d.C4)([e.is_active?"bg-green-500/20 text-green-500":"bg-red-500/20 text-red-500","px-3 py-1 rounded-full text-sm"])},(0,d.v_)(e.is_active?"Active":"Inactive"),3),e.is_active&&r.devices.length>1?((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t=>l.deactivateDevice(e.id),class:"text-red-500 hover:text-red-400 transition-colors",disabled:r.isDeactivating},t[19]||(t[19]=[(0,i.Lk)("i",{class:"fas fa-times-circle"},null,-1)]),8,Qu)):(0,i.Q3)("",!0)])])))),128))])),r.deviceError?((0,i.uX)(),(0,i.CE)("div",Wu,(0,d.v_)(r.deviceError),1)):(0,i.Q3)("",!0)])])])]),r.isEditModalOpen?((0,i.uX)(),(0,i.CE)("div",Ku,[(0,i.Lk)("div",qu,[(0,i.Lk)("div",zu,[t[21]||(t[21]=(0,i.Lk)("h2",{class:"text-xl font-semibold"},"Edit Profile",-1)),(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>r.isEditModalOpen=!1),class:"text-white/60 hover:text-white"},t[20]||(t[20]=[(0,i.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,i.Lk)("form",{onSubmit:t[5]||(t[5]=(0,a.D$)(((...e)=>l.handleUpdateProfile&&l.handleUpdateProfile(...e)),["prevent"])),class:"space-y-4"},[(0,i.Lk)("div",null,[t[22]||(t[22]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/60 mb-1"},"First Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.editForm.firstName=e),type:"text",class:(0,d.C4)(["w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-[#ff4d4d]",{"border-red-500":r.errors.firstName}]),placeholder:"Enter your first name",required:""},null,2),[[a.Jo,r.editForm.firstName]]),r.errors.firstName?((0,i.uX)(),(0,i.CE)("p",Hu,(0,d.v_)(r.errors.firstName),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[23]||(t[23]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/60 mb-1"},"Last Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.editForm.lastName=e),type:"text",class:(0,d.C4)(["w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-[#ff4d4d]",{"border-red-500":r.errors.lastName}]),placeholder:"Enter your last name",required:""},null,2),[[a.Jo,r.editForm.lastName]]),r.errors.lastName?((0,i.uX)(),(0,i.CE)("p",Ju,(0,d.v_)(r.errors.lastName),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[t[24]||(t[24]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/60 mb-1"},"Phone Number",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.editForm.phone=e),type:"tel",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-lg focus:outline-none focus:border-[#ff4d4d] opacity-50 cursor-not-allowed",placeholder:"Enter your phone number",disabled:""},null,512),[[a.Jo,r.editForm.phone]]),t[25]||(t[25]=(0,i.Lk)("p",{class:"mt-1 text-sm text-white/60"},"Phone number cannot be changed",-1))]),(0,i.Lk)("div",Gu,[(0,i.Lk)("button",{type:"submit",class:"w-full py-3 bg-gradient-to-r from-[#c30059] to-[#ff4d4d] rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50 flex items-center justify-center gap-2",disabled:r.isLoading||!l.isFormValid},[r.isLoading?((0,i.uX)(),(0,i.CE)("i",Zu)):(0,i.Q3)("",!0),(0,i.Lk)("span",null,(0,d.v_)(r.isLoading?"Saving...":"Save Changes"),1)],8,Yu)])],32)])])):(0,i.Q3)("",!0)])}var th=s(7014),sh=s(3066),ah=s(4138);const ih={class:"min-h-screen bg-gradient-to-br from-[#1a1a1a] to-[#2d2d2d] p-4 pb-24 md:pb-8 flex items-center justify-center"},oh={class:"w-full max-w-md mb-safe"},rh={key:0,class:"absolute top-6 left-6"},lh={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/10"},nh={class:"text-center mb-6"},ch={class:"text-3xl md:text-4xl font-mono font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500 tracking-wider flex-1"},dh={class:"flex flex-col items-center gap-6 mb-5"},uh={class:"bg-gradient-to-r from-[#333] to-[#404040] rounded-xl p-8 transform hover:scale-105 transition-all duration-300"},hh={key:0,class:"relative group"},mh=["src"],ph={key:1,class:"w-48 h-48 bg-[#444] rounded-xl flex items-center justify-center"},fh={class:"mb-10"},gh={class:"bg-gradient-to-r from-[#2a2a2a] to-[#333] rounded-xl p-4 border border-white/5"},vh={class:"flex items-center justify-between"},bh={class:"flex items-baseline gap-2"},yh={key:0,class:"mt-3 space-y-2 max-h-32 overflow-y-auto"},kh={class:"text-white/40"},wh={class:"space-y-4"},xh={key:1,class:"fixed bottom-24 md:bottom-4 right-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-xl shadow-2xl flex items-center gap-3 animate-fade-in-up"};function Lh(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",ih,[(0,i.Lk)("div",oh,[s.isInProfilePage?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",rh,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/")),class:"text-white/70 hover:text-white"},t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)]))])),t[21]||(t[21]=(0,i.Lk)("div",{class:"text-center mb-8"},[(0,i.Lk)("h1",{class:"text-3xl font-bold text-white mb-2"},"Invite Friends"),(0,i.Lk)("p",{class:"text-white/60"},"Share the joy of entertainment with your friends")],-1)),(0,i.Lk)("div",lh,[(0,i.Lk)("div",nh,[t[9]||(t[9]=(0,i.Lk)("h2",{class:"text-white/80 text-xl mb-4"},"Your Unique Code",-1)),(0,i.Lk)("div",{class:"bg-gradient-to-r from-[#333] to-[#404040] rounded-xl p-5 flex items-center justify-between gap-4 transform hover:scale-105 transition-all duration-300 cursor-pointer shadow-lg",onClick:t[1]||(t[1]=(...e)=>r.copyToClipboard&&r.copyToClipboard(...e))},[(0,i.Lk)("span",ch,(0,d.v_)(o.referralCode||"Loading..."),1),t[8]||(t[8]=(0,i.Lk)("div",{class:"shrink-0 w-12 h-12 flex items-center justify-center rounded-full bg-gradient-to-r from-pink-500 to-violet-500 hover:from-violet-500 hover:to-pink-500 transition-all duration-500"},[(0,i.Lk)("i",{class:"fas fa-copy text-white text-xl"})],-1))])]),(0,i.Lk)("div",dh,[(0,i.Lk)("div",uh,[o.qrCodeUrl?((0,i.uX)(),(0,i.CE)("div",hh,[(0,i.Lk)("img",{src:o.qrCodeUrl,alt:"Referral QR Code",class:"w-48 h-48 rounded-xl"},null,8,mh),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.downloadQR&&r.downloadQR(...e)),class:"absolute inset-0 bg-black/70 opacity-0 group-hover:opacity-100 transition-all duration-300 rounded-xl flex flex-col items-center justify-center gap-2"},t[10]||(t[10]=[(0,i.Lk)("i",{class:"fas fa-download text-white text-2xl"},null,-1),(0,i.Lk)("span",{class:"text-white text-sm"},"Download QR",-1)]))])):((0,i.uX)(),(0,i.CE)("div",ph,t[11]||(t[11]=[(0,i.Lk)("i",{class:"fas fa-qrcode text-4xl text-white/30"},null,-1)])))])]),(0,i.Lk)("div",fh,[(0,i.Lk)("div",gh,[(0,i.Lk)("div",vh,[(0,i.Lk)("div",null,[t[16]||(t[16]=(0,i.Lk)("h3",{class:"text-white/70 text-sm mb-1"},"Total Referrals",-1)),(0,i.Lk)("div",bh,[(0,i.Lk)("span",{class:(0,d.C4)(["text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500 transition-all duration-300",{"animate-bounce":o.isCountUpdating}])},(0,d.v_)(o.totalReferrals),3),t[12]||(t[12]=(0,i.Lk)("span",{class:"text-white/50 text-sm"},"people joined",-1))]),(0,i.Lk)("button",{onClick:t[3]||(t[3]=t=>e.$router.push("/referral/details")),class:"mt-3 text-sm text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500 hover:opacity-80 transition-opacity flex items-center gap-1"},t[13]||(t[13]=[(0,i.eW)(" View Details "),(0,i.Lk)("i",{class:"fas fa-arrow-right text-xs"},null,-1)])),o.referredUsers.length>0?((0,i.uX)(),(0,i.CE)("div",yh,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.latestTwoReferrals,((e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:"text-sm text-white/60 flex items-center gap-2 animate-fade-in"},[t[14]||(t[14]=(0,i.Lk)("i",{class:"fas fa-user-check text-green-500"},null,-1)),(0,i.Lk)("span",null,(0,d.v_)(r.maskPhone(e.phone))+" joined",1),(0,i.Lk)("span",kh,(0,d.v_)(r.formatDate(e.joined_at)),1)])))),128)),o.referredUsers.length>2?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"text-sm text-white/40 flex items-center gap-2 cursor-pointer hover:text-white/60 transition-colors",onClick:t[4]||(t[4]=t=>e.$router.push("/referral/details"))},[t[15]||(t[15]=(0,i.Lk)("i",{class:"fas fa-ellipsis-h"},null,-1)),(0,i.Lk)("span",null,"View "+(0,d.v_)(o.referredUsers.length-2)+" more",1)])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)]),t[17]||(t[17]=(0,i.Lk)("div",{class:"w-10 h-10 rounded-full bg-gradient-to-r from-pink-500/10 to-violet-500/10 flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-users text-xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"})],-1))])])]),(0,i.Lk)("div",wh,[(0,i.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>r.shareWhatsApp&&r.shareWhatsApp(...e)),class:"w-full py-4 px-6 bg-gradient-to-r from-[#25D366] to-[#128C7E] hover:from-[#128C7E] hover:to-[#25D366] rounded-xl transition-all duration-500 flex items-center justify-center gap-3 transform hover:scale-105 shadow-lg"},t[18]||(t[18]=[(0,i.Lk)("i",{class:"fab fa-whatsapp text-xl"},null,-1),(0,i.Lk)("span",{class:"font-semibold"},"Share via WhatsApp",-1)])),(0,i.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>r.shareGeneral&&r.shareGeneral(...e)),class:"w-full py-4 px-6 bg-gradient-to-r from-pink-500 to-violet-500 hover:from-violet-500 hover:to-pink-500 rounded-xl transition-all duration-500 flex items-center justify-center gap-3 transform hover:scale-105 shadow-lg"},t[19]||(t[19]=[(0,i.Lk)("i",{class:"fas fa-share-alt text-xl"},null,-1),(0,i.Lk)("span",{class:"font-semibold"},"Share with Friends",-1)]))])]),o.showCopySuccess?((0,i.uX)(),(0,i.CE)("div",xh,t[20]||(t[20]=[(0,i.Lk)("i",{class:"fas fa-check-circle text-xl"},null,-1),(0,i.Lk)("span",{class:"font-medium"},"Code copied successfully!",-1)]))):(0,i.Q3)("",!0)])])}var Ch={name:"ReferralCard",props:{isInProfilePage:{type:Boolean,default:!1}},data(){return{referralCode:"",qrCodeUrl:"",totalReferrals:0,referredUsers:[],showCopySuccess:!1,baseUrl:"http://192.168.0.104:8000",websiteUrl:"http://192.168.0.104:8080",pollingInterval:null,isCountUpdating:!1}},computed:{referralUrl(){return`${this.websiteUrl}/#/login?ref=${this.referralCode}`},shareMessage(){return`🎬 Join our OTT platform!\n\nUse my referral code: *${this.referralCode}*\n\n📱 Join using this link: ${this.referralUrl}\n\nEnjoy unlimited entertainment!`},latestTwoReferrals(){return this.referredUsers.slice(0,2)}},async created(){await this.fetchReferralData(),this.startPolling()},beforeUnmount(){this.stopPolling()},methods:{async fetchReferralData(){try{const e=localStorage.getItem("phone");if(!e)return void console.error("Phone number not found in localStorage");const t=await fetch(`${this.baseUrl}/users/referral-info/?phone=${e}`,{headers:{Accept:"application/json"}}),s=await t.json();"success"===s.status?(this.totalReferrals!==s.total_referrals&&(this.isCountUpdating=!0,setTimeout((()=>{this.isCountUpdating=!1}),1e3)),this.referralCode=s.referral_code,this.qrCodeUrl=s.qr_code_url,this.totalReferrals=s.total_referrals,this.referredUsers=s.referred_users):console.error("Error fetching referral data:",s.message)}catch(e){console.error("Error fetching referral data:",e)}},startPolling(){this.pollingInterval=setInterval((()=>{this.fetchReferralData()}),3e4)},stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)},async copyToClipboard(){try{if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(this.referralCode);else{const t=document.createElement("textarea");t.value=this.referralCode,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy"),t.remove()}catch(e){return console.error("Fallback: Oops, unable to copy",e),void t.remove()}}this.showCopySuccess=!0,setTimeout((()=>{this.showCopySuccess=!1}),2e3)}catch(e){console.error("Failed to copy text:",e)}},downloadQR(){if(!this.qrCodeUrl)return;const e=document.createElement("a");e.href=this.qrCodeUrl,e.download=`referral_qr_${this.referralCode}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},async downloadQRCodeImage(){try{const e=await fetch(this.qrCodeUrl),t=await e.blob(),s=window.URL.createObjectURL(t),a=document.createElement("a");return a.href=s,a.download=`referral_qr_${this.referralCode}.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),!0}catch(e){return console.error("Error downloading QR code:",e),!1}},async shareWhatsApp(){try{const e=`https://wa.me/?text=${encodeURIComponent(this.shareMessage)}`;window.open(e,"_blank")}catch(e){console.error("Error sharing on WhatsApp:",e)}},shareGeneral(){navigator.share&&navigator.share({title:"Join our OTT Platform",text:this.shareMessage,url:this.referralUrl})},async share(){try{navigator.share?await navigator.share({title:"Join our OTT Platform",text:this.shareMessage,url:this.referralUrl}):(await navigator.clipboard.writeText(this.shareMessage),this.showCopySuccess=!0,setTimeout((()=>{this.showCopySuccess=!1}),2e3))}catch(e){console.error("Error sharing:",e)}},maskPhone(e){return e?`${e.slice(0,4)}****${e.slice(-4)}`:""},formatDate(e){if(!e)return"";const t=new Date(e);return t.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}}};const Sh=(0,I.A)(Ch,[["render",Lh]]);var Eh=Sh,Ph={name:"ProfilePage",components:{AppHeader:We,ReferralCard:Eh},data(){return{user:null,devices:[],isLoadingDevices:!1,deviceError:null,isDeactivating:!1,isEditModalOpen:!1,isLoading:!1,editForm:{firstName:"",lastName:"",phone:""},errors:{firstName:"",lastName:""},activeTab:"personal",subscriptionDetails:{planName:"Free Plan",validUntil:"-",amount:0,isActive:!1}}},computed:{userInitials(){if(!this.user)return"";const e=this.user.first_name||"",t=this.user.last_name||"";return(e.charAt(0)+t.charAt(0)).toUpperCase()||this.user.phone.slice(0,2)},userName(){return this.user?this.user.first_name||this.user.last_name?`${this.user.first_name||""} ${this.user.last_name||""}`.trim():this.user.phone:""},isFormValid(){return this.editForm.firstName.trim()&&this.editForm.lastName.trim()&&!this.errors.firstName&&!this.errors.lastName},isSubscriptionActive(){return!(!this.user?.is_subscribed||!this.user?.subscription_end_date)&&new Date(this.user.subscription_end_date)>new Date},daysRemaining(){if(!this.user?.subscription_end_date)return 0;const e=new Date(this.user.subscription_end_date),t=new Date;return e<=t?0:(0,th.c)(e,t)}},methods:{validateForm(){return this.errors.firstName="",this.errors.lastName="",this.editForm.firstName.trim()?this.editForm.firstName.length<2&&(this.errors.firstName="First name must be at least 2 characters"):this.errors.firstName="First name is required",this.editForm.lastName.trim()?this.editForm.lastName.length<2&&(this.errors.lastName="Last name must be at least 2 characters"):this.errors.lastName="Last name is required",!this.errors.firstName&&!this.errors.lastName},async loadUserData(){try{const e=localStorage.getItem("phone");if(!e)return void this.$router.push("/login");const t=await C.A.get(`http://192.168.0.104:8000/users/profile/?phone=${e}`);if(!t.data||"success"!==t.data.status)throw new Error("Failed to load user data");this.user=t.data.user,this.editForm.firstName=this.user.first_name||"",this.editForm.lastName=this.user.last_name||"",this.editForm.phone=this.user.phone||""}catch(e){console.error("Error loading user data:",e),this.$toast?.error("Failed to load user data",{position:"top-right",duration:3e3}),this.$router.push("/login")}},async handleUpdateProfile(){if(this.validateForm()){this.isLoading=!0;try{const e=localStorage.getItem("csrfToken"),t=await fetch("http://192.168.0.104:8000/users/update-profile/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":e},credentials:"include",body:JSON.stringify({first_name:this.editForm.firstName,last_name:this.editForm.lastName,phone:this.editForm.phone})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to update profile")}const s=await t.json();localStorage.setItem("user",JSON.stringify(s.user)),this.user=s.user,this.$toast?.success("Profile updated successfully!",{position:"top-right",duration:3e3}),this.isEditModalOpen=!1}catch(e){console.error("Error updating profile:",e),this.$toast?.error(e.message||"Failed to update profile",{position:"top-right",duration:3e3})}finally{this.isLoading=!1}}},async fetchDevices(){try{this.isLoadingDevices=!0,this.deviceError=null;const e=localStorage.getItem("phone");if(!e)return void(this.deviceError="Phone number not found. Please login again.");const t=await C.A.get(`http://192.168.0.104:8000/users/devices-info/?phone=${e}`,{headers:{Accept:"application/json","Content-Type":"application/json"}});console.log("Device response:",t.data),t.data&&"success"===t.data.status&&t.data.devices?this.devices=t.data.devices:(this.devices=[],this.deviceError=t.data?.message||"No devices found")}catch(e){console.error("Error fetching devices:",e.response||e),this.deviceError=e.response?.data?.message||"Failed to load devices. Please try again.",this.devices=[]}finally{this.isLoadingDevices=!1}},async deactivateDevice(e){if(confirm("Are you sure you want to deactivate this device?"))try{this.isDeactivating=!0;const t=localStorage.getItem("phone");if(!t)return void(this.deviceError="Phone number not found. Please login again.");await C.A.post("http://192.168.0.104:8000/users/deactivate-device/",{phone:t,device_id:e},{headers:{Accept:"application/json","Content-Type":"application/json"}}),this.$toast?.success("Device deactivated successfully",{position:"top-right",duration:3e3}),await this.fetchDevices()}catch(t){console.error("Error deactivating device:",t.response||t),this.deviceError=t.response?.data?.message||"Failed to deactivate device. Please try again.",this.$toast?.error(this.deviceError,{position:"top-right",duration:3e3})}finally{this.isDeactivating=!1}},getDeviceIcon(e){const t={mobile:"fas fa-mobile-alt",tablet:"fas fa-tablet-alt",web:"fas fa-laptop",tv:"fas fa-tv",other:"fas fa-desktop"};return t[e.toLowerCase()]||t.other},formatDate(e){try{const t=new Date(e),s=new Date,a=Math.abs(s-t)/36e5;return a<24?(0,sh.B)(t,s,{addSuffix:!0}):(0,ah.GP)(t,"MMM d, yyyy h:mm a")}catch(t){return"Unknown"}},formatSubscriptionDate(e){if(!e)return"Not Available";try{const t=new Date(e),s=t.getDate().toString().padStart(2,"0"),a=t.toLocaleString("default",{month:"short"}),i=t.getFullYear();let o=t.getHours();const r=t.getMinutes().toString().padStart(2,"0"),l=o>=12?"PM":"AM";return o%=12,o=o||12,`${s} ${a} ${i}, ${o}:${r} ${l}`}catch(t){return"Invalid Date"}}},async created(){await Promise.all([this.loadUserData(),this.fetchDevices()])},watch:{"editForm.firstName"(){this.errors.firstName&&this.validateForm()},"editForm.lastName"(){this.errors.lastName&&this.validateForm()}}};const _h=(0,I.A)(Ph,[["render",eh],["__scopeId","data-v-9bb3480e"]]);var Mh=_h;const Ah={class:"min-h-screen bg-[#121212] text-white relative"},Th={class:"max-w-4xl mx-auto p-6 pb-32 md:pb-12 mb-safe"},Vh={class:"flex items-center justify-between mb-8 pt-8"},Ih={class:"relative"},Dh={class:"w-24 h-24 rounded-full overflow-hidden border-4 border-[#c30059] shadow-lg"},Rh=["src"],$h={key:1,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-[#c30059] to-[#ff4d4d] text-white text-3xl font-bold"},Fh={class:"absolute bottom-0 right-0 bg-[#c30059] p-2 rounded-full cursor-pointer hover:bg-[#ff4d4d] transition-colors"},Xh={class:"bg-[#1a1a1a] rounded-xl shadow-2xl p-6 backdrop-blur-lg bg-opacity-50"},jh={class:"space-y-6"},Nh={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Uh={class:"space-y-2"},Bh={class:"space-y-2"},Oh={class:"space-y-2"},Qh={class:"space-y-2"},Wh={class:"space-y-2"},Kh={class:"space-y-2"},qh={key:0,class:"space-y-2 md:col-span-2"},zh={class:"flex gap-4"},Hh={class:"relative flex-1"},Jh={key:0,class:"absolute right-3 top-1/2 -translate-y-1/2"},Gh=["disabled"],Yh={key:0,class:"text-[#ff4d4d] text-sm mt-1"},Zh={key:1,class:"text-green-500 text-sm mt-1 flex items-center gap-2"},em={class:"space-y-6"},tm={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},sm={class:"space-y-2"},am={class:"space-y-2"},im={class:"space-y-2"},om={class:"space-y-2"},rm={class:"space-y-2"},lm={class:"space-y-2"},nm={class:"space-y-2 md:col-span-2"},cm={class:"flex justify-end space-x-4 pt-6"},dm=["disabled"],um={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},hm={key:0,class:"fixed bottom-24 md:bottom-4 right-4 bg-[#c30059] text-white px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out"},mm={key:1,class:"fixed bottom-24 md:bottom-4 right-4 bg-[#ff4d4d] text-white px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300 ease-in-out"},pm={class:"flex items-center space-x-2"};function fm(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("div",Ah,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/profile")),class:"absolute top-6 left-6 text-white/70 hover:text-white"},t[20]||(t[20]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)])),(0,i.Lk)("div",Th,[(0,i.Lk)("div",Vh,[t[22]||(t[22]=(0,i.Lk)("div",null,[(0,i.Lk)("h2",{class:"text-3xl font-bold bg-gradient-to-r from-[#c30059] to-[#ff4d4d] bg-clip-text text-transparent"}," Profile Settings "),(0,i.Lk)("p",{class:"text-gray-400 mt-2"},"Manage your account information")],-1)),(0,i.Lk)("div",Ih,[(0,i.Lk)("div",Dh,[r.formData.profile_picture?((0,i.uX)(),(0,i.CE)("img",{key:0,src:r.formData.profile_picture,alt:"Profile Picture",class:"w-full h-full object-cover"},null,8,Rh)):((0,i.uX)(),(0,i.CE)("div",$h,(0,d.v_)(l.getInitials),1))]),(0,i.Lk)("label",Fh,[t[21]||(t[21]=(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[(0,i.Lk)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})],-1)),(0,i.Lk)("input",{type:"file",onChange:t[1]||(t[1]=(...e)=>l.handleFileUpload&&l.handleFileUpload(...e)),accept:"image/*",class:"hidden"},null,32)])])]),(0,i.Lk)("div",Xh,[(0,i.Lk)("form",{onSubmit:t[19]||(t[19]=(0,a.D$)(((...e)=>l.updateProfile&&l.updateProfile(...e)),["prevent"])),class:"space-y-8"},[(0,i.Lk)("div",jh,[t[34]||(t[34]=(0,i.Lk)("h3",{class:"text-xl font-semibold text-[#c30059] border-b border-[#c30059] pb-2"}," Personal Information ",-1)),(0,i.Lk)("div",Nh,[(0,i.Lk)("div",Uh,[t[23]||(t[23]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"First Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>r.formData.first_name=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your first name",required:""},null,512),[[a.Jo,r.formData.first_name]])]),(0,i.Lk)("div",Bh,[t[24]||(t[24]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Last Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>r.formData.last_name=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your last name",required:""},null,512),[[a.Jo,r.formData.last_name]])]),(0,i.Lk)("div",Oh,[t[25]||(t[25]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},[(0,i.eW)("Email "),(0,i.Lk)("span",{class:"text-gray-500"},"(Optional)")],-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.formData.email=e),type:"email",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your email (optional)"},null,512),[[a.Jo,r.formData.email]])]),(0,i.Lk)("div",Qh,[t[26]||(t[26]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Phone",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>r.formData.phone=e),type:"tel",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your phone number",required:"",readonly:""},null,512),[[a.Jo,r.formData.phone]])]),(0,i.Lk)("div",Wh,[t[28]||(t[28]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Gender",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>r.formData.gender=e),class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white"},t[27]||(t[27]=[(0,i.Lk)("option",{value:"",class:"bg-[#2a2a2a]"},"Select Gender",-1),(0,i.Lk)("option",{value:"M",class:"bg-[#2a2a2a]"},"Male",-1),(0,i.Lk)("option",{value:"F",class:"bg-[#2a2a2a]"},"Female",-1),(0,i.Lk)("option",{value:"O",class:"bg-[#2a2a2a]"},"Other",-1)]),512),[[a.u1,r.formData.gender]])]),(0,i.Lk)("div",Kh,[t[29]||(t[29]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Date of Birth",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>r.formData.date_of_birth=e),type:"date",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white"},null,512),[[a.Jo,r.formData.date_of_birth]])]),r.hasReferralCode?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",qh,[t[33]||(t[33]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},[(0,i.eW)(" Referral Code "),(0,i.Lk)("span",{class:"text-gray-500"},"(Optional)")],-1)),(0,i.Lk)("div",zh,[(0,i.Lk)("div",Hh,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>r.formData.referral_code=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white uppercase",placeholder:"Enter referral code",onInput:t[9]||(t[9]=(...e)=>l.handleReferralInput&&l.handleReferralInput(...e))},null,544),[[a.Jo,r.formData.referral_code]]),r.isValidatingReferral?((0,i.uX)(),(0,i.CE)("div",Jh,t[30]||(t[30]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-5 w-5 border-2 border-white/20 border-t-[#c30059]"},null,-1)]))):(0,i.Q3)("",!0)]),(0,i.Lk)("button",{type:"button",onClick:t[10]||(t[10]=(...e)=>l.verifyReferralCode&&l.verifyReferralCode(...e)),disabled:!r.formData.referral_code||r.isValidatingReferral,class:"px-6 py-2 rounded-lg bg-[#c30059] text-white hover:bg-[#ff4d4d] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},t[31]||(t[31]=[(0,i.Lk)("span",null,"Verify",-1)]),8,Gh)]),r.referralError?((0,i.uX)(),(0,i.CE)("p",Yh,(0,d.v_)(r.referralError),1)):(0,i.Q3)("",!0),r.referralSuccess?((0,i.uX)(),(0,i.CE)("p",Zh,t[32]||(t[32]=[(0,i.Lk)("i",{class:"fas fa-check-circle"},null,-1),(0,i.eW)(" Valid referral code ")]))):(0,i.Q3)("",!0)]))])]),(0,i.Lk)("div",em,[t[42]||(t[42]=(0,i.Lk)("h3",{class:"text-xl font-semibold text-[#c30059] border-b border-[#c30059] pb-2"}," Location Details ",-1)),(0,i.Lk)("div",tm,[(0,i.Lk)("div",sm,[t[35]||(t[35]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"State",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>r.formData.state=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your state"},null,512),[[a.Jo,r.formData.state]])]),(0,i.Lk)("div",am,[t[36]||(t[36]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"District",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>r.formData.district=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your district"},null,512),[[a.Jo,r.formData.district]])]),(0,i.Lk)("div",im,[t[37]||(t[37]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Constituency",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>r.formData.constituency=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your constituency"},null,512),[[a.Jo,r.formData.constituency]])]),(0,i.Lk)("div",om,[t[38]||(t[38]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Mandal",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>r.formData.mandal=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your mandal"},null,512),[[a.Jo,r.formData.mandal]])]),(0,i.Lk)("div",rm,[t[39]||(t[39]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Village",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>r.formData.village=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your village"},null,512),[[a.Jo,r.formData.village]])]),(0,i.Lk)("div",lm,[t[40]||(t[40]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Pincode",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>r.formData.pincode=e),type:"text",class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your pincode",maxlength:"6"},null,512),[[a.Jo,r.formData.pincode]])]),(0,i.Lk)("div",nm,[t[41]||(t[41]=(0,i.Lk)("label",{class:"block text-sm font-medium text-gray-300"},"Complete Address",-1)),(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[17]||(t[17]=e=>r.formData.address=e),class:"w-full px-4 py-2 rounded-lg bg-[#2a2a2a] border border-gray-700 focus:border-[#c30059] focus:ring-2 focus:ring-[#c30059] text-white",placeholder:"Enter your complete address",rows:"3"},null,512),[[a.Jo,r.formData.address]])])])]),(0,i.Lk)("div",cm,[(0,i.Lk)("button",{type:"button",onClick:t[18]||(t[18]=t=>e.$router.push("/profile")),class:"px-6 py-2 rounded-lg bg-[#2a2a2a] text-white hover:bg-[#3a3a3a] transition-colors"}," Cancel "),(0,i.Lk)("button",{type:"submit",class:"px-6 py-2 rounded-lg bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white hover:from-[#d40063] hover:to-[#ff5c5c] transition-colors flex items-center space-x-2",disabled:r.loading},[(0,i.Lk)("span",null,(0,d.v_)(r.loading?"Updating...":"Save Changes"),1),r.loading?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("svg",um,t[43]||(t[43]=[(0,i.Lk)("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])))],8,dm)])],32)]),r.success?((0,i.uX)(),(0,i.CE)("div",hm,t[44]||(t[44]=[(0,i.Lk)("div",{class:"flex items-center space-x-2"},[(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),(0,i.Lk)("span",null,"Profile updated successfully!")],-1)]))):(0,i.Q3)("",!0),r.error?((0,i.uX)(),(0,i.CE)("div",mm,[(0,i.Lk)("div",pm,[t[45]||(t[45]=(0,i.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[(0,i.Lk)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),(0,i.Lk)("span",null,(0,d.v_)(r.error),1)])])):(0,i.Q3)("",!0)])])}var gm={name:"ProfileUpdate",data(){return{formData:{first_name:"",last_name:"",email:"",phone:"",gender:"",date_of_birth:"",profile_picture:null,address:"",state:"",district:"",constituency:"",mandal:"",village:"",pincode:"",referral_code:""},baseUrl:"http://192.168.0.104:8000",loading:!1,success:!1,error:null,isValidatingReferral:!1,referralError:null,referralSuccess:!1,hasReferralCode:!1}},computed:{getInitials(){const e=this.formData.first_name||"",t=this.formData.last_name||"";return`${e.charAt(0)}${t.charAt(0)}`.toUpperCase()}},methods:{handleFileUpload(e){const t=e.target.files[0];t&&(this.formData.profile_picture=t)},handleReferralInput(){this.formData.referral_code=this.formData.referral_code.toUpperCase(),this.referralError=null,this.referralSuccess=!1},async verifyReferralCode(){if(this.formData.referral_code){this.isValidatingReferral=!0,this.referralError=null,this.referralSuccess=!1;try{const e=await C.A.get(`${this.baseUrl}/users/verify-referral/`,{params:{code:this.formData.referral_code},headers:{Accept:"application/json"}});"success"===e.data.status?(this.referralSuccess=!0,this.referralError=null):(this.referralError="Invalid referral code",this.referralSuccess=!1)}catch(e){console.error("Error verifying referral code:",e),this.referralError="Error verifying referral code",this.referralSuccess=!1}finally{this.isValidatingReferral=!1}}},async updateProfile(){if(!this.formData.referral_code||this.referralSuccess){this.loading=!0,this.success=!1,this.error=null;try{const e=localStorage.getItem("token");if(!e)throw new Error("Please login again");if(this.formData.email){const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!e.test(this.formData.email))throw new Error("Please enter a valid email address")}const t=new FormData;Object.keys(this.formData).forEach((e=>{null!==this.formData[e]&&""!==this.formData[e]&&t.append(e,this.formData[e])})),this.referralSuccess&&this.formData.referral_code&&t.append("referral_code",this.formData.referral_code);const s=await C.A.post("http://192.168.0.104:8000/users/update-profile/",t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data",Authorization:`Bearer ${e}`}});if("success"!==s.data.status)throw new Error(s.data.message||"Failed to update profile");{const e={...JSON.parse(localStorage.getItem("user")),...s.data.user};localStorage.setItem("user",JSON.stringify(e)),this.success=!0,setTimeout((()=>{this.$router.push("/profile")}),2e3)}}catch(e){console.error("Error updating profile:",e),403===e.response?.status?(this.error="Session expired. Please login again.",setTimeout((()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),this.$router.push("/login")}),2e3)):this.error=e.response?.data?.message||e.message||"Failed to update profile. Please try again."}finally{this.loading=!1}}else this.error="Please verify the referral code first"},async loadUserProfile(){try{const e=JSON.parse(localStorage.getItem("user"));if(!e)return void this.$router.push("/login");const t=await C.A.get(`${this.baseUrl}/users/profile/`,{params:{phone:e.phone},headers:{Accept:"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});if(t.data&&t.data.user){const s=t.data.user,a=await C.A.get(`${this.baseUrl}/users/referral/info/`,{params:{phone:e.phone}});this.hasReferralCode=!!s.referral_code||"success"===a.data.status&&a.data.is_referred,this.formData={first_name:s.first_name||"",last_name:s.last_name||"",email:s.email||"",phone:e.phone,gender:s.gender||"",date_of_birth:s.date_of_birth||"",profile_picture:s.profile_picture||null,address:s.address||"",state:s.state||"",district:s.district||"",constituency:s.constituency||"",mandal:s.mandal||"",village:s.village||"",pincode:s.pincode||"",referral_code:""}}}catch(e){console.error("Error loading profile:",e),this.error="Failed to load profile data"}}},async created(){await this.loadUserProfile()}};const vm=(0,I.A)(gm,[["render",fm],["__scopeId","data-v-8fcfe48e"]]);var bm=vm;const ym={class:"min-h-screen bg-gradient-to-br from-[#1a1a1a] to-[#2d2d2d] pb-24 md:pb-8"},km={class:"bg-[#1a1a1a]/50 p-4 pt-16 pb-8 md:p-8 text-center relative"},wm={class:"max-w-6xl mx-auto p-4 md:p-8"},xm={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},Lm={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-xl p-6 border border-white/10"},Cm={class:"flex items-center justify-between"},Sm={class:"text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500 mt-1"},Em={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-xl p-6 border border-white/10"},Pm={class:"flex items-center gap-3"},_m={class:"text-xl font-mono font-bold text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"},Mm={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-xl p-6 border border-white/10"},Am={class:"flex items-center gap-3"},Tm=["src"],Vm={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-xl border border-white/10 overflow-hidden mb-safe"},Im={class:"hidden md:block overflow-x-auto"},Dm={class:"w-full"},Rm={class:"divide-y divide-white/5"},$m={class:"px-6 py-4"},Fm={class:"flex items-center gap-3"},Xm={class:"text-white font-medium"},jm={class:"px-6 py-4"},Nm={class:"text-white/90"},Um={class:"px-6 py-4 text-white/70"},Bm={class:"px-6 py-4"},Om={class:"md:hidden"},Qm={class:"flex items-start gap-4"},Wm={class:"relative"},Km={class:"absolute -bottom-1 -right-1"},qm={class:"flex-1"},zm={class:"flex items-center justify-between"},Hm={class:"text-white font-medium text-base"},Jm={class:"text-white/50 text-sm mt-0.5"},Gm={class:"mt-4 pl-16"},Ym={class:"space-y-3"},Zm={class:"flex items-center justify-between"},ep={class:"text-white font-medium"},tp={class:"flex items-center justify-between"},sp={class:"flex items-center justify-between"},ap={class:"text-white/80 text-sm"},ip={key:0,class:"p-12 text-center"},op={key:0,class:"fixed bottom-24 md:bottom-4 right-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-xl shadow-2xl flex items-center gap-3 animate-fade-in-up"};function rp(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",ym,[(0,i.Lk)("div",km,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.push("/referral")),class:"absolute top-6 left-6 text-white/70 hover:text-white"},t[3]||(t[3]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)])),t[4]||(t[4]=(0,i.Lk)("h1",{class:"text-3xl font-bold text-white mb-2"},"Referral Details",-1)),t[5]||(t[5]=(0,i.Lk)("p",{class:"text-white/60"},"View all your referral statistics and history",-1))]),(0,i.Lk)("div",wm,[(0,i.Lk)("div",xm,[(0,i.Lk)("div",Lm,[(0,i.Lk)("div",Cm,[(0,i.Lk)("div",null,[t[6]||(t[6]=(0,i.Lk)("p",{class:"text-white/60 text-sm"},"Total Referrals",-1)),(0,i.Lk)("h3",Sm,(0,d.v_)(o.totalReferrals),1)]),t[7]||(t[7]=(0,i.Lk)("div",{class:"w-12 h-12 rounded-full bg-gradient-to-r from-pink-500/10 to-violet-500/10 flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-users text-2xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"})],-1))])]),(0,i.Lk)("div",Em,[t[9]||(t[9]=(0,i.Lk)("p",{class:"text-white/60 text-sm mb-2"},"Your Referral Code",-1)),(0,i.Lk)("div",Pm,[(0,i.Lk)("span",_m,(0,d.v_)(o.referralCode),1),(0,i.Lk)("button",{onClick:t[1]||(t[1]=e=>r.copyToClipboard(o.referralCode)),class:"text-white/60 hover:text-white transition-colors"},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-copy"},null,-1)]))])]),(0,i.Lk)("div",Mm,[t[11]||(t[11]=(0,i.Lk)("p",{class:"text-white/60 text-sm mb-2"},"QR Code",-1)),(0,i.Lk)("div",Am,[o.qrCodeUrl?((0,i.uX)(),(0,i.CE)("img",{key:0,src:o.qrCodeUrl,alt:"Referral QR Code",class:"w-12 h-12 rounded-lg"},null,8,Tm)):(0,i.Q3)("",!0),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>r.downloadQR&&r.downloadQR(...e)),class:"text-white/60 hover:text-white transition-colors"},t[10]||(t[10]=[(0,i.Lk)("i",{class:"fas fa-download"},null,-1)]))])])]),(0,i.Lk)("div",Vm,[t[21]||(t[21]=(0,i.Lk)("div",{class:"p-6 border-b border-white/10"},[(0,i.Lk)("h2",{class:"text-xl font-semibold text-white"},"Referral History")],-1)),(0,i.Lk)("div",Im,[(0,i.Lk)("table",Dm,[t[14]||(t[14]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",{class:"bg-[#1d1d1d]"},[(0,i.Lk)("th",{class:"px-6 py-4 text-left text-sm font-medium text-white/70"},"Phone Number"),(0,i.Lk)("th",{class:"px-6 py-4 text-left text-sm font-medium text-white/70"},"First Name"),(0,i.Lk)("th",{class:"px-6 py-4 text-left text-sm font-medium text-white/70"},"Joined Date"),(0,i.Lk)("th",{class:"px-6 py-4 text-left text-sm font-medium text-white/70"},"Subscription"),(0,i.Lk)("th",{class:"px-6 py-4 text-left text-sm font-medium text-white/70"},"Status")])],-1)),(0,i.Lk)("tbody",Rm,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.referredUsers,((e,s)=>((0,i.uX)(),(0,i.CE)("tr",{key:s,class:"hover:bg-white/5 transition-colors"},[(0,i.Lk)("td",$m,[(0,i.Lk)("div",Fm,[t[12]||(t[12]=(0,i.Lk)("div",{class:"w-8 h-8 rounded-full bg-gradient-to-r from-pink-500/10 to-violet-500/10 flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-user text-sm text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"})],-1)),(0,i.Lk)("span",Xm,(0,d.v_)(r.maskPhone(e.phone)),1)])]),(0,i.Lk)("td",jm,[(0,i.Lk)("span",Nm,(0,d.v_)(e.first_name?e.first_name:"-"),1)]),(0,i.Lk)("td",Um,(0,d.v_)(r.formatDate(e.joined_at)),1),(0,i.Lk)("td",Bm,[(0,i.Lk)("span",{class:(0,d.C4)([e.is_subscribed?"bg-green-500/10 text-green-500":"bg-yellow-500/10 text-yellow-500","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},[(0,i.Lk)("i",{class:(0,d.C4)([e.is_subscribed?"fas fa-crown":"fas fa-user","mr-1"])},null,2),(0,i.eW)(" "+(0,d.v_)(e.is_subscribed?"Premium":"Free"),1)],2)]),t[13]||(t[13]=(0,i.Lk)("td",{class:"px-6 py-4"},[(0,i.Lk)("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-500/10 text-green-500"},[(0,i.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,i.eW)(" Joined ")])],-1))])))),128))])])]),(0,i.Lk)("div",Om,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.referredUsers,((e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:"p-5 border-b border-white/5 hover:bg-white/5 transition-all duration-300 animate-fade-in"},[(0,i.Lk)("div",Qm,[(0,i.Lk)("div",Wm,[t[15]||(t[15]=(0,i.Lk)("div",{class:"w-12 h-12 rounded-xl bg-gradient-to-r from-pink-500/10 to-violet-500/10 flex items-center justify-center backdrop-blur-xl"},[(0,i.Lk)("i",{class:"fas fa-user text-lg text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"})],-1)),(0,i.Lk)("div",Km,[(0,i.Lk)("span",{class:(0,d.C4)([e.is_subscribed?"bg-green-500 text-white":"bg-yellow-500 text-black","flex h-5 w-5 items-center justify-center rounded-full text-[10px]"])},[(0,i.Lk)("i",{class:(0,d.C4)(e.is_subscribed?"fas fa-crown":"fas fa-user")},null,2)],2)])]),(0,i.Lk)("div",qm,[(0,i.Lk)("div",zm,[(0,i.Lk)("div",null,[(0,i.Lk)("div",Hm,(0,d.v_)(r.maskPhone(e.phone)),1),(0,i.Lk)("div",Jm,(0,d.v_)(r.formatDate(e.joined_at)),1)]),t[16]||(t[16]=(0,i.Lk)("span",{class:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-green-500/10 text-green-500"},[(0,i.Lk)("i",{class:"fas fa-check-circle mr-1"}),(0,i.eW)(" Joined ")],-1))])])]),(0,i.Lk)("div",Gm,[(0,i.Lk)("div",Ym,[(0,i.Lk)("div",Zm,[t[17]||(t[17]=(0,i.Lk)("div",{class:"text-white/50 text-sm"},"Name",-1)),(0,i.Lk)("div",ep,(0,d.v_)(e.first_name?e.first_name:"-"),1)]),(0,i.Lk)("div",tp,[t[18]||(t[18]=(0,i.Lk)("div",{class:"text-white/50 text-sm"},"Subscription",-1)),(0,i.Lk)("div",null,[(0,i.Lk)("span",{class:(0,d.C4)([e.is_subscribed?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-yellow-500 to-orange-500","inline-flex items-center px-3 py-1 rounded-full text-xs font-medium text-white shadow-lg"])},(0,d.v_)(e.is_subscribed?"Premium Member":"Free User"),3)])]),(0,i.Lk)("div",sp,[t[19]||(t[19]=(0,i.Lk)("div",{class:"text-white/50 text-sm"},"Joined",-1)),(0,i.Lk)("div",ap,(0,d.v_)(r.formatTimeAgo(e.joined_at)),1)])])])])))),128))]),0===o.referredUsers.length?((0,i.uX)(),(0,i.CE)("div",ip,t[20]||(t[20]=[(0,i.Lk)("div",{class:"w-16 h-16 rounded-full bg-gradient-to-r from-pink-500/10 to-violet-500/10 flex items-center justify-center mx-auto mb-4"},[(0,i.Lk)("i",{class:"fas fa-users text-2xl text-transparent bg-clip-text bg-gradient-to-r from-pink-500 to-violet-500"})],-1),(0,i.Lk)("h3",{class:"text-white font-medium mb-2"},"No Referrals Yet",-1),(0,i.Lk)("p",{class:"text-white/60 text-sm"},"Share your referral code to start earning rewards!",-1)]))):(0,i.Q3)("",!0)])]),o.showCopySuccess?((0,i.uX)(),(0,i.CE)("div",op,t[22]||(t[22]=[(0,i.Lk)("i",{class:"fas fa-check-circle text-xl"},null,-1),(0,i.Lk)("span",{class:"font-medium"},"Copied to clipboard!",-1)]))):(0,i.Q3)("",!0)])}var lp={name:"ReferralDetailsPage",data(){return{referralCode:"",qrCodeUrl:"",totalReferrals:0,referredUsers:[],showCopySuccess:!1,baseUrl:"http://192.168.0.104:8000"}},methods:{async fetchReferralData(){try{const e=localStorage.getItem("phone");if(!e)return void console.error("Phone number not found in localStorage");const t=await fetch(`${this.baseUrl}/users/referral-info/?phone=${e}`,{headers:{Accept:"application/json"}}),s=await t.json();"success"===s.status?(this.referralCode=s.referral_code,this.qrCodeUrl=s.qr_code_url,this.totalReferrals=s.total_referrals,this.referredUsers=s.referred_users.map((e=>({...e,first_name:e.first_name||"-",is_subscribed:e.is_subscribed||!1})))):console.error("Error fetching referral data:",s.message)}catch(e){console.error("Error fetching referral data:",e)}},maskPhone(e){return e?`${e.slice(0,4)}****${e.slice(-4)}`:""},formatDate(e){if(!e)return"";const t=new Date(e);return window.innerWidth<768?t.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(",",""):t.toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})},async copyToClipboard(e){try{await navigator.clipboard.writeText(e),this.showCopySuccess=!0,setTimeout((()=>{this.showCopySuccess=!1}),2e3)}catch(t){console.error("Failed to copy text:",t)}},downloadQR(){if(!this.qrCodeUrl)return;const e=document.createElement("a");e.href=this.qrCodeUrl,e.download=`referral_qr_${this.referralCode}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e)},formatTimeAgo(e){if(!e)return"";const t=new Date(e),s=new Date,a=Math.floor((s-t)/1e3);return a<60?"just now":a<3600?`${Math.floor(a/60)}m ago`:a<86400?`${Math.floor(a/3600)}h ago`:a<604800?`${Math.floor(a/86400)}d ago`:this.formatDate(e)}},async created(){await this.fetchReferralData()}};const np=(0,I.A)(lp,[["render",rp],["__scopeId","data-v-0f7a38b0"]]);var cp=np;const dp={class:"payment-container"},up={key:0,class:"subscription-plans"},hp={class:"plans"},mp=["onClick"],pp={class:"price"},fp={class:"duration"},gp={key:1,class:"payment-summary"};function vp(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",dp,[a.showPaymentForm?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",up,[t[2]||(t[2]=(0,i.Lk)("h2",null,"Choose Your Plan",-1)),(0,i.Lk)("div",hp,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.plans,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"plan",key:e.id,onClick:t=>a.selectPlan(e)},[(0,i.Lk)("h3",null,(0,d.v_)(e.name),1),(0,i.Lk)("p",pp,"₹"+(0,d.v_)(e.price),1),(0,i.Lk)("p",fp,(0,d.v_)(e.duration)+" days",1),t[1]||(t[1]=(0,i.Lk)("button",{class:"select-btn"},"Select",-1))],8,mp)))),128))])])),a.selectedPlan?((0,i.uX)(),(0,i.CE)("div",gp,[t[3]||(t[3]=(0,i.Lk)("h3",null,"Payment Summary",-1)),(0,i.Lk)("p",null,"Plan: "+(0,d.v_)(a.selectedPlan.name),1),(0,i.Lk)("p",null,"Amount: ₹"+(0,d.v_)(a.selectedPlan.price),1),(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>a.initiatePayment&&a.initiatePayment(...e)),class:"pay-btn"},"Pay Now")])):(0,i.Q3)("",!0)])}var bp={name:"PaymentPage",setup(){const e=(0,S.Pj)(),t=(0,q.rd)(),s=(0,q.lq)(),a=(0,$s.KR)([{id:1,name:"Basic Plan",price:199,duration:30},{id:2,name:"Standard Plan",price:499,duration:90},{id:3,name:"Premium Plan",price:999,duration:365}]),o=(0,$s.KR)(null),r=(0,$s.KR)(!1),l=(0,i.EW)((()=>e.state.user)),n=(0,i.EW)((()=>e.state.isAuthenticated));(0,i.sV)((()=>{if(console.log("Payment Component Mounted:",{user:l.value,isAuthenticated:n.value,route:s.fullPath}),!n.value||!l.value)return console.log("User not authenticated, redirecting to login"),void t.push({path:"/login",query:{redirect:s.fullPath}});const e=s.query.plan;if(e){const t=a.value.find((t=>t.name.toLowerCase().replace(" ","_")===e));t&&c(t)}}));const c=e=>{console.log("Selected Plan:",e),o.value=e,r.value=!0},d=async()=>{try{console.log("Initiating payment for plan:",o.value);const e=await C.A.post("/api/payment/create-order/",{amount:o.value.price,currency:"INR"});console.log("Order created:",e.data);const t={key:e.data.key_id,amount:e.data.amount,currency:e.data.currency,name:"Your OTT Platform",description:`${o.value.name} Subscription`,order_id:e.data.order_id,handler:u,prefill:{name:l.value?.name||"",email:l.value?.email||"",contact:l.value?.phone||""},theme:{color:"#3399cc"}},s=new window.Razorpay(t);s.open()}catch(e){console.error("Payment initiation failed:",e),alert("Unable to initiate payment. Please try again.")}},u=async e=>{try{console.log("Payment successful, verifying:",e);const s=await C.A.post("/api/payment/verify-payment/",{razorpay_payment_id:e.razorpay_payment_id,razorpay_order_id:e.razorpay_order_id,razorpay_signature:e.razorpay_signature});"success"===s.data.status&&(alert("Payment successful! Your subscription is now active."),t.push("/profile"))}catch(s){console.error("Payment verification failed:",s),alert("Payment verification failed. Please contact support.")}};return{plans:a,selectedPlan:o,showPaymentForm:r,selectPlan:c,initiatePayment:d}}};const yp=(0,I.A)(bp,[["render",vp],["__scopeId","data-v-0e53dc0a"]]);var kp=yp;const wp={class:"min-h-screen bg-[#121212] text-white relative pb-24 md:pb-8"},xp={class:"max-w-6xl mx-auto px-4"},Lp={class:"grid grid-cols-1 md:grid-cols-12 gap-6"},Cp={class:"md:col-span-8 space-y-6"},Sp={class:"bg-gradient-to-br from-[#2a2a2a] to-[#1d1d1d] rounded-2xl p-6 border border-white/10 backdrop-blur-xl"},Ep={class:"flex items-baseline gap-2 mb-6"},Pp={class:"text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-[#c30059] to-[#ff4d4d]"},_p=["disabled"],Mp={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-2xl border border-white/10"},Ap={class:"divide-y divide-white/5"},Tp={key:0,class:"max-h-[400px] overflow-y-auto"},Vp={class:"flex items-center gap-4"},Ip={class:"flex-1"},Dp={class:"flex items-start justify-between"},Rp={class:"font-medium text-white"},$p={class:"text-sm text-white/50"},Fp={class:"text-right"},Xp={key:1,class:"p-12 text-center"},jp={class:"md:col-span-4 space-y-6"},Np={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-2xl border border-white/10"},Up={class:"p-4"},Bp={key:0,class:"space-y-4"},Op={class:"flex items-center justify-between"},Qp={class:"flex items-center gap-3"},Wp={class:"font-semibold"},Kp={class:"font-medium text-white"},qp={class:"text-sm text-white/50"},zp={key:1,class:"text-center py-8"},Hp={class:"bg-[#2a2a2a]/50 backdrop-blur-lg rounded-2xl border border-white/10"},Jp={class:"p-6 border-b border-white/10 flex items-center justify-between"},Gp={class:"p-4"},Yp={key:0,class:"space-y-4"},Zp=["onClick"],ef={class:"flex items-start gap-3"},tf={class:"flex-1"},sf={class:"font-medium text-white"},af={class:"text-sm text-white/50"},of={class:"text-sm text-white/50"},rf=["onClick"],lf={key:1,class:"text-xs px-2 py-1 rounded-full bg-[#c30059]/10 text-[#ff4d4d]"},nf={key:1,class:"text-center py-8"},cf={key:0,class:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"},df={class:"bg-[#2a2a2a] rounded-2xl w-full max-w-lg border border-white/10 animate-modal-in"},uf={class:"space-y-4"},hf={class:"flex justify-end gap-4 mt-6"},mf={key:1,class:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"},pf={class:"bg-[#2a2a2a] rounded-2xl w-full max-w-lg border border-white/10 animate-modal-in"},ff={class:"space-y-4"},gf=["value"],vf={class:"block text-sm font-medium text-white/70 mb-2"},bf={class:"flex flex-wrap gap-2 mt-1"},yf={class:"text-xs px-2 py-1 rounded-full bg-blue-500/10 text-blue-400"},kf={class:"text-xs px-2 py-1 rounded-full bg-green-500/10 text-green-400"},wf={class:"text-xs px-2 py-1 rounded-full bg-purple-500/10 text-purple-400"},xf={key:0,class:"text-xs px-2 py-1 rounded-full bg-orange-500/10 text-orange-400"},Lf=["min","max","placeholder"],Cf={key:0,class:"bg-red-500/10 text-red-500 p-3 rounded-xl text-sm"},Sf={class:"flex justify-end gap-4 mt-6"},Ef={key:2,class:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"},Pf={class:"bg-[#2a2a2a] rounded-2xl w-full max-w-lg border border-white/10 animate-modal-in"},_f={class:"p-6 border-b border-white/10"},Mf={class:"flex items-center justify-between"},Af={class:"p-6"},Tf={class:"flex gap-2 mb-6"},Vf={key:0,class:"px-3 py-1.5 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white text-sm font-medium flex items-center gap-2"},If={key:1,class:"px-3 py-1.5 rounded-full bg-green-500/10 text-green-500 text-sm font-medium flex items-center gap-2"},Df={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Rf={class:"space-y-2"},$f={class:"bg-white/5 rounded-xl p-4 border border-white/10"},Ff={class:"flex items-center gap-3"},Xf={class:"text-white font-medium"},jf={class:"space-y-2"},Nf={class:"bg-white/5 rounded-xl p-4 border border-white/10"},Uf={class:"flex items-center gap-3"},Bf={class:"text-white font-medium"},Of={class:"space-y-2"},Qf={class:"bg-white/5 rounded-xl p-4 border border-white/10"},Wf={class:"flex items-center gap-3"},Kf={class:"text-white font-medium tracking-wider"},qf={class:"space-y-2"},zf={class:"bg-white/5 rounded-xl p-4 border border-white/10"},Hf={class:"flex items-center gap-3"},Jf={class:"text-white font-medium tracking-wider"},Gf={class:"mt-6 pt-6 border-t border-white/10"},Yf={class:"text-sm text-white/50 flex items-center gap-2"},Zf={class:"mt-6 flex justify-end gap-3"};function eg(e,t,s,o,r,l){return(0,i.uX)(),(0,i.CE)("div",wp,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),class:"absolute top-6 left-6 text-white/70 hover:text-white"},t[17]||(t[17]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-xl"},null,-1)])),t[58]||(t[58]=(0,i.Lk)("div",{class:"pt-20 px-6 text-center mb-8"},[(0,i.Lk)("h1",{class:"text-3xl font-bold bg-gradient-to-r from-[#c30059] to-[#ff4d4d] bg-clip-text text-transparent"}," My Wallet "),(0,i.Lk)("p",{class:"text-white/60 mt-2"},"Manage your earnings and withdrawals")],-1)),(0,i.Lk)("div",xp,[(0,i.Lk)("div",Lp,[(0,i.Lk)("div",Cp,[(0,i.Lk)("div",Sp,[t[20]||(t[20]=(0,i.Lk)("div",{class:"flex items-center justify-between mb-6"},[(0,i.Lk)("h2",{class:"text-xl font-semibold text-white/90"},"Wallet Balance"),(0,i.Lk)("div",{class:"w-10 h-10 rounded-full bg-gradient-to-r from-[#c30059]/10 to-[#ff4d4d]/10 flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-wallet text-transparent bg-clip-text bg-gradient-to-r from-[#c30059] to-[#ff4d4d]"})])],-1)),(0,i.Lk)("div",Ep,[(0,i.Lk)("span",Pp," ₹"+(0,d.v_)(o.walletBalance),1),t[18]||(t[18]=(0,i.Lk)("span",{class:"text-white/50"},"available balance",-1))]),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>o.showWithdrawModal&&o.showWithdrawModal(...e)),disabled:!o.walletBalance,class:"w-full py-3 px-6 bg-gradient-to-r from-[#c30059] to-[#ff4d4d] rounded-xl text-white font-medium hover:opacity-90 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"},t[19]||(t[19]=[(0,i.Lk)("i",{class:"fas fa-money-bill-wave"},null,-1),(0,i.eW)(" Withdraw Money ")]),8,_p)]),(0,i.Lk)("div",Mp,[t[22]||(t[22]=(0,i.Lk)("div",{class:"p-6 border-b border-white/10"},[(0,i.Lk)("h3",{class:"text-xl font-semibold text-white/90"},"Recent Transactions")],-1)),(0,i.Lk)("div",Ap,[o.transactions.length?((0,i.uX)(),(0,i.CE)("div",Tp,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.transactions,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"p-4 hover:bg-white/5 transition-colors"},[(0,i.Lk)("div",Vp,[(0,i.Lk)("div",{class:(0,d.C4)(["w-12 h-12 rounded-xl flex items-center justify-center",o.getTransactionTypeClass(e.transaction_type)])},[(0,i.Lk)("i",{class:(0,d.C4)([o.getTransactionIcon(e.transaction_type),"text-xl"])},null,2)],2),(0,i.Lk)("div",Ip,[(0,i.Lk)("div",Dp,[(0,i.Lk)("div",null,[(0,i.Lk)("p",Rp,(0,d.v_)(o.formatTransactionType(e.transaction_type)),1),(0,i.Lk)("p",$p,(0,d.v_)(o.formatDate(e.created_at)),1)]),(0,i.Lk)("div",Fp,[(0,i.Lk)("p",{class:(0,d.C4)(["font-medium",o.getAmountClass(e.transaction_type)])},(0,d.v_)(o.getAmountPrefix(e.transaction_type))+"₹"+(0,d.v_)(e.amount),3),(0,i.Lk)("span",{class:(0,d.C4)(["text-xs px-2 py-1 rounded-full",{"bg-green-500/10 text-green-500":"COMPLETED"===e.status,"bg-yellow-500/10 text-yellow-500":"PENDING"===e.status,"bg-red-500/10 text-red-500":"FAILED"===e.status}])},(0,d.v_)(e.status),3)])])])])])))),128))])):((0,i.uX)(),(0,i.CE)("div",Xp,t[21]||(t[21]=[(0,i.Lk)("div",{class:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4"},[(0,i.Lk)("i",{class:"fas fa-receipt text-2xl text-white/30"})],-1),(0,i.Lk)("p",{class:"text-white/60"},"No transactions yet",-1)])))])])]),(0,i.Lk)("div",jp,[(0,i.Lk)("div",Np,[t[24]||(t[24]=(0,i.Lk)("div",{class:"p-6 border-b border-white/10"},[(0,i.Lk)("h3",{class:"text-xl font-semibold text-white/90 flex items-center gap-2"},[(0,i.Lk)("i",{class:"fas fa-gift text-transparent bg-clip-text bg-gradient-to-r from-[#c30059] to-[#ff4d4d]"}),(0,i.eW)(" Referral Bonus ")])],-1)),(0,i.Lk)("div",Up,[o.bonusLevels.length?((0,i.uX)(),(0,i.CE)("div",Bp,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.bonusLevels,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"bg-white/5 rounded-xl p-4"},[(0,i.Lk)("div",Op,[(0,i.Lk)("div",Qp,[(0,i.Lk)("div",{class:(0,d.C4)(["w-10 h-10 rounded-full flex items-center justify-center",{"bg-blue-500/10 text-blue-500":1===e.level,"bg-green-500/10 text-green-500":2===e.level,"bg-purple-500/10 text-purple-500":3===e.level,"bg-orange-500/10 text-orange-500":4===e.level,"bg-pink-500/10 text-pink-500":5===e.level}])},[(0,i.Lk)("span",Wp,"L"+(0,d.v_)(e.level),1)],2),(0,i.Lk)("div",null,[(0,i.Lk)("p",Kp,"Level "+(0,d.v_)(e.level),1),(0,i.Lk)("p",qp,(0,d.v_)(e.description),1)])]),(0,i.Lk)("div",null,[(0,i.Lk)("span",{class:(0,d.C4)(["text-lg font-bold",{"text-blue-500":1===e.level,"text-green-500":2===e.level,"text-purple-500":3===e.level,"text-orange-500":4===e.level,"text-pink-500":5===e.level}])},(0,d.v_)(e.amount)+"% ",3)])])])))),128))])):((0,i.uX)(),(0,i.CE)("div",zp,t[23]||(t[23]=[(0,i.Lk)("div",{class:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4"},[(0,i.Lk)("i",{class:"fas fa-gift text-2xl text-white/30"})],-1),(0,i.Lk)("p",{class:"text-white/60"},"No bonus levels configured",-1)])))])]),(0,i.Lk)("div",Hp,[(0,i.Lk)("div",Jp,[t[26]||(t[26]=(0,i.Lk)("h3",{class:"text-xl font-semibold text-white/90"},"Bank Accounts",-1)),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.showAddBankModal&&o.showAddBankModal(...e)),class:"w-8 h-8 rounded-full bg-gradient-to-r from-[#c30059] to-[#ff4d4d] flex items-center justify-center hover:opacity-90 transition-opacity"},t[25]||(t[25]=[(0,i.Lk)("i",{class:"fas fa-plus text-white"},null,-1)]))]),(0,i.Lk)("div",Gp,[o.bankAccounts.length?((0,i.uX)(),(0,i.CE)("div",Yp,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.bankAccounts,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"bg-white/5 rounded-xl p-4 hover:bg-white/10 transition-colors cursor-pointer",onClick:t=>o.showBankDetails(e)},[(0,i.Lk)("div",ef,[t[27]||(t[27]=(0,i.Lk)("div",{class:"w-10 h-10 rounded-full bg-gradient-to-r from-[#c30059]/10 to-[#ff4d4d]/10 flex items-center justify-center"},[(0,i.Lk)("i",{class:"fas fa-university text-transparent bg-clip-text bg-gradient-to-r from-[#c30059] to-[#ff4d4d]"})],-1)),(0,i.Lk)("div",tf,[(0,i.Lk)("p",sf,(0,d.v_)(e.bank_name),1),(0,i.Lk)("p",af,(0,d.v_)(e.account_number),1),(0,i.Lk)("p",of,(0,d.v_)(e.account_holder_name),1)]),(0,i.Lk)("div",null,[e.is_primary?((0,i.uX)(),(0,i.CE)("span",lf," Primary ")):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:(0,a.D$)((t=>o.setPrimaryAccount(e.id)),["stop"]),class:"text-sm text-[#c30059] hover:text-[#ff4d4d] transition-colors"}," Set Primary ",8,rf))])])],8,Zp)))),128))])):((0,i.uX)(),(0,i.CE)("div",nf,[t[28]||(t[28]=(0,i.Lk)("div",{class:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-4"},[(0,i.Lk)("i",{class:"fas fa-university text-2xl text-white/30"})],-1)),t[29]||(t[29]=(0,i.Lk)("p",{class:"text-white/60 mb-4"},"No bank accounts added",-1)),(0,i.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>o.showAddBankModal&&o.showAddBankModal(...e)),class:"text-sm text-[#c30059] hover:text-[#ff4d4d] transition-colors"}," + Add Your First Bank Account ")]))])])])])]),o.showBankModal?((0,i.uX)(),(0,i.CE)("div",cf,[(0,i.Lk)("div",df,[t[35]||(t[35]=(0,i.Lk)("div",{class:"p-6 border-b border-white/10"},[(0,i.Lk)("h3",{class:"text-xl font-semibold text-white"},"Add Bank Account")],-1)),(0,i.Lk)("form",{onSubmit:t[9]||(t[9]=(0,a.D$)(((...e)=>o.addBankAccount&&o.addBankAccount(...e)),["prevent"])),class:"p-6"},[(0,i.Lk)("div",uf,[(0,i.Lk)("div",null,[t[30]||(t[30]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70 mb-2"},"Account Holder Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newBank.account_holder_name=e),type:"text",required:"",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 focus:border-[#c30059] transition-colors",placeholder:"Enter account holder name"},null,512),[[a.Jo,o.newBank.account_holder_name]])]),(0,i.Lk)("div",null,[t[31]||(t[31]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70 mb-2"},"Account Number",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newBank.account_number=e),type:"text",required:"",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 focus:border-[#c30059] transition-colors",placeholder:"Enter account number"},null,512),[[a.Jo,o.newBank.account_number]])]),(0,i.Lk)("div",null,[t[32]||(t[32]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70 mb-2"},"IFSC Code",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newBank.ifsc_code=e),type:"text",required:"",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 focus:border-[#c30059] transition-colors",placeholder:"Enter IFSC code"},null,512),[[a.Jo,o.newBank.ifsc_code]])]),(0,i.Lk)("div",null,[t[33]||(t[33]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70 mb-2"},"Bank Name",-1)),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newBank.bank_name=e),type:"text",required:"",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 focus:border-[#c30059] transition-colors",placeholder:"Enter bank name"},null,512),[[a.Jo,o.newBank.bank_name]])])]),(0,i.Lk)("div",hf,[(0,i.Lk)("button",{type:"button",onClick:t[8]||(t[8]=(...e)=>o.closeBankModal&&o.closeBankModal(...e)),class:"px-6 py-3 rounded-xl bg-white/5 text-white hover:bg-white/10 transition-colors"}," Cancel "),t[34]||(t[34]=(0,i.Lk)("button",{type:"submit",class:"px-6 py-3 bg-gradient-to-r from-[#c30059] to-[#ff4d4d] rounded-xl text-white hover:opacity-90 transition-opacity"}," Add Bank Account ",-1))])],32)])])):(0,i.Q3)("",!0),o.showWithdrawalModal?((0,i.uX)(),(0,i.CE)("div",mf,[(0,i.Lk)("div",pf,[t[43]||(t[43]=(0,i.Lk)("div",{class:"p-6 border-b border-white/10"},[(0,i.Lk)("h3",{class:"text-xl font-semibold text-white"},"Withdraw Money")],-1)),(0,i.Lk)("form",{onSubmit:t[13]||(t[13]=(0,a.D$)(((...e)=>o.withdrawMoney&&o.withdrawMoney(...e)),["prevent"])),class:"p-6"},[(0,i.Lk)("div",ff,[(0,i.Lk)("div",null,[t[36]||(t[36]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70 mb-2"},"Select Bank Account",-1)),(0,i.bo)((0,i.Lk)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.withdrawal.bank_account=e),required:"",class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white focus:border-[#c30059] transition-colors"},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.bankAccounts,(e=>((0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id,class:"bg-[#2a2a2a]"},(0,d.v_)(e.bank_name)+" - "+(0,d.v_)(e.account_number),9,gf)))),128))],512),[[a.u1,o.withdrawal.bank_account]])]),(0,i.Lk)("div",null,[(0,i.Lk)("label",vf,[t[41]||(t[41]=(0,i.eW)(" Amount (₹) ")),(0,i.Lk)("div",bf,[(0,i.Lk)("span",yf,[t[37]||(t[37]=(0,i.Lk)("i",{class:"fas fa-arrow-down text-xs mr-1"},null,-1)),(0,i.eW)("Min: ₹"+(0,d.v_)(o.withdrawalLimits.min_amount),1)]),(0,i.Lk)("span",kf,[t[38]||(t[38]=(0,i.Lk)("i",{class:"fas fa-arrow-up text-xs mr-1"},null,-1)),(0,i.eW)("Max: ₹"+(0,d.v_)(o.withdrawalLimits.max_amount),1)]),(0,i.Lk)("span",wf,[t[39]||(t[39]=(0,i.Lk)("i",{class:"fas fa-clock text-xs mr-1"},null,-1)),(0,i.eW)("Daily Limit: "+(0,d.v_)(o.withdrawalLimits.daily_limit)+" withdrawals ",1)]),void 0!==o.withdrawalLimits.remaining_today?((0,i.uX)(),(0,i.CE)("span",xf,[t[40]||(t[40]=(0,i.Lk)("i",{class:"fas fa-refresh text-xs mr-1"},null,-1)),(0,i.eW)("Remaining Today: "+(0,d.v_)(o.withdrawalLimits.remaining_today),1)])):(0,i.Q3)("",!0)])]),(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.withdrawal.amount=e),type:"number",required:"",min:o.withdrawalLimits.min_amount,max:o.withdrawalLimits.max_amount,class:"w-full px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 focus:border-[#c30059] transition-colors",placeholder:"Enter amount between ₹"+o.withdrawalLimits.min_amount+" and ₹"+o.withdrawalLimits.max_amount},null,8,Lf),[[a.Jo,o.withdrawal.amount]])]),o.withdrawalError?((0,i.uX)(),(0,i.CE)("div",Cf,(0,d.v_)(o.withdrawalError),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Sf,[(0,i.Lk)("button",{type:"button",onClick:t[12]||(t[12]=(...e)=>o.closeWithdrawModal&&o.closeWithdrawModal(...e)),class:"px-6 py-3 rounded-xl bg-white/5 text-white hover:bg-white/10 transition-colors"}," Cancel "),t[42]||(t[42]=(0,i.Lk)("button",{type:"submit",class:"px-6 py-3 bg-gradient-to-r from-[#c30059] to-[#ff4d4d] rounded-xl text-white hover:opacity-90 transition-opacity"}," Withdraw ",-1))])],32)])])):(0,i.Q3)("",!0),o.showBankDetailsModal?((0,i.uX)(),(0,i.CE)("div",Ef,[(0,i.Lk)("div",Pf,[(0,i.Lk)("div",_f,[(0,i.Lk)("div",Mf,[t[45]||(t[45]=(0,i.Fv)('<div class="flex items-center gap-3" data-v-ada145ca><div class="w-12 h-12 rounded-xl bg-gradient-to-r from-[#c30059]/10 to-[#ff4d4d]/10 flex items-center justify-center" data-v-ada145ca><i class="fas fa-university text-2xl text-transparent bg-clip-text bg-gradient-to-r from-[#c30059] to-[#ff4d4d]" data-v-ada145ca></i></div><div data-v-ada145ca><h3 class="text-xl font-semibold text-white" data-v-ada145ca>Bank Account Details</h3><p class="text-sm text-white/50" data-v-ada145ca>View your bank account information</p></div></div>',1)),(0,i.Lk)("button",{onClick:t[14]||(t[14]=(...e)=>o.closeBankDetailsModal&&o.closeBankDetailsModal(...e)),class:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors"},t[44]||(t[44]=[(0,i.Lk)("i",{class:"fas fa-times text-white/70"},null,-1)]))])]),(0,i.Lk)("div",Af,[(0,i.Lk)("div",Tf,[o.selectedBank.is_primary?((0,i.uX)(),(0,i.CE)("span",Vf,t[46]||(t[46]=[(0,i.Lk)("i",{class:"fas fa-star text-xs"},null,-1),(0,i.eW)(" Primary Account ")]))):(0,i.Q3)("",!0),o.selectedBank.is_verified?((0,i.uX)(),(0,i.CE)("span",If,t[47]||(t[47]=[(0,i.Lk)("i",{class:"fas fa-check-circle text-xs"},null,-1),(0,i.eW)(" Verified ")]))):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Df,[(0,i.Lk)("div",Rf,[t[49]||(t[49]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70"},"Bank Name",-1)),(0,i.Lk)("div",$f,[(0,i.Lk)("div",Ff,[t[48]||(t[48]=(0,i.Lk)("i",{class:"fas fa-university text-[#c30059]"},null,-1)),(0,i.Lk)("p",Xf,(0,d.v_)(o.selectedBank.bank_name),1)])])]),(0,i.Lk)("div",jf,[t[51]||(t[51]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70"},"Account Holder",-1)),(0,i.Lk)("div",Nf,[(0,i.Lk)("div",Uf,[t[50]||(t[50]=(0,i.Lk)("i",{class:"fas fa-user text-[#c30059]"},null,-1)),(0,i.Lk)("p",Bf,(0,d.v_)(o.selectedBank.account_holder_name),1)])])]),(0,i.Lk)("div",Of,[t[53]||(t[53]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70"},"Account Number",-1)),(0,i.Lk)("div",Qf,[(0,i.Lk)("div",Wf,[t[52]||(t[52]=(0,i.Lk)("i",{class:"fas fa-credit-card text-[#c30059]"},null,-1)),(0,i.Lk)("p",Kf,(0,d.v_)(o.selectedBank.account_number),1)])])]),(0,i.Lk)("div",qf,[t[55]||(t[55]=(0,i.Lk)("label",{class:"block text-sm font-medium text-white/70"},"IFSC Code",-1)),(0,i.Lk)("div",zf,[(0,i.Lk)("div",Hf,[t[54]||(t[54]=(0,i.Lk)("i",{class:"fas fa-code text-[#c30059]"},null,-1)),(0,i.Lk)("p",Jf,(0,d.v_)(o.selectedBank.ifsc_code),1)])])])]),(0,i.Lk)("div",Gf,[(0,i.Lk)("p",Yf,[t[56]||(t[56]=(0,i.Lk)("i",{class:"fas fa-calendar-alt"},null,-1)),(0,i.eW)(" Added on "+(0,d.v_)(o.formatDate(o.selectedBank.created_at)),1)])]),(0,i.Lk)("div",Zf,[o.selectedBank.is_primary?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,onClick:t[15]||(t[15]=e=>o.setPrimaryAccount(o.selectedBank.id)),class:"px-4 py-2 rounded-xl bg-gradient-to-r from-[#c30059] to-[#ff4d4d] text-white text-sm font-medium hover:opacity-90 transition-opacity flex items-center gap-2"},t[57]||(t[57]=[(0,i.Lk)("i",{class:"fas fa-star"},null,-1),(0,i.eW)(" Set as Primary ")]))),(0,i.Lk)("button",{onClick:t[16]||(t[16]=(...e)=>o.closeBankDetailsModal&&o.closeBankDetailsModal(...e)),class:"px-4 py-2 rounded-xl bg-white/5 text-white text-sm font-medium hover:bg-white/10 transition-colors"}," Close ")])])])])):(0,i.Q3)("",!0)])}var tg={name:"WalletDashboard",setup(){const e=(0,$s.KR)(0),t=(0,$s.KR)([]),s=(0,$s.KR)([]),a=(0,$s.KR)(!1),o=(0,$s.KR)(!1),r=(0,$s.KR)({account_holder_name:"",account_number:"",ifsc_code:"",bank_name:""}),l=(0,$s.KR)(""),n=(0,$s.KR)({bank_account:"",amount:""}),c=(0,$s.KR)(!1),d=(0,$s.KR)({}),u=(0,$s.KR)([]),h=(0,$s.KR)({min_amount:0,max_amount:0,daily_limit:0,remaining_today:0}),m=async()=>{try{const t=await C.A.get("/users/wallet/",{params:{phone:localStorage.getItem("phone")}});console.log("Wallet response:",t.data),e.value=t.data.balance,s.value=t.data.recent_transactions||[]}catch(t){console.error("Error fetching wallet data:",t),e.value=0,s.value=[]}},p=async()=>{try{const e=await C.A.get("/users/bank-accounts/",{params:{phone:localStorage.getItem("phone")}});t.value=e.data}catch(e){console.error("Error fetching bank accounts:",e)}},f=async()=>{try{const e=await C.A.get("/users/referral-bonus-levels/",{params:{phone:localStorage.getItem("phone")}});u.value=e.data}catch(e){console.error("Error fetching bonus levels:",e)}},g=async()=>{try{const e=await C.A.get("/users/withdrawal-limits/",{params:{phone:localStorage.getItem("phone")}});h.value=e.data}catch(e){console.error("Error fetching withdrawal limits:",e),h.value={min_amount:100,max_amount:1e4,daily_limit:3,remaining_today:3}}},v=async()=>{try{const e={...r.value,phone:localStorage.getItem("phone")};await C.A.post("/users/bank-accounts/",e),await p(),L()}catch(e){console.error("Error adding bank account:",e)}},b=async e=>{try{await C.A.post(`/users/bank-accounts/${e}/set-primary/`,{phone:localStorage.getItem("phone")}),await p()}catch(t){console.error("Error setting primary account:",t)}},y=async()=>{await g(),o.value=!0},k=()=>{const e=Number(n.value.amount);return e<h.value.min_amount?(l.value=`Minimum withdrawal amount is ₹${h.value.min_amount}`,!1):e>h.value.max_amount?(l.value=`Maximum withdrawal amount is ₹${h.value.max_amount}`,!1):!(h.value.remaining_today<=0)||(l.value="Daily withdrawal limit reached",!1)},w=async()=>{try{if(l.value="",!k())return;const e={...n.value,phone:localStorage.getItem("phone")};await C.A.post("/users/request-withdrawal/",e),await m(),await g(),S()}catch(e){console.error("Error requesting withdrawal:",e),l.value=e.response?.data?.error||"Failed to process withdrawal"}},x=()=>{a.value=!0},L=()=>{a.value=!1,r.value={account_holder_name:"",account_number:"",ifsc_code:"",bank_name:""}},S=()=>{o.value=!1,n.value={bank_account:"",amount:""}},E=e=>{d.value=e,c.value=!0},P=()=>{c.value=!1,d.value={}},_=e=>new Date(e).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),M=e=>e.split("_").map((e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())).join(" "),A=e=>{const t={REFERRAL_BONUS:"bonus",WITHDRAWAL:"withdrawal",REFUND:"refund"};return t[e]||""},T=e=>{const t={REFERRAL_BONUS:"fas fa-gift",WITHDRAWAL:"fas fa-money-bill-wave",REFUND:"fas fa-undo"};return t[e]||"fas fa-exchange-alt"},V=e=>"WITHDRAWAL"===e?"amount-negative":"amount-positive",I=e=>"WITHDRAWAL"===e?"-":"+",D=()=>{window.history.back()};let R;return(0,i.sV)((()=>{m(),p(),f(),R=setInterval((()=>{m()}),3e4)})),(0,i.hi)((()=>{R&&clearInterval(R)})),{walletBalance:e,bankAccounts:t,transactions:s,showBankModal:a,showWithdrawalModal:o,newBank:r,withdrawalError:l,withdrawal:n,addBankAccount:v,setPrimaryAccount:b,withdrawMoney:w,showAddBankModal:x,closeBankModal:L,showWithdrawModal:y,closeWithdrawModal:S,formatDate:_,formatTransactionType:M,getTransactionTypeClass:A,getTransactionIcon:T,getAmountClass:V,getAmountPrefix:I,goBack:D,showBankDetailsModal:c,selectedBank:d,showBankDetails:E,closeBankDetailsModal:P,bonusLevels:u,withdrawalLimits:h,validateWithdrawalAmount:k}}};const sg=(0,I.A)(tg,[["render",eg],["__scopeId","data-v-ada145ca"]]);var ag=sg;const ig={class:"min-h-screen bg-[#121212] text-white py-6"},og={class:"w-full px-2 md:px-4"},rg={class:"flex items-center mb-8 relative px-2 md:px-6"},lg={class:"w-full text-center"},ng={class:"text-3xl font-bold relative inline-block px-4"},cg={key:0,class:"flex justify-center items-center py-8"},dg={key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-7 gap-3 px-2 md:px-6 mt-16 md:mt-0"},ug=["onClick"],hg={class:"relative w-full aspect-video bg-gray-800 rounded-lg overflow-hidden mb-2"},mg=["src","alt"],pg={class:"absolute top-1 left-1 flex gap-1"},fg={key:0,class:"bg-red-600 text-white text-[10px] px-1.5 py-0.5 rounded"},gg={key:1,class:"bg-purple-600 text-white text-[10px] px-1.5 py-0.5 rounded"},vg={key:2,class:"bg-yellow-600 text-white text-[10px] px-1.5 py-0.5 rounded"},bg={class:"absolute bottom-1 right-1 bg-black/70 px-1.5 py-0.5 rounded text-[10px] text-white"},yg={class:"px-1"},kg={class:"text-sm font-medium mb-0.5 line-clamp-2"},wg={class:"text-gray-400 text-xs"},xg={key:2,class:"mt-6 text-center"};function Lg(e,t,s,a,o,r){return(0,i.uX)(),(0,i.CE)("div",ig,[(0,i.Lk)("div",og,[(0,i.Lk)("div",rg,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=t=>e.$router.back()),class:"text-white hover:text-gray-300 transition-colors absolute left-2 md:left-6 z-10"},t[2]||(t[2]=[(0,i.Lk)("i",{class:"fas fa-arrow-left text-2xl"},null,-1)])),(0,i.Lk)("div",lg,[(0,i.Lk)("h1",ng,[(0,i.eW)((0,d.v_)(a.category?.name||"Loading...")+" ",1),t[3]||(t[3]=(0,i.Lk)("div",{class:"absolute bottom-0 left-0 w-full h-0.5 bg-gradient-to-r from-red-500 to-red-800"},null,-1))])])]),a.category?((0,i.uX)(),(0,i.CE)("div",dg,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.categoryVideos,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"cursor-pointer group transform hover:scale-105 transition-transform duration-200",onClick:t=>a.playVideo(e)},[(0,i.Lk)("div",hg,[(0,i.Lk)("img",{src:e.thumbnail_url,alt:e.title,class:"w-full h-full object-cover"},null,8,mg),(0,i.Lk)("div",pg,[a.isNewVideo(e.created_at)?((0,i.uX)(),(0,i.CE)("span",fg," NEW ")):(0,i.Q3)("",!0),e.is_premium?((0,i.uX)(),(0,i.CE)("span",gg," PREMIUM ")):(0,i.Q3)("",!0),"rental"===e.video_type?((0,i.uX)(),(0,i.CE)("span",vg," RENTAL ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",bg,(0,d.v_)(a.formatDuration(e.duration)),1),t[5]||(t[5]=(0,i.Lk)("div",{class:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/50"},[(0,i.Lk)("div",{class:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm"},[(0,i.Lk)("i",{class:"fas fa-play text-sm text-white"})])],-1))]),(0,i.Lk)("div",yg,[(0,i.Lk)("h3",kg,(0,d.v_)(e.title),1),(0,i.Lk)("p",wg,(0,d.v_)(a.formatViews(e.views_count))+" Views",1)])],8,ug)))),128))])):((0,i.uX)(),(0,i.CE)("div",cg,t[4]||(t[4]=[(0,i.Lk)("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-white"},null,-1)]))),a.hasMoreVideos?((0,i.uX)(),(0,i.CE)("div",xg,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>a.loadMoreVideos&&a.loadMoreVideos(...e)),class:"bg-white/10 hover:bg-white/20 text-white px-5 py-1.5 rounded-full text-sm"}," Load More ")])):(0,i.Q3)("",!0)])])}var Cg={name:"CategoryVideos",setup(){const e=(0,q.lq)(),t=(0,q.rd)(),s=(0,$s.KR)(null),a=(0,$s.KR)([]),o=(0,$s.KR)(1),r=(0,$s.KR)(!0),l=20,n=async(t=1)=>{try{const i=await C.A.get(`http://192.168.0.104:8000/api/videos/category/${e.params.id}/?page=${t}&page_size=${l}`);if("success"===i.data.status){i.data.category&&(s.value={...i.data.category,name:u(i.data.category.name)});const e=i.data.data.map((e=>({...e,title:u(e.title),description:u(e.description)})));a.value=1===t?e:[...a.value,...e],r.value=i.data.pagination.has_next,o.value=t}}catch(i){console.error("Error fetching videos:",i)}},c=()=>{r.value&&n(o.value+1)},d=e=>{t.push({name:"MovieDetails",params:{id:e.id,videoUrl:e.video_url,videoType:"hls"}})},u=e=>e?e.split(/[\s-]+/).map((e=>{const t=["HD","UHD","4K","TV","II","III","IV","SPY"];if(t.includes(e.toUpperCase()))return e.toUpperCase();const s=["a","an","the","and","but","or","for","nor","in","to","on","at","by","of"];return s.includes(e.toLowerCase())?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" "):"",h=e=>{const t=new Date(e),s=new Date,a=Math.ceil((s-t)/864e5);return a<=7},m=e=>{const t=Math.floor(e/60),s=e%60;return`${t}:${s.toString().padStart(2,"0")}`},p=e=>e>=1e6?`${(e/1e6).toFixed(1)}M`:e>=1e3?`${(e/1e3).toFixed(1)}K`:e.toString();return(0,i.sV)((()=>{n()})),{category:s,categoryVideos:a,hasMoreVideos:r,loadMoreVideos:c,playVideo:d,isNewVideo:h,formatDuration:m,formatViews:p}}};const Sg=(0,I.A)(Cg,[["render",Lg],["__scopeId","data-v-19ca13a6"]]);var Eg=Sg;const Pg={class:"watchlist-container"},_g={key:0,class:"loading-state"},Mg={key:1,class:"error-state"},Ag={key:2,class:"empty-state"},Tg={key:3,class:"watchlist-grid"},Vg={class:"video-card"},Ig=["onClick"],Dg=["src","alt"],Rg={class:"video-info"},$g={class:"video-title"},Fg={class:"video-meta"},Xg={class:"action-buttons"},jg=["onClick"],Ng=["onClick"];function Ug(e,t,s,a,o,r){const l=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",Pg,[t[9]||(t[9]=(0,i.Lk)("h1",{class:"watchlist-title"},"My Watchlist",-1)),o.loading?((0,i.uX)(),(0,i.CE)("div",_g,t[0]||(t[0]=[(0,i.Lk)("i",{class:"fas fa-spinner fa-spin"},null,-1),(0,i.eW)(" Loading your watchlist... ")]))):o.error?((0,i.uX)(),(0,i.CE)("div",Mg,[t[1]||(t[1]=(0,i.Lk)("i",{class:"fas fa-exclamation-circle"},null,-1)),(0,i.eW)(" "+(0,d.v_)(o.error),1)])):0===o.watchlistItems.length?((0,i.uX)(),(0,i.CE)("div",Ag,[t[3]||(t[3]=(0,i.Lk)("i",{class:"fas fa-bookmark"},null,-1)),t[4]||(t[4]=(0,i.Lk)("p",null,"Your watchlist is empty",-1)),(0,i.bF)(l,{to:"/",class:"browse-link"},{default:(0,i.k6)((()=>t[2]||(t[2]=[(0,i.eW)("Browse Videos")]))),_:1,__:[2]})])):((0,i.uX)(),(0,i.CE)("div",Tg,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.watchlistItems,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"watchlist-item"},[(0,i.Lk)("div",Vg,[(0,i.Lk)("div",{class:"thumbnail-container",onClick:t=>r.navigateToVideo(e.content_details.id)},[(0,i.Lk)("img",{src:e.content_details.thumbnail_url,alt:e.content_details.title},null,8,Dg),t[5]||(t[5]=(0,i.Lk)("div",{class:"overlay"},[(0,i.Lk)("button",{class:"play-button"},[(0,i.Lk)("i",{class:"fas fa-play"})])],-1))],8,Ig),(0,i.Lk)("div",Rg,[(0,i.Lk)("h3",$g,(0,d.v_)(e.content_details.title),1),(0,i.Lk)("div",Fg,[(0,i.Lk)("span",null,(0,d.v_)(r.getYear(e.content_details.release_date)),1),t[6]||(t[6]=(0,i.Lk)("span",{class:"dot"},"•",-1)),(0,i.Lk)("span",null,(0,d.v_)(r.formatDuration(e.content_details.duration)),1)]),(0,i.Lk)("div",Xg,[(0,i.Lk)("button",{class:"watch-now",onClick:t=>r.navigateToVideo(e.content_details.id)},t[7]||(t[7]=[(0,i.Lk)("i",{class:"fas fa-play"},null,-1),(0,i.eW)(" Watch Now ")]),8,jg),(0,i.Lk)("button",{class:"remove-button",onClick:t=>r.removeFromWatchlist(e.content)},t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1),(0,i.eW)(" Remove ")]),8,Ng)])])])])))),128))]))])}var Bg={name:"WatchList",data(){return{watchlistItems:[],loading:!0,error:null}},async created(){await this.fetchWatchlist()},methods:{async fetchWatchlist(){try{this.loading=!0;const e=await Yr.getList();this.watchlistItems=e.data,this.loading=!1}catch(e){console.error("Error fetching watchlist:",e),this.error="Failed to load watchlist. Please try again later.",this.loading=!1}},async removeFromWatchlist(e){try{await Yr.toggle(e),await this.fetchWatchlist()}catch(t){console.error("Error removing from watchlist:",t),this.$store.dispatch("showToast",{message:"Failed to remove from watchlist. Please try again.",type:"error"})}},navigateToVideo(e){this.$router.push(`/movie/${e}`)},getYear(e){return e?new Date(e).getFullYear():""},formatDuration(e){if(!e)return"";const t=Math.floor(e/3600),s=Math.floor(e%3600/60);return t>0?`${t}h ${s}m`:`${s}m`}}};const Og=(0,I.A)(Bg,[["render",Ug],["__scopeId","data-v-83c575ce"]]);var Qg=Og;const Wg=[{path:"/",name:"Home",component:_a},{path:"/login",name:"Login",component:ii},{path:"/register",name:"Register",component:ru},{path:"/plans",name:"SubscriptionPlans",component:Ci},{path:"/player",name:"VideoPlayer",component:Mo},{path:"/movie/:id",name:"MovieDetails",component:sl,props:!0},{path:"/regional",name:"RegionalContent",component:oc},{path:"/search",name:"Search",component:Fc},{path:"/regional/:stateId",name:"RegionalState",component:zc},{path:"/profile",name:"Profile",component:Mh,meta:{requiresAuth:!0}},{path:"/profile/update",name:"ProfileUpdate",component:bm,meta:{requiresAuth:!0}},{path:"/referral",name:"Referral",component:Eh},{path:"/referral/details",name:"ReferralDetails",component:cp},{path:"/downloads",name:"Downloads",component:()=>s.e(511).then(s.bind(s,9511)),meta:{requiresAuth:!0}},{path:"/payment",name:"Payment",component:kp,meta:{requiresAuth:!0}},{path:"/wallet",name:"Wallet",component:ag,meta:{requiresAuth:!0,title:"Wallet"}},{path:"/category/:id",name:"CategoryVideos",component:Eg},{path:"/watchlist",name:"WatchList",component:Qg,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>s.e(185).then(s.bind(s,5185))}],Kg=(0,q.aE)({history:(0,q.Bt)(),routes:Wg,scrollBehavior(){return{top:0}}});Kg.beforeEach(((e,t,s)=>{const a=P.state.isAuthenticated||"true"===localStorage.getItem("isAuthenticated"),i=P.state.user||JSON.parse(localStorage.getItem("user"));if(console.log("Navigation:",{from:t.path,to:e.path,isAuthenticated:a,hasUser:!!i}),e.matched.some((e=>e.meta.requiresAuth)))if(a&&i)console.log("Auth check passed - Proceeding to",e.path),s();else{const t=e.fullPath;console.log("Auth required - Redirecting to login, saving redirect:",t),s({path:"/login",query:{redirect:t}})}else if("/login"===e.path&&a&&i){const t=e.query.redirect||"/";console.log("Already logged in - Redirecting to:",t),s(t)}else console.log("No auth required - Proceeding to",e.path),s()}));var qg=Kg;C.A.defaults.baseURL="http://192.168.0.104:8000",C.A.defaults.withCredentials=!0;const zg=(0,a.Ef)(K);zg.use(P),zg.use(qg),zg.mount("#app")}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,a,i,o){if(!a){var r=1/0;for(d=0;d<e.length;d++){a=e[d][0],i=e[d][1],o=e[d][2];for(var l=!0,n=0;n<a.length;n++)(!1&o||r>=o)&&Object.keys(s.O).every((function(e){return s.O[e](a[n])}))?a.splice(n--,1):(l=!1,o<r&&(r=o));if(l){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[a,i,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.f={},s.e=function(e){return Promise.all(Object.keys(s.f).reduce((function(t,a){return s.f[a](e,t),t}),[]))}}(),function(){s.u=function(e){return"js/"+e+"."+{185:"977aaff8",347:"23e412e3",511:"474c8f34"}[e]+".js"}}(),function(){s.miniCssF=function(e){return"css/"+e+"."+{185:"fd66d84b",511:"298d2082"}[e]+".css"}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="no1ott-vujs:";s.l=function(a,i,o,r){if(e[a])e[a].push(i);else{var l,n;if(void 0!==o)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+o){l=u;break}}l||(n=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",t+o),l.src=a),e[a]=[i];var h=function(t,s){l.onerror=l.onload=null,clearTimeout(m);var i=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach((function(e){return e(s)})),t)return t(s)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),n&&document.head.appendChild(l)}}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,a,i,o){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",s.nc&&(r.nonce=s.nc);var l=function(s){if(r.onerror=r.onload=null,"load"===s.type)i();else{var a=s&&s.type,l=s&&s.target&&s.target.href||t,n=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+l+")");n.name="ChunkLoadError",n.code="CSS_CHUNK_LOAD_FAILED",n.type=a,n.request=l,r.parentNode&&r.parentNode.removeChild(r),o(n)}};return r.onerror=r.onload=l,r.href=t,a?a.parentNode.insertBefore(r,a.nextSibling):document.head.appendChild(r),r},t=function(e,t){for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var i=s[a],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var r=document.getElementsByTagName("style");for(a=0;a<r.length;a++){i=r[a],o=i.getAttribute("data-href");if(o===e||o===t)return i}},a=function(a){return new Promise((function(i,o){var r=s.miniCssF(a),l=s.p+r;if(t(r,l))return i();e(a,l,null,i,o)}))},i={524:0};s.f.miniCss=function(e,t){var s={185:1,511:1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=a(e).then((function(){i[e]=0}),(function(t){throw delete i[e],t})))}}}(),function(){s.b=document.baseURI||self.location.href;var e={524:0};s.f.j=function(t,a){var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var o=new Promise((function(s,a){i=e[t]=[s,a]}));a.push(i[2]=o);var r=s.p+s.u(t),l=new Error,n=function(a){if(s.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var o=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,i[1](l)}};s.l(r,n,"chunk-"+t,t)}},s.O.j=function(t){return 0===e[t]};var t=function(t,a){var i,o,r=a[0],l=a[1],n=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(i in l)s.o(l,i)&&(s.m[i]=l[i]);if(n)var d=n(s)}for(t&&t(a);c<r.length;c++)o=r[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},a=self["webpackChunkno1ott_vujs"]=self["webpackChunkno1ott_vujs"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(387)}));a=s.O(a)})();
//# sourceMappingURL=app.70c850af.js.map